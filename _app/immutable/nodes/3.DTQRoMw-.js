var Ct=Object.defineProperty;var Lt=(a,e,f)=>e in a?Ct(a,e,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[e]=f;var ze=(a,e,f)=>Lt(a,typeof e!="symbol"?e+"":e,f);import{t as _,a as s,c as Ie}from"../chunks/B_DQ3xhi.js";import{y as Xe,u as Mt,aA as ht,p as Ke,ah as Ft,i as Z,b as n,aB as re,c as r,r as t,a as Ve,f as j,s as i,aC as we,aH as ke,t as M,h as Ne,$ as Ht}from"../chunks/CQrlQ-zA.js";import{d as yt,s as o,h as Pt}from"../chunks/CboX5FNv.js";import{i as O}from"../chunks/CZFajD8L.js";import{s as je,a as Je}from"../chunks/CxJIPVeE.js";import{p as Kt}from"../chunks/DOf1QVHK.js";import{s as We,a as Fe,S as Ze,R as Vt}from"../chunks/DQeXEJ-t.js";import{o as Be,a as Ue}from"../chunks/TZ93pTPT.js";import{$ as Ye}from"../chunks/DTZtGpg6.js";import{r as Oe,a as se,s as Ae,b as Ge,L as Gt,c as $e}from"../chunks/Bzl-U8tT.js";import{e as be,i as he}from"../chunks/C679Stw7.js";import{b as st}from"../chunks/DrtuEJ5w.js";import{b as et}from"../chunks/BBb02nhJ.js";import{s as Qe}from"../chunks/9Z4grmEM.js";import{b as vt}from"../chunks/CScWPKHT.js";function ct(a,e,f){Xe(()=>{var D=Mt(()=>e(a,f==null?void 0:f())||{});if(D!=null&&D.destroy)return()=>D.destroy()})}class It{static fromJson(e){return JSON.parse(e)}static toJson(e){return JSON.stringify(e,null,2)}}const At="agent-settings",ut={connection:{url:"ws://localhost:8080/ws",token:""},team:"aiwolf-nlp-viewer",display:{largeScale:!1}};function Ut(){const a=localStorage.getItem(At);if(a)try{return It.fromJson(a)}catch(e){console.error("Failed to parse agent settings:",e)}return Tt(ut),ut}function Tt(a){localStorage.setItem(At,It.toJson(a))}const Se=ht(Ut());Se.subscribe(Tt);var pe=(a=>(a.NAME="NAME",a.TALK="TALK",a.WHISPER="WHISPER",a.VOTE="VOTE",a.DIVINE="DIVINE",a.GUARD="GUARD",a.ATTACK="ATTACK",a.INITIALIZE="INITIALIZE",a.DAILY_INITIALIZE="DAILY_INITIALIZE",a.DAILY_FINISH="DAILY_FINISH",a.FINISH="FINISH",a))(pe||{});const He={NAME:"名前",TALK:"トーク",WHISPER:"囁き",VOTE:"投票",DIVINE:"占い",GUARD:"護衛",ATTACK:"襲撃",INITIALIZE:"ゲーム開始",DAILY_INITIALIZE:"昼開始",DAILY_FINISH:"昼終了",FINISH:"ゲーム終了"},tt={ミナト:"/images/male/01.png",タクミ:"/images/male/02.png",ケンジ:"/images/male/03.png",リュウジ:"/images/male/04.png",ダイスケ:"/images/male/05.png",シオン:"/images/male/06.png",ベンジャミン:"/images/male/07.png",トシオ:"/images/male/08.png",ジョナサン:"/images/male/09.png",シュンイチ:"/images/male/10.png",ジョージ:"/images/male/11.png",セルヴァス:"/images/male/12.png",サクラ:"/images/female/01.png",リン:"/images/female/02.png",ユミ:"/images/female/03.png",メイ:"/images/female/04.png",ミサキ:"/images/female/05.png",ミオ:"/images/female/06.png",ミヅキ:"/images/female/07.png",ミナコ:"/images/female/08.png",アスカ:"/images/female/09.png",ミドリ:"/images/female/10.png",ヴィクトリア:"/images/female/11.png",シズエ:"/images/female/12.png"},_t=()=>({status:"disconnected",deadline:null,entries:[],agent:null,role:null,profile:null,request:null,info:null,mediumResults:[],divineResults:[],setting:null,talkHistory:[],whisperHistory:[],executedAgents:[],attackedAgents:[]});function qt(){const{subscribe:a,update:e}=ht(_t());let f=null,D=null,g=null,H=null;Se.subscribe(w=>{D=w});function ee(){f&&(f.close(),f=null,e(w=>({...w,status:"disconnected"}))),H&&(H.clear(),H=null)}function ne(){if(!D)return;f&&e(()=>_t()),e(c=>({...c,status:"connecting"}));const w=new URL(D.connection.url);D.connection.token&&w.searchParams.set("token",D.connection.token),f=new WebSocket(w),f.onopen=()=>{e(c=>({...c,status:"connected"}))},f.onclose=()=>{ee()},f.onerror=()=>{ee()},f.onmessage=c=>{try{const x=Date.now(),P=JSON.parse(c.data);e(W=>B(W,P)),z(P,x)}catch(x){console.error("Failed to parse message:",x)}}}function ae(w){if(H&&(H.clear(),H=null,e(c=>({...c,deadline:null}))),f&&f.readyState===WebSocket.OPEN)try{f.send(w),e(c=>{const x=c.entries.slice();return x.push(w),{...c,entries:x}})}catch(c){console.error("Failed to send message:",c)}}function B(w,c){const x={...w,entries:[...w.entries,c],request:c.request};if(c.info){if(x.info=c.info,c.info.medium_result){const P=c.info.medium_result;x.mediumResults.some(W=>W.day===P.day&&W.agent===P.agent)||x.mediumResults.push(P)}if(c.info.divine_result){const P=c.info.divine_result;x.divineResults.some(W=>W.day===P.day&&W.agent===P.agent)||x.divineResults.push(P)}c.info.executed_agent&&x.executedAgents.push(c.info.executed_agent),c.info.attacked_agent&&x.attackedAgents.push(c.info.attacked_agent)}return c.setting&&(x.setting=c.setting,g=c.setting.timeout.action),c.talk_history&&x.talkHistory.push(...c.talk_history),c.whisper_history&&x.whisperHistory.push(...c.whisper_history),c.request===pe.INITIALIZE&&x.info&&(x.agent=x.info.agent,x.role=x.info.role_map[x.info.agent],x.profile=x.info.profile||null),x}function z(w,c){switch(w.request){case pe.NAME:ae((D==null?void 0:D.team)||"viewer"+Math.floor(Math.random()*1e3));break;case pe.TALK:case pe.WHISPER:case pe.VOTE:case pe.DIVINE:case pe.GUARD:case pe.ATTACK:H&&H.clear(),H=new Wt(()=>{ae("TIMEOUT")},new Date(c+(g??6e4))),e(x=>({...x,deadline:(H==null?void 0:H.deadline())??null}));break;case pe.FINISH:ee();break}}return{subscribe:a,connect:ne,disconnect:ee,send:ae}}const Pe=qt();class Wt{constructor(e,f){ze(this,"timeout");ze(this,"_deadline");this.timeout=setTimeout(e,f.getTime()-new Date().getTime()),this._deadline=f}deadline(){return this._deadline}clear(){clearTimeout(this.timeout)}}var dt;(function(a){a[a.HIGH_SURROGATE_START=55296]="HIGH_SURROGATE_START",a[a.HIGH_SURROGATE_END=56319]="HIGH_SURROGATE_END",a[a.LOW_SURROGATE_START=56320]="LOW_SURROGATE_START",a[a.REGIONAL_INDICATOR_START=127462]="REGIONAL_INDICATOR_START",a[a.REGIONAL_INDICATOR_END=127487]="REGIONAL_INDICATOR_END",a[a.FITZPATRICK_MODIFIER_START=127995]="FITZPATRICK_MODIFIER_START",a[a.FITZPATRICK_MODIFIER_END=127999]="FITZPATRICK_MODIFIER_END",a[a.VARIATION_MODIFIER_START=65024]="VARIATION_MODIFIER_START",a[a.VARIATION_MODIFIER_END=65039]="VARIATION_MODIFIER_END",a[a.DIACRITICAL_MARKS_START=8400]="DIACRITICAL_MARKS_START",a[a.DIACRITICAL_MARKS_END=8447]="DIACRITICAL_MARKS_END",a[a.SUBDIVISION_INDICATOR_START=127988]="SUBDIVISION_INDICATOR_START",a[a.TAGS_START=917504]="TAGS_START",a[a.TAGS_END=917631]="TAGS_END",a[a.ZWJ=8205]="ZWJ"})(dt||(dt={}));const Zt=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);var ft;function gt(a){if(typeof a!="string")throw new TypeError("string cannot be undefined or null");const e=[];let f=0,D=0;for(;f<a.length;)D+=jt(f+D,a),$t(a[f+D])&&D++,zt(a[f+D])&&D++,Qt(a[f+D])&&D++,ea(a[f+D])?D++:(e.push(a.substring(f,f+D)),f+=D,D=0);return e}function jt(a,e){const f=e[a];if(!Jt(f)||a===e.length-1)return 1;const D=f+e[a+1];let g=e.substring(a+2,a+5);return mt(D)&&mt(g)?4:Bt(D)&&Xt(g)?e.slice(a).indexOf(String.fromCodePoint(917631))+2:Yt(g)?4:2}function Jt(a){return a&&Ce(a[0].charCodeAt(0),55296,56319)}function mt(a){return Ce(at(a),127462,127487)}function Bt(a){return Ce(at(a),127988,127988)}function Yt(a){return Ce(at(a),127995,127999)}function zt(a){return typeof a=="string"&&Ce(a.charCodeAt(0),65024,65039)}function Qt(a){return typeof a=="string"&&Ce(a.charCodeAt(0),8400,8447)}function Xt(a){const e=a.codePointAt(0);return typeof a=="string"&&typeof e=="number"&&Ce(e,917504,917631)}function $t(a){return typeof a=="string"&&Zt.includes(a.charCodeAt(0))}function ea(a){return typeof a=="string"&&a.charCodeAt(0)===8205}function at(a){return(a.charCodeAt(0)-55296<<10)+(a.charCodeAt(1)-56320)+65536}function Ce(a,e,f){return a>=e&&a<=f}(function(a){a[a.unit_1=1]="unit_1",a[a.unit_2=2]="unit_2",a[a.unit_4=4]="unit_4"})(ft||(ft={}));function xt(a,e,f){a.key==="Enter"&&(a.ctrlKey||a.metaKey)&&(a.preventDefault(),e.onSendMessage(n(f)))}var ta=_('<span aria-live="polite"> </span>m',1),aa=(a,e,f)=>e(f()),ra=_('<button class="btn btn-xl"> </button>'),na=(a,e)=>e("Skip"),ia=_('<button class="btn btn-xl" aria-label="Skip"><iconify-icon></iconify-icon> SKIP</button>',2),la=(a,e)=>e("Over"),oa=_('<!> <button class="btn btn-xl" aria-label="Over"><iconify-icon></iconify-icon> OVER</button>',3),sa=_("<option></option>"),va=_("<option></option>"),ca=_("<!> <option></option>",1),ua=_('<pre class="text-2xl"> </pre>'),_a=_('<pre class="text-2xl bg-error text-error-content"> </pre>'),da=(a,e,f)=>e.onSendMessage(n(f)),fa=_('<div class="flex gap-2 items-center px-4 pt-4 pb-4 overflow-x-auto"><span class="countdown font-mono text-3xl"><!> <span aria-live="polite"> </span>s</span> <span class="bg-primary text-primary-content w-full py-2 text-3xl font-bold text-nowrap text-center"> </span></div> <div class="flex gap-2 items-center px-4 pt-2 pb-4 overflow-x-auto"><!> <input type="text" class="input input-xl min-w-64 flex-1" list="suggests"> <datalist id="suggests"><!></datalist> <!> <button class="btn btn-xl" aria-label="Send"><iconify-icon></iconify-icon> </button></div> <div class="-mt-2 mx-4 mb-2"><progress class="progress" max="100"></progress></div>',3),ga=_('<span aria-live="polite"> </span>m',1),ma=(a,e,f)=>e(f()),xa=_('<button class="btn"> </button>'),pa=_('<span class="bg-primary text-primary-content text-lg font-bold text-nowrap"> </span> <!>',1),ba=(a,e)=>e("Skip"),ha=_('<button class="btn" aria-label="Skip"><iconify-icon></iconify-icon> SKIP</button>',2),ya=(a,e)=>e("Over"),Ia=_('<span class="bg-primary text-primary-content text-lg font-bold text-nowrap"> </span> <!> <button class="btn" aria-label="Over"><iconify-icon></iconify-icon> OVER</button>',3),Aa=_("<option></option>"),Ta=_("<option></option>"),wa=_("<!> <option></option>",1),ka=_('<pre class="text-md"> </pre>'),Sa=_('<pre class="text-md bg-error text-error-content"> </pre>'),Ra=(a,e,f)=>e.onSendMessage(n(f)),Ea=_('<div class="flex gap-2 items-center p-4 overflow-x-auto"><span class="countdown font-mono text-2xl"><!> <span aria-live="polite"> </span>s</span> <!> <input type="text" class="input min-w-64 flex-1" list="suggests"> <datalist id="suggests"><!></datalist> <!> <button class="btn" aria-label="Send"><iconify-icon></iconify-icon> </button></div> <div class="-mt-2 mx-4 mb-2"><progress class="progress" max="100"></progress></div>',3),Oa=_('<form class="flex-none bg-base-200" data-sveltekit-keepfocus=""><!></form>');function Da(a,e){Ke(e,!0);const[f,D]=je(),g=()=>Je(Ye,"$_",f);let H=re(""),ee=re(0),ne=re(void 0),ae=re(null);const B=ke(()=>{var b;return e.remain!==null?e.remain/(((b=e.setting)==null?void 0:b.timeout.action)??6e4)*100:0}),z=ke(()=>e.remain!==null?Math.floor(e.remain/6e4):0),w=ke(()=>e.remain!==null?Math.floor(e.remain%6e4/1e3):0),c=ke(()=>[pe.VOTE,pe.DIVINE,pe.GUARD,pe.ATTACK].includes(e.request));function x(b){var F,R;if(!e.request||!e.setting)return 0;const k=e.request===pe.TALK?e.setting.talk.max_length:e.request===pe.WHISPER?e.setting.whisper.max_length:null;if(!k)return 0;let A=k.base_length??0;if(A+=((F=e.info)==null?void 0:F.remain_length)??0,k.mention_length){for(const ve in((R=e.info)==null?void 0:R.status_map)??{})if(b.indexOf("@"+ve)!==-1){A+=k.mention_length,A+=gt("@"+ve).length;break}}return k.per_talk&&(A=Math.min(A,k.per_talk)),A-=gt(b).length,A}Ft(()=>{Z(ee,x(n(H)),!0)}),Be(()=>{const b=Se.subscribe(k=>{Z(ne,k,!0)});return()=>{b()}});function P(b){var k;Z(H,b,!0),(k=n(ae))==null||k.focus()}function W(b){b.focus()}var oe=Oa(),ie=r(oe);{var ce=b=>{var k=fa(),A=j(k),F=r(A),R=r(F);{var ve=l=>{var u=ta(),I=j(u),m=r(I,!0);t(I),we(),M(V=>{We(I,`--value:${n(z)??""};`),Ae(I,"aria-label",V),o(m,n(z))},[()=>n(z).toString()]),s(l,u)};O(R,l=>{e.remain&&e.remain>6e4&&l(ve)})}var de=i(R,2),me=r(de,!0);t(de),we(),t(F);var Y=i(F,2),Q=r(Y,!0);t(Y),t(A);var te=i(A,2),le=r(te);{var ue=l=>{var u=Ie(),I=j(u);be(I,17,()=>{var m;return Object.entries(((m=e.info)==null?void 0:m.status_map)??{})},he,(m,V)=>{let G=()=>n(V)[0],U=()=>n(V)[1];var $=Ie(),fe=j($);{var ye=ge=>{var _e=ra();_e.__click=[aa,P,G];var Ee=r(_e,!0);t(_e),M(()=>o(Ee,G())),s(ge,_e)};O(fe,ge=>{var _e;U()===Fe.ALIVE&&G()!==((_e=e.info)==null?void 0:_e.agent)&&ge(ye)})}s(m,$)}),s(l,u)},p=l=>{var u=oa(),I=j(u);{var m=U=>{var $=ia();$.__click=[na,P];var fe=r($);se(fe,"icon","mdi:arrow-u-down-right-bold"),we(),t($),s(U,$)};O(I,U=>{var $;((($=e.info)==null?void 0:$.remain_skip)??0)>0&&U(m)})}var V=i(I,2);V.__click=[la,P];var G=r(V);se(G,"icon","mdi:skip-forward"),we(),t(V),s(l,u)};O(le,l=>{n(c)?l(ue):l(p,!1)})}var h=i(le,2);Oe(h),h.__keydown=[xt,e,H],Xe(()=>st(h,()=>n(H),l=>Z(H,l))),ct(h,l=>W==null?void 0:W(l)),et(h,l=>Z(ae,l),()=>n(ae));var T=i(h,2),E=r(T);{var q=l=>{var u=Ie(),I=j(u);be(I,17,()=>{var m;return Object.entries(((m=e.info)==null?void 0:m.status_map)??{})},he,(m,V)=>{let G=()=>n(V)[0],U=()=>n(V)[1];var $=Ie(),fe=j($);{var ye=ge=>{var _e=sa(),Ee={};M(()=>{Ee!==(Ee=G())&&(_e.value=(_e.__value=G())??"")}),s(ge,_e)};O(fe,ge=>{var _e;U()===Fe.ALIVE&&G()!==((_e=e.info)==null?void 0:_e.agent)&&ge(ye)})}s(m,$)}),s(l,u)},L=l=>{var u=ca(),I=j(u);{var m=G=>{var U=va();U.value=U.__value="Skip",s(G,U)};O(I,G=>{var U;(((U=e.info)==null?void 0:U.remain_skip)??0)>0&&G(m)})}var V=i(I,2);V.value=V.__value="Over",s(l,u)};O(E,l=>{n(c)?l(q):l(L,!1)})}t(T);var X=i(T,2);{var N=l=>{var u=ua(),I=r(u,!0);t(u),M(m=>o(I,m),[()=>g()("agent.remainingChars",{values:{count:n(ee)}})]),s(l,u)},C=l=>{var u=_a(),I=r(u,!0);t(u),M(m=>o(I,m),[()=>g()("agent.exceededChars",{values:{count:n(ee)*-1}})]),s(l,u)};O(X,l=>{n(ee)>=0?l(N):l(C,!1)})}var S=i(X,2);S.__click=[da,e,H];var J=r(S);se(J,"icon","mdi:send");var v=i(J);t(S),t(te);var y=i(te,2),d=r(y);t(y),M((l,u,I)=>{We(de,`--value:${n(w)??""};`),Ae(de,"aria-label",l),o(me,n(w)),o(Q,u),o(v,` ${I??""}`),Ge(d,n(B))},[()=>n(w).toString(),()=>n(c)?`${He[e.request]}${g()("agent.selectTarget")}`:`${He[e.request]}${g()("agent.enterContent")}`,()=>g()("agent.send")]),s(b,k)},K=b=>{var k=Ea(),A=j(k),F=r(A),R=r(F);{var ve=v=>{var y=ga(),d=j(y),l=r(d,!0);t(d),we(),M((u,I,m)=>{We(d,`--value:${u??""};`),Ae(d,"aria-label",I),o(l,m)},[()=>Math.floor(e.remain/6e4),()=>Math.floor(e.remain/6e4).toString(),()=>Math.floor(e.remain/6e4)]),s(v,y)};O(R,v=>{e.remain&&e.remain>6e4&&v(ve)})}var de=i(R,2),me=r(de,!0);t(de),we(),t(F);var Y=i(F,2);{var Q=v=>{var y=pa(),d=j(y),l=r(d);t(d);var u=i(d,2);be(u,17,()=>{var I;return Object.entries(((I=e.info)==null?void 0:I.status_map)??{})},he,(I,m)=>{let V=()=>n(m)[0],G=()=>n(m)[1];var U=Ie(),$=j(U);{var fe=ye=>{var ge=xa();ge.__click=[ma,P,V];var _e=r(ge,!0);t(ge),M(()=>o(_e,V())),s(ye,ge)};O($,ye=>{var ge;G()===Fe.ALIVE&&V()!==((ge=e.info)==null?void 0:ge.agent)&&ye(fe)})}s(I,U)}),M(I=>o(l,`${He[e.request]??""}${I??""}`),[()=>g()("agent.selectTarget")]),s(v,y)},te=v=>{var y=Ia(),d=j(y),l=r(d);t(d);var u=i(d,2);{var I=G=>{var U=ha();U.__click=[ba,P];var $=r(U);se($,"icon","mdi:arrow-u-down-right-bold"),we(),t(U),s(G,U)};O(u,G=>{var U;(((U=e.info)==null?void 0:U.remain_skip)??0)>0&&G(I)})}var m=i(u,2);m.__click=[ya,P];var V=r(m);se(V,"icon","mdi:skip-forward"),we(),t(m),M(G=>o(l,`${He[e.request]??""}${G??""}`),[()=>g()("agent.enterContent")]),s(v,y)};O(Y,v=>{n(c)?v(Q):v(te,!1)})}var le=i(Y,2);Oe(le),le.__keydown=[xt,e,H],Xe(()=>st(le,()=>n(H),v=>Z(H,v))),ct(le,v=>W==null?void 0:W(v)),et(le,v=>Z(ae,v),()=>n(ae));var ue=i(le,2),p=r(ue);{var h=v=>{var y=Ie(),d=j(y);be(d,17,()=>{var l;return Object.entries(((l=e.info)==null?void 0:l.status_map)??{})},he,(l,u)=>{let I=()=>n(u)[0],m=()=>n(u)[1];var V=Ie(),G=j(V);{var U=$=>{var fe=Aa(),ye={};M(()=>{ye!==(ye=I())&&(fe.value=(fe.__value=I())??"")}),s($,fe)};O(G,$=>{var fe;m()===Fe.ALIVE&&I()!==((fe=e.info)==null?void 0:fe.agent)&&$(U)})}s(l,V)}),s(v,y)},T=v=>{var y=wa(),d=j(y);{var l=I=>{var m=Ta();m.value=m.__value="Skip",s(I,m)};O(d,I=>{var m;(((m=e.info)==null?void 0:m.remain_skip)??0)>0&&I(l)})}var u=i(d,2);u.value=u.__value="Over",s(v,y)};O(p,v=>{n(c)?v(h):v(T,!1)})}t(ue);var E=i(ue,2);{var q=v=>{var y=ka(),d=r(y,!0);t(y),M(l=>o(d,l),[()=>g()("agent.remainingChars",{values:{count:n(ee)}})]),s(v,y)},L=v=>{var y=Sa(),d=r(y,!0);t(y),M(l=>o(d,l),[()=>g()("agent.exceededChars",{values:{count:n(ee)*-1}})]),s(v,y)};O(E,v=>{n(ee)>=0?v(q):v(L,!1)})}var X=i(E,2);X.__click=[Ra,e,H];var N=r(X);se(N,"icon","mdi:send");var C=i(N);t(X),t(A);var S=i(A,2),J=r(S);t(S),M((v,y,d,l)=>{We(de,`--value:${v??""};`),Ae(de,"aria-label",y),o(me,d),o(C,` ${l??""}`),Ge(J,n(B))},[()=>Math.floor((e.remain?e.remain%6e4:0)/1e3),()=>Math.floor((e.remain?e.remain%6e4:0)/1e3).toString(),()=>Math.floor((e.remain?e.remain%6e4:0)/1e3),()=>g()("agent.send")]),s(b,k)};O(ie,b=>{var k;(k=n(ne))!=null&&k.display.largeScale?b(ce):b(K,!1)})}t(oe),s(a,oe),Ve(),D()}yt(["click","keydown"]);var Na=_('<pre class="bg-primary text-primary-content text-3xl font-bold text-center my-2"> </pre>'),Ca=_('<pre class="text-md text-pretty break-all my-2"> </pre>'),La=_('<div class="bg-info text-success-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Ma=_('<div class="bg-error text-error-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Fa=_('<div class="bg-error text-error-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Ha=_('<div class="bg-success text-info-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Pa=_('<h2 class="text-2xl font-bold text-center my-2">霊能結果</h2> <!>',1),Ka=_('<div class="bg-error text-error-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Va=_('<div class="bg-success text-info-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Ga=_('<h2 class="text-2xl font-bold text-center my-2">占い結果</h2> <!>',1),Ua=_('<div class="grow overflow-y-auto pr-4"><pre class="text-3xl font-bold text-center"> </pre> <pre class="text-3xl font-bold text-center"> </pre> <pre class="text-3xl text-center my-2"> </pre> <!> <!> <!> <!> <!></div>'),qa=_('<pre class="text-lg text-center"> </pre>'),Wa=_('<h2 class="text-lg font-bold text-center">プロフィール</h2> <pre class="text-md text-pretty break-all"> </pre>',1),Za=_('<div class="bg-info text-info-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),ja=_('<div class="bg-error text-error-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Ja=_('<div class="bg-error text-error-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Ba=_('<div class="bg-success text-info-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Ya=_('<h2 class="text-lg font-bold pt-2">霊能結果</h2> <!>',1),za=_('<div class="bg-error text-error-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Qa=_('<div class="bg-success text-info-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Xa=_('<h2 class="text-lg font-bold pt-2">占い結果</h2> <!>',1),$a=_('<h2 class="text-xl font-bold pb-2">エージェント</h2> <div class="grow overflow-y-auto pr-4"><div class="flex justify-around"><div><h2 class="text-lg font-bold text-center">名前</h2> <pre class="text-lg text-center"> </pre></div> <div><h2 class="text-lg font-bold text-center">役職</h2> <pre class="text-lg text-center"> </pre></div> <div><h2 class="text-lg font-bold text-center">日数</h2> <pre class="text-lg text-center"> </pre></div> <div><h2 class="text-lg font-bold text-center">リクエスト</h2> <!></div></div> <!> <h2 class="text-lg font-bold pt-2">ステータス</h2> <!> <!> <!></div>',1),er=_('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><!></div></div>');function tr(a,e){Ke(e,!0);const[f,D]=je(),g=()=>Je(Ye,"$_",f);let H=re(void 0);Be(()=>{const w=Se.subscribe(c=>{Z(H,c,!0)});Ue(w)});var ee=er(),ne=r(ee),ae=r(ne);{var B=w=>{var c=Ua(),x=r(c),P=r(x,!0);t(x);var W=i(x,2),oe=r(W,!0);t(W);var ie=i(W,2),ce=r(ie,!0);t(ie);var K=i(ie,2);{var b=Y=>{var Q=Na(),te=r(Q,!0);t(Q),M(()=>o(te,He[e.request])),s(Y,Q)};O(K,Y=>{e.request&&Y(b)})}var k=i(K,2);{var A=Y=>{var Q=Ca(),te=r(Q,!0);t(Q),M(()=>o(te,e.profile)),s(Y,Q)};O(k,Y=>{e.profile&&Y(A)})}var F=i(k,2);be(F,17,()=>Object.entries(e.info.status_map??{}),he,(Y,Q)=>{let te=()=>n(Q)[0],le=()=>n(Q)[1];var ue=Ie(),p=j(ue);{var h=E=>{var q=La(),L=r(q),X=r(L,!0);t(L);var N=i(L,2),C=r(N,!0);t(N);var S=i(N,2),J=r(S,!0);t(S),t(q),M((v,y)=>{o(X,te()),o(C,v),o(J,y)},[()=>(e.info.role_map??{})[te()]?g()(`game.role.${(e.info.role_map??{})[te()]}`):"",()=>g()(`game.status.${le()}`)]),s(E,q)},T=E=>{var q=Ma(),L=r(q),X=r(L,!0);t(L);var N=i(L,2),C=r(N,!0);t(N);var S=i(N,2),J=r(S);t(S),t(q),M((v,y,d)=>{o(X,te()),o(C,v),o(J,`${y??""}${d??""}`)},[()=>(e.info.role_map??{})[te()]?g()(`game.role.${(e.info.role_map??{})[te()]}`):"",()=>g()(`game.status.${le()}`),()=>e.executedAgents.includes(te())?" (追放)":e.attackedAgents.includes(te())?" (襲撃)":""]),s(E,q)};O(p,E=>{le()===Fe.ALIVE?E(h):E(T,!1)})}s(Y,ue)});var R=i(F,2);{var ve=Y=>{var Q=Pa(),te=i(j(Q),2);be(te,17,()=>e.mediumResults,he,(le,ue)=>{let p=()=>n(ue).day,h=()=>n(ue).target,T=()=>n(ue).result;var E=Ie(),q=j(E);{var L=N=>{var C=Fa(),S=r(C),J=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var d=i(v,2),l=r(d,!0);t(d),t(C),M(u=>{o(J,h()),o(y,`(${p()??""}日目)`),o(l,u)},[()=>g()(`game.species.${T()}`)]),s(N,C)},X=N=>{var C=Ha(),S=r(C),J=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var d=i(v,2),l=r(d,!0);t(d),t(C),M(u=>{o(J,h()),o(y,`(${p()??""}日目)`),o(l,u)},[()=>g()(`game.species.${T()}`)]),s(N,C)};O(q,N=>{T()!==Ze.HUMAN?N(L):N(X,!1)})}s(le,E)}),s(Y,Q)};O(R,Y=>{e.mediumResults.length>0&&Y(ve)})}var de=i(R,2);{var me=Y=>{var Q=Ga(),te=i(j(Q),2);be(te,17,()=>e.divineResults,he,(le,ue)=>{let p=()=>n(ue).day,h=()=>n(ue).target,T=()=>n(ue).result;var E=Ie(),q=j(E);{var L=N=>{var C=Ka(),S=r(C),J=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var d=i(v,2),l=r(d,!0);t(d),t(C),M(u=>{o(J,h()),o(y,`(${p()??""}日目)`),o(l,u)},[()=>g()(`game.species.${T()}`)]),s(N,C)},X=N=>{var C=Va(),S=r(C),J=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var d=i(v,2),l=r(d,!0);t(d),t(C),M(u=>{o(J,h()),o(y,`(${p()??""}日目)`),o(l,u)},[()=>g()(`game.species.${T()}`)]),s(N,C)};O(q,N=>{T()!==Ze.HUMAN?N(L):N(X,!1)})}s(le,E)}),s(Y,Q)};O(de,Y=>{e.divineResults.length>0&&Y(me)})}t(c),M(Y=>{o(P,e.agent?e.agent:"ゲーム外"),o(oe,Y),o(ce,e.info?e.info.day+"日目":"ゲーム外")},[()=>e.role?g()(`game.role.${e.role}`):"ゲーム外"]),s(w,c)},z=w=>{var c=$a(),x=i(j(c),2),P=r(x),W=r(P),oe=i(r(W),2),ie=r(oe,!0);t(oe),t(W);var ce=i(W,2),K=i(r(ce),2),b=r(K,!0);t(K),t(ce);var k=i(ce,2),A=i(r(k),2),F=r(A,!0);t(A),t(k);var R=i(k,2),ve=i(r(R),2);{var de=h=>{var T=qa(),E=r(T,!0);t(T),M(()=>o(E,He[e.request])),s(h,T)};O(ve,h=>{e.request&&h(de)})}t(R),t(P);var me=i(P,2);{var Y=h=>{var T=Wa(),E=i(j(T),2),q=r(E,!0);t(E),M(()=>o(q,e.profile)),s(h,T)};O(me,h=>{e.profile&&h(Y)})}var Q=i(me,4);be(Q,17,()=>Object.entries(e.info.status_map??{}),he,(h,T)=>{let E=()=>n(T)[0],q=()=>n(T)[1];var L=Ie(),X=j(L);{var N=S=>{var J=Za(),v=r(J),y=r(v,!0);t(v);var d=i(v,2),l=r(d,!0);t(d);var u=i(d,2),I=r(u,!0);t(u),t(J),M((m,V)=>{o(y,E()),o(l,m),o(I,V)},[()=>(e.info.role_map??{})[E()]?g()(`game.role.${(e.info.role_map??{})[E()]}`):"",()=>g()(`game.status.${q()}`)]),s(S,J)},C=S=>{var J=ja(),v=r(J),y=r(v,!0);t(v);var d=i(v,2),l=r(d,!0);t(d);var u=i(d,2),I=r(u);t(u),t(J),M((m,V,G)=>{o(y,E()),o(l,m),o(I,`${V??""}${G??""}`)},[()=>(e.info.role_map??{})[E()]?g()(`game.role.${(e.info.role_map??{})[E()]}`):"",()=>g()(`game.status.${q()}`),()=>e.executedAgents.includes(E())?" (追放)":e.attackedAgents.includes(E())?" (襲撃)":""]),s(S,J)};O(X,S=>{q()===Fe.ALIVE?S(N):S(C,!1)})}s(h,L)});var te=i(Q,2);{var le=h=>{var T=Ya(),E=i(j(T),2);be(E,17,()=>e.mediumResults,he,(q,L)=>{let X=()=>n(L).day,N=()=>n(L).target,C=()=>n(L).result;var S=Ie(),J=j(S);{var v=d=>{var l=Ja(),u=r(l),I=r(u,!0);t(u);var m=i(u,2),V=r(m);t(m);var G=i(m,2),U=r(G,!0);t(G),t(l),M($=>{o(I,N()),o(V,`(${X()??""}日目)`),o(U,$)},[()=>g()(`game.species.${C()}`)]),s(d,l)},y=d=>{var l=Ba(),u=r(l),I=r(u,!0);t(u);var m=i(u,2),V=r(m);t(m);var G=i(m,2),U=r(G,!0);t(G),t(l),M($=>{o(I,N()),o(V,`(${X()??""}日目)`),o(U,$)},[()=>g()(`game.species.${C()}`)]),s(d,l)};O(J,d=>{C()!==Ze.HUMAN?d(v):d(y,!1)})}s(q,S)}),s(h,T)};O(te,h=>{e.mediumResults.length>0&&h(le)})}var ue=i(te,2);{var p=h=>{var T=Xa(),E=i(j(T),2);be(E,17,()=>e.divineResults,he,(q,L)=>{let X=()=>n(L).day,N=()=>n(L).target,C=()=>n(L).result;var S=Ie(),J=j(S);{var v=d=>{var l=za(),u=r(l),I=r(u,!0);t(u);var m=i(u,2),V=r(m);t(m);var G=i(m,2),U=r(G,!0);t(G),t(l),M($=>{o(I,N()),o(V,`(${X()??""}日目)`),o(U,$)},[()=>g()(`game.species.${C()}`)]),s(d,l)},y=d=>{var l=Qa(),u=r(l),I=r(u,!0);t(u);var m=i(u,2),V=r(m);t(m);var G=i(m,2),U=r(G,!0);t(G),t(l),M($=>{o(I,N()),o(V,`(${X()??""}日目)`),o(U,$)},[()=>g()(`game.species.${C()}`)]),s(d,l)};O(J,d=>{C()!==Ze.HUMAN?d(v):d(y,!1)})}s(q,S)}),s(h,T)};O(ue,h=>{e.divineResults.length>0&&h(p)})}t(x),M(h=>{o(ie,e.agent?e.agent:"ゲーム外"),o(b,h),o(F,e.info?e.info.day+"日目":"ゲーム外")},[()=>e.role?g()(`game.role.${e.role}`):"ゲーム外"]),s(w,c)};O(ae,w=>{var c;(c=n(H))!=null&&c.display.largeScale?w(B):w(z,!1)})}t(ne),t(ee),s(a,ee),Ve(),D()}function ar(){Pe.connect()}function rr(){Pe.disconnect()}var nr=_('<div class="status status-success animate-ping"></div> <div class="status status-success"></div>',1),ir=_('<div class="status status-warning animate-ping"></div> <div class="status status-warning"></div>',1),lr=_('<div class="status status-error"></div>'),or=(a,e)=>e("connection.url",a.currentTarget.value),sr=(a,e)=>e("connection.token",a.currentTarget.value),vr=(a,e)=>e("team",a.currentTarget.value),cr=(a,e)=>e("display.largeScale",a.currentTarget.checked),ur=_('<div class="navbar bg-base-100 flex justify-start gap-4 overflow-x-auto"><a class="text-3xl font-bold text-nowrap ml-2" href="./"> </a> <div class="ml-auto"><div class="inline-grid *:[grid-area:1/1]"><!></div></div> <label class="input min-w-3xs w-3xs"><iconify-icon></iconify-icon> <input type="text" class="grow"></label> <label class="input min-w-3xs w-3xs"><iconify-icon></iconify-icon> <input type="text" class="grow"> <span class="badge badge-neutral badge-xs"> </span></label> <button class="btn btn-info"> </button> <button class="btn btn-error"> </button> <button class="btn"> </button> <dialog class="modal"><div class="modal-box"><div class="form-control my-2"><h3 class="text-lg font-bold"> </h3> <h4 class="text-base font-bold mt-2"> </h4> <label class="input min-w-3xs w-3xs my-2"><iconify-icon></iconify-icon> <input type="text" class="grow"></label> <h3 class="text-lg font-bold mt-4"> </h3> <h4 class="text-base font-bold mt-2"> </h4> <label class="label cursor-pointer my-2"><span class="label-text"> </span> <input type="checkbox" class="checkbox"></label> <h4 class="text-base font-bold mt-2"> </h4> <div class="my-2"><!></div></div></div> <form method="dialog" class="modal-backdrop"><button> </button></form></dialog> <label class="flex items-center cursor-pointer gap-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div>',2);function _r(a,e){Ke(e,!0);const[f,D]=je(),g=()=>Je(Ye,"$_",f);let H=re(void 0),ee=re(void 0);const ne=Se.subscribe(xe=>{Z(H,xe,!0)}),ae=Pe.subscribe(xe=>{Z(ee,xe.status,!0)});Ue(()=>{ne(),ae()});function B(xe,De){Se.update(Le=>{const Me=xe.split("."),Te=Me.pop();let Re=Le;for(const qe of Me)qe&&(Re=Re[qe]);return Re[Te]=De,{...Le}})}let z;var w=ur(),c=r(w),x=r(c,!0);t(c);var P=i(c,2),W=r(P),oe=r(W);{var ie=xe=>{var De=nr();we(2),s(xe,De)},ce=(xe,De)=>{{var Le=Te=>{var Re=ir();we(2),s(Te,Re)},Me=Te=>{var Re=lr();s(Te,Re)};O(xe,Te=>{n(ee)==="connecting"?Te(Le):Te(Me,!1)},De)}};O(oe,xe=>{n(ee)==="connected"?xe(ie):xe(ce,!1)})}t(W),t(P);var K=i(P,2),b=r(K);Qe(b,1,"h-[1em] opacity-50"),se(b,"inline",!0),se(b,"icon","mdi:link");var k=i(b,2);Oe(k),k.__input=[or,B],t(K);var A=i(K,2),F=r(A);Qe(F,1,"h-[1em] opacity-50"),se(F,"inline",!0),se(F,"icon","mdi:key");var R=i(F,2);Oe(R),R.__input=[sr,B];var ve=i(R,2),de=r(ve,!0);t(ve),t(A);var me=i(A,2);me.__click=[ar];var Y=r(me,!0);t(me);var Q=i(me,2);Q.__click=[rr];var te=r(Q,!0);t(Q);var le=i(Q,2);le.__click=()=>z.showModal();var ue=r(le,!0);t(le);var p=i(le,2),h=r(p),T=r(h),E=r(T),q=r(E,!0);t(E);var L=i(E,2),X=r(L,!0);t(L);var N=i(L,2),C=r(N);Qe(C,1,"h-[1em] opacity-50"),se(C,"inline",!0),se(C,"icon","mdi:rename");var S=i(C,2);Oe(S),S.__input=[vr,B],t(N);var J=i(N,2),v=r(J,!0);t(J);var y=i(J,2),d=r(y,!0);t(y);var l=i(y,2),u=r(l),I=r(u,!0);t(u);var m=i(u,2);Oe(m),m.__change=[cr,B],t(l);var V=i(l,2),G=r(V,!0);t(V);var U=i(V,2),$=r(U);Gt($,{}),t(U),t(T),t(h);var fe=i(h,2),ye=r(fe),ge=r(ye,!0);t(ye),t(fe),t(p),et(p,xe=>z=xe,()=>z);var _e=i(p,2),Ee=r(_e);se(Ee,"inline",!0),se(Ee,"icon","mdi:white-balance-sunny");var wt=i(Ee,2),rt=i(wt,2);se(rt,"inline",!0),se(rt,"icon","mdi:moon-and-stars"),t(_e),t(w),M((xe,De,Le,Me,Te,Re,qe,kt,St,Rt,Et,Ot,Dt,Nt)=>{var nt,it,lt,ot;o(x,xe),Ae(k,"placeholder",De),Ge(k,(nt=n(H))==null?void 0:nt.connection.url),Ae(R,"placeholder",Le),Ge(R,(it=n(H))==null?void 0:it.connection.token),o(de,Me),me.disabled=n(ee)!=="disconnected",o(Y,Te),Q.disabled=n(ee)==="disconnected",o(te,Re),o(ue,qe),o(q,kt),o(X,St),Ge(S,(lt=n(H))==null?void 0:lt.team),o(v,Rt),o(d,Et),o(I,Ot),$e(m,(ot=n(H))==null?void 0:ot.display.largeScale),o(G,Dt),o(ge,Nt)},[()=>g()("appName"),()=>g()("realtime.websocketUrl"),()=>g()("realtime.authKey"),()=>g()("realtime.optional"),()=>g()("realtime.connect"),()=>g()("realtime.disconnect"),()=>g()("realtime.settings"),()=>g()("agent.agentSettings"),()=>g()("agent.teamName"),()=>g()("realtime.displaySettings"),()=>g()("realtime.largeScreen"),()=>g()("realtime.enable"),()=>g()("common.language"),()=>g()("common.close")]),s(a,w),Ve(),D()}yt(["input","click","change"]);var dr=_("<iconify-icon></iconify-icon>",2),fr=_("<iconify-icon></iconify-icon>",2),gr=_('<div class="chat-bubble bg-base-100 text-xl text-pretty break-all"> </div>'),mr=_('<div class="chat-image avatar"><div class="w-20 rounded-full"><img></div></div> <pre class="chat-header text-lg"> </pre> <!> <pre class="chat-footer opacity-50 text-sm"> </pre>',1),xr=_("<iconify-icon></iconify-icon>",2),pr=_("<iconify-icon></iconify-icon>",2),br=_('<div class="chat-bubble bg-base-100 text-pretty break-all"> </div>'),hr=_('<div class="chat-image avatar"><div class="w-10 rounded-full"><img></div></div> <pre class="chat-header"> </pre> <!> <pre class="chat-footer opacity-50"> </pre>',1),yr=_('<div class="chat chat-start"><!></div>');function pt(a,e){Ke(e,!0);let f=re(void 0);Be(()=>{const ne=Se.subscribe(ae=>{Z(f,ae,!0)});Ue(ne)});var D=yr(),g=r(D);{var H=ne=>{var ae=mr(),B=j(ae),z=r(B),w=r(z);t(z),t(B);var c=i(B,2),x=r(c,!0);t(c);var P=i(c,2);{var W=K=>{var b=dr();se(b,"inline",!0),se(b,"icon","mdi:skip-forward"),s(K,b)},oe=(K,b)=>{{var k=F=>{var R=fr();se(R,"inline",!0),se(R,"icon","mdi:arrow-u-down-right-bold"),s(F,R)},A=F=>{var R=gr(),ve=r(R,!0);t(R),M(()=>o(ve,e.talk.text)),s(F,R)};O(K,F=>{e.talk.skip?F(k):F(A,!1)},b)}};O(P,K=>{e.talk.over?K(W):K(oe,!1)})}var ie=i(P,2),ce=r(ie);t(ie),M(()=>{Ae(w,"src",e.isDefaultProfile?`${vt}${tt[e.talk.agent]}`:""),Ae(w,"alt",e.talk.agent),o(x,e.talk.agent),o(ce,`Idx: ${e.talk.idx??""}`)}),s(ne,ae)},ee=ne=>{var ae=hr(),B=j(ae),z=r(B),w=r(z);t(z),t(B);var c=i(B,2),x=r(c,!0);t(c);var P=i(c,2);{var W=K=>{var b=xr();se(b,"inline",!0),se(b,"icon","mdi:skip-forward"),s(K,b)},oe=(K,b)=>{{var k=F=>{var R=pr();se(R,"inline",!0),se(R,"icon","mdi:arrow-u-down-right-bold"),s(F,R)},A=F=>{var R=br(),ve=r(R,!0);t(R),M(()=>o(ve,e.talk.text)),s(F,R)};O(K,F=>{e.talk.skip?F(k):F(A,!1)},b)}};O(P,K=>{e.talk.over?K(W):K(oe,!1)})}var ie=i(P,2),ce=r(ie);t(ie),M(()=>{Ae(w,"src",e.isDefaultProfile?`${vt}${tt[e.talk.agent]}`:""),Ae(w,"alt",e.talk.agent),o(x,e.talk.agent),o(ce,`Idx: ${e.talk.idx??""}`)}),s(ne,ae)};O(g,ne=>{var ae;(ae=n(f))!=null&&ae.display.largeScale?ne(H):ne(ee,!1)})}t(D),s(a,D),Ve()}var Ir=_('<input type="radio" name="talk_days" class="tab text-lg font-bold"> <div class="tab-content my-4"></div>',1),Ar=_('<div class="tabs tabs-border"></div>'),Tr=_('<h2 class="text-3xl font-bold pb-2"> </h2> <div class="grow overflow-y-auto pr-4"><!></div>',1),wr=_('<input type="radio" name="talk_days" class="tab"> <div class="tab-content my-4"></div>',1),kr=_('<div class="tabs tabs-border"></div>'),Sr=_('<h2 class="text-xl font-bold pb-2"> </h2> <div class="grow overflow-y-auto pr-4"><!></div>',1),Rr=_('<div class="flex-[0_0_600px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><!></div></div>');function bt(a,e){Ke(e,!0);let f=re(void 0),D=e.agents.every(B=>Object.keys(tt).includes(B));Be(()=>{const B=Se.subscribe(z=>{Z(f,z,!0)});Ue(B)});var g=Rr(),H=r(g),ee=r(H);{var ne=B=>{var z=Tr(),w=j(z),c=r(w,!0);t(w);var x=i(w,2),P=r(x);{var W=oe=>{var ie=Ar();const ce=ke(()=>[...new Set(e.talks.map(K=>K.day))].sort((K,b)=>b-K));be(ie,21,()=>n(ce),he,(K,b)=>{var k=Ir(),A=j(k);Oe(A);var F=i(A,2);be(F,21,()=>e.talks.filter(R=>R.day===n(b)),he,(R,ve)=>{pt(R,{get talk(){return n(ve)},get agents(){return e.agents},isDefaultProfile:D})}),t(F),M(()=>{$e(A,n(b)===n(ce)[0]),Ae(A,"aria-label",`${n(b)}日目`)}),s(K,k)}),t(ie),s(oe,ie)};O(P,oe=>{e.talks.length>0&&oe(W)})}t(x),M(()=>o(c,e.header)),s(B,z)},ae=B=>{var z=Sr(),w=j(z),c=r(w,!0);t(w);var x=i(w,2),P=r(x);{var W=oe=>{var ie=kr();const ce=ke(()=>[...new Set(e.talks.map(K=>K.day))].sort((K,b)=>b-K));be(ie,21,()=>n(ce),he,(K,b)=>{var k=wr(),A=j(k);Oe(A);var F=i(A,2);be(F,21,()=>e.talks.filter(R=>R.day===n(b)),he,(R,ve)=>{pt(R,{get talk(){return n(ve)},get agents(){return e.agents},isDefaultProfile:D})}),t(F),M(()=>{$e(A,n(b)===n(ce)[0]),Ae(A,"aria-label",`${n(b)}日目`)}),s(K,k)}),t(ie),s(oe,ie)};O(P,oe=>{e.talks.length>0&&oe(W)})}t(x),M(()=>o(c,e.header)),s(B,z)};O(ee,B=>{var z;(z=n(f))!=null&&z.display.largeScale?B(ne):B(ae,!1)})}t(H),t(g),s(a,g),Ve()}var Er=_('<div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"><!> <!> <!></div> <!>',1),Or=_('<div class="flex items-center justify-center h-full"><pre class="base-content text-9xl font-bold opacity-70 select-none"> </pre></div>'),Dr=_('<div role="alert" class="alert m-4"><span class="text-lg font-bold"> </span></div>'),Nr=_('<main class="h-screen flex flex-col bg-base-300"><!> <!></main>');function Yr(a,e){Ke(e,!0);const[f,D]=je(),g=()=>Je(Ye,"$_",f);let H=re(void 0),ee=re(""),ne=re(null),ae=re(Ne([])),B=re(null),z=re(null),w=re(null),c=re(null),x=re(null),P=re(Ne([])),W=re(Ne([])),oe=re(null),ie=re(Ne([])),ce=re(Ne([])),K=re(Ne([])),b=re(Ne([])),k=re(null),A=re(null),F=Se.subscribe(p=>{Z(H,p,!0)}),R=Pe.subscribe(p=>{Z(ee,p.status,!0),p.deadline?(Z(ne,p.deadline.getTime(),!0),de()):(Z(ne,null),Z(k,null),n(A)&&(cancelAnimationFrame(n(A)),Z(A,null))),Z(ae,p.entries,!0),Z(B,p.agent,!0),Z(z,p.role,!0),Z(w,p.profile,!0),Z(c,p.request,!0),Z(x,p.info,!0),Z(P,p.mediumResults,!0),Z(W,p.divineResults,!0),Z(oe,p.setting,!0),Z(ie,p.talkHistory,!0),Z(ce,p.whisperHistory,!0),Z(K,p.executedAgents,!0),Z(b,p.attackedAgents,!0)});function ve(){const p=Kt.url.searchParams,h=p.get("url"),T=p.get("token");h&&(Se.update(E=>({...E,connection:{url:h??"",token:T??""}})),Pe.connect())}function de(){if(n(ne)===null)return;const p=()=>{if(n(ne)===null)return;const h=Date.now(),T=Math.max(0,n(ne)-h);Z(k,T,!0),T>0?Z(A,requestAnimationFrame(p),!0):(Z(k,0),Z(A,null))};n(A)&&cancelAnimationFrame(n(A)),Z(A,requestAnimationFrame(p),!0)}function me(p){Pe.send(p)}{ve();const p=T=>{n(ee)==="connected"&&T.preventDefault()},h=T=>{n(ee)==="connected"&&T.preventDefault()};window.addEventListener("beforeunload",p),window.addEventListener("popstate",h),Ue(()=>{window.removeEventListener("beforeunload",p),window.removeEventListener("popstate",h),n(A)&&cancelAnimationFrame(n(A)),F(),R()})}var Y=Nr();Pt(p=>{Ht.title="aiwolf-nlp-viewer"});var Q=r(Y);_r(Q,{});var te=i(Q,2);{var le=p=>{var h=Er(),T=j(h),E=r(T);tr(E,{get agent(){return n(B)},get role(){return n(z)},get profile(){return n(w)},get request(){return n(c)},get info(){return n(x)},get mediumResults(){return n(P)},get divineResults(){return n(W)},get executedAgents(){return n(K)},get attackedAgents(){return n(b)}});var q=i(E,2);const L=ke(()=>g()("agent.talkHistory")),X=ke(()=>{var v;return Object.keys(((v=n(x))==null?void 0:v.status_map)??{})});bt(q,{get header(){return n(L)},get talks(){return n(ie)},get agents(){return n(X)}});var N=i(q,2);{var C=v=>{const y=ke(()=>g()("agent.whisperHistory")),d=ke(()=>{var l;return Object.keys(((l=n(x))==null?void 0:l.status_map)??{})});bt(v,{get header(){return n(y)},get talks(){return n(ce)},get agents(){return n(d)}})};O(N,v=>{n(z)===Vt.WEREWOLF&&v(C)})}t(T);var S=i(T,2);{var J=v=>{Da(v,{get remain(){return n(k)},get setting(){return n(oe)},get request(){return n(c)},get info(){return n(x)},onSendMessage:me})};O(S,v=>{n(k)!==null&&v(J)})}s(p,h)},ue=(p,h)=>{{var T=q=>{var L=Or(),X=r(L),N=r(X,!0);t(X),t(L),M(C=>o(N,C),[()=>g()("agent.notConnected")]),s(q,L)},E=q=>{var L=Dr(),X=r(L),N=r(X,!0);t(X),t(L),M(C=>o(N,C),[()=>g()("agent.notConnected")]),s(q,L)};O(p,q=>{var L;(L=n(H))!=null&&L.display.largeScale?q(T):q(E,!1)},h)}};O(te,p=>{n(x)!==null?p(le):p(ue,!1)})}t(Y),s(a,Y),Ve(),D()}export{Yr as component};
