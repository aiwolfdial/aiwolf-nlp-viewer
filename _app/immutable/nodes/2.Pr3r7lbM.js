import{p as Z,_ as P,b as Tt}from"../chunks/preload-helper.Cm8Mow3V.js";import{a as d,t as h,c as ht,b as Dt}from"../chunks/disclose-version.BhdA-am7.js";import{i as it}from"../chunks/legacy.DE9w-RQJ.js";import{h as pt,o as Ot,ad as Rt,B as Ut,g as nt,k as c,t as V,l as n,v as s,j as ot,ar as Q,i as xt,m as l,aG as rt,$ as St,w as W,x as _t}from"../chunks/runtime.BdflQa79.js";import{s as q,h as Vt,e as Y}from"../chunks/render.DQoJ6lLy.js";import{i as b}from"../chunks/if.BU7XQiHK.js";import{e as $,i as J,a as S,s as Mt}from"../chunks/attributes.DIUH77Cf.js";import{b as mt}from"../chunks/paths.Bd4Hz9vB.js";function X(r,o){var i=r.__className,t=wt(o);pt&&r.className===t?r.__className=t:(i!==t||pt&&r.className!==t)&&(o==null?r.removeAttribute("class"):r.className=t,r.__className=t)}function wt(r){return r??""}function ut(r,o,i){if(i){if(r.classList.contains(o))return;r.classList.add(o)}else{if(!r.classList.contains(o))return;r.classList.remove(o)}}function Ct(r,o,i){var t=Rt(r,o);t&&t.set&&(r[o]=i,Ot(()=>{r[o]=null}))}function It(r){return function(...o){var i=o[0];return i.preventDefault(),r==null?void 0:r.apply(this,o)}}function Pt(r,o){var u;var i=(u=r.$$events)==null?void 0:u[o.type],t=Ut(i)?i.slice():i==null?[]:[i];for(var x of t)x.call(this,o)}const zt={VILLAGER:"村人",SEER:"占い師",MEDIUM:"霊能者",BODYGUARD:"騎士",WEREWOLF:"人狼",POSSESSED:"狂人"},Nt={ALIVE:"生存",DEAD:"死亡"},Ft={HUMAN:"人間",WEREWOLF:"人狼"},jt={VILLAGER:"村人陣営",WEREWOLF:"人狼陣営"},Wt={kanolab1:"[チーム名]"};var Gt=h("<strong> </strong>");function z(r,o){nt(o,!1);let i=Z(o,"agentIdx",8),t=Z(o,"highlight",8,!1);it();var x=Gt();const u=Q(()=>`${(t()?"agent"+i().padStart(2,"0"):"")??""} svelte-2m8qed`);var v=c(x);V(()=>q(v,`Agent[${i().padStart(2,"0")??""}]`)),n(x),V(()=>X(x,s(u))),d(r,x),ot()}function qt(r,o){nt(o,!1);let i=Z(o,"text",8);function t(v){const k=/Agent\[(\d+)\]/g,T=[];let O=0,R;for(;(R=k.exec(v))!==null;)R.index>O&&T.push({text:v.slice(O,R.index),agentIdx:null,isAgentTag:!1}),T.push({text:R[0],agentIdx:parseInt(R[1]),isAgentTag:!0}),O=k.lastIndex;if(O<v.length){var C=v.slice(O);Object.entries(Wt).forEach(([D,M])=>{C=C.replaceAll(D,M)}),T.push({text:C,agentIdx:null,isAgentTag:!1})}return{parts:T}}it();var x=ht(),u=xt(x);return $(u,1,()=>t(i()).parts,J,(v,k)=>{var T=ht(),O=xt(T);{var R=D=>{var M=Q(()=>{var G;return((G=s(k).agentIdx)==null?void 0:G.toString())??""});z(D,{get agentIdx(){return s(M)},highlight:!0})},C=D=>{var M=Dt();V(()=>q(M,s(k).text)),d(D,M)};b(O,D=>{s(k).isAgentTag?D(R):D(C,!1)})}d(v,T)}),d(r,x),Ct(o,"formatTalkText",t),ot({formatTalkText:t})}var Bt=h("<iconify-icon></iconify-icon>",2),Ht=h("<iconify-icon></iconify-icon>",2),Yt=h("<iconify-icon></iconify-icon>",2),$t=h("<iconify-icon></iconify-icon>",2),Jt=h("<iconify-icon></iconify-icon>",2),Kt=h("<iconify-icon></iconify-icon>",2),Qt=h("<iconify-icon></iconify-icon>",2),Xt=h("<li><!> </li>"),Zt=h('<section class="agent-section"><h3 class="svelte-1cf5h64">エージェント</h3> <ul class="svelte-1cf5h64"></ul></section>'),te=h("<li><!> <!></li>"),ee=h('<section class="talks-section"><h3 class="svelte-1cf5h64">会話</h3> <ul class="talks svelte-1cf5h64"></ul></section>'),ae=h("<li><!> が <!> に投票</li>"),se=h('<section class="votes-section"><h3 class="svelte-1cf5h64">投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),re=h('<section class="execution-section"><h3 class="svelte-1cf5h64">追放</h3> <p><!> を追放</p></section>'),ie=h("<li><!> が <!> に投票</li>"),ne=h('<section class="attack-votes-section"><h3 class="svelte-1cf5h64">襲撃投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),oe=h("<p><!> を襲撃: <strong> </strong></p>"),le=h("<p>襲撃対象なし</p>"),ce=h('<section class="attack-section"><h3 class="svelte-1cf5h64">襲撃</h3> <!></section>'),ve=h('<section class="divine-section"><h3 class="svelte-1cf5h64">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></section>'),_e=h('<section class="result-section"><h3 class="svelte-1cf5h64">結果</h3> <p><strong> </strong> が勝利</p></section>'),de=h('<div class="day-column svelte-1cf5h64"><div class="day-section svelte-1cf5h64"><h2 class="svelte-1cf5h64"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="scrollable-content svelte-1cf5h64"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function ue(r,o){nt(o,!1);let i=Z(o,"dayIdx",8),t=Z(o,"dayStatus",8);it();var x=de(),u=c(x),v=c(u),k=c(v),T=l(k);{var O=e=>{var a=Bt();S(a,"inline",!0),S(a,"icon","mdi:conversation"),d(e,a)};b(T,e=>{t().talks.length>0&&e(O)})}var R=l(T,2);{var C=e=>{var a=Ht();S(a,"inline",!0),S(a,"icon","mdi:vote"),d(e,a)};b(R,e=>{t().votes.length>0&&e(C)})}var D=l(R,2);{var M=e=>{var a=Yt();S(a,"inline",!0),S(a,"icon","mdi:account-remove"),d(e,a)};b(D,e=>{t().execution&&e(M)})}var G=l(D,2);{var lt=e=>{var a=$t();S(a,"inline",!0),S(a,"icon","mdi:vote"),d(e,a)};b(G,e=>{t().attackVotes.length>0&&e(lt)})}var B=l(G,2);{var tt=e=>{var a=Jt();S(a,"inline",!0),S(a,"icon","mdi:sword"),d(e,a)};b(B,e=>{t().attack&&e(tt)})}var et=l(B,2);{var ct=e=>{var a=Kt();S(a,"inline",!0),S(a,"icon","mdi:account-eye"),d(e,a)};b(et,e=>{t().divine&&e(ct)})}var _=l(et,2);{var g=e=>{var a=Qt();S(a,"inline",!0),S(a,"icon","mdi:trophy"),d(e,a)};b(_,e=>{t().result&&e(g)})}n(v);var p=l(v,2),y=c(p);{var w=e=>{var a=Zt(),m=l(c(a),2);$(m,5,()=>Object.entries(t().agents),J,(E,I)=>{let f=()=>s(I)[0],L=()=>s(I)[1];var A=Xt();const j=Q(()=>`${"agent"+f().padStart(2,"0")} svelte-1cf5h64`);var st=c(A);z(st,{get agentIdx(){return f()}});var At=l(st);n(A),V(()=>{X(A,s(j)),ut(A,"over",L().status!=="ALIVE"),q(At,` ${zt[L().role]??"NULL"??""} -
                ${Nt[L().status]??"NULL"??""}`)}),d(E,A)}),n(m),n(a),d(e,a)};b(y,e=>{Object.keys(t().agents).length>0&&e(w)})}var N=l(y,2);{var F=e=>{var a=ee(),m=l(c(a),2);$(m,5,()=>t().talks,J,(E,I)=>{var f=te();const L=Q(()=>`${"talk agent"+s(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=c(f);z(A,{get agentIdx(){return s(I).agentIdx}});var j=l(A,2);qt(j,{get text(){return s(I).text}}),n(f),V(()=>{X(f,s(L)),ut(f,"over",s(I).text==="Over")}),d(E,f)}),n(m),n(a),d(e,a)};b(N,e=>{t().talks.length>0&&e(F)})}var U=l(N,2);{var H=e=>{var a=se(),m=l(c(a),2);$(m,5,()=>t().votes,J,(E,I)=>{var f=ae();const L=Q(()=>`${"agent"+s(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=c(f);z(A,{get agentIdx(){return s(I).agentIdx}});var j=l(A,2);z(j,{get agentIdx(){return s(I).targetIdx},highlight:!0}),rt(),n(f),V(()=>X(f,s(L))),d(E,f)}),n(m),n(a),d(e,a)};b(U,e=>{t().votes.length>0&&e(H)})}var K=l(U,2);{var vt=e=>{var a=re(),m=l(c(a),2),E=c(m);z(E,{get agentIdx(){return t().execution.agentIdx},highlight:!0}),rt(),n(m),n(a),d(e,a)};b(K,e=>{t().execution&&e(vt)})}var at=l(K,2);{var kt=e=>{var a=ne(),m=l(c(a),2);$(m,5,()=>t().attackVotes,J,(E,I)=>{var f=ie();const L=Q(()=>`${"agent"+s(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=c(f);z(A,{get agentIdx(){return s(I).agentIdx}});var j=l(A,2);z(j,{get agentIdx(){return s(I).targetIdx},highlight:!0}),rt(),n(f),V(()=>X(f,s(L))),d(E,f)}),n(m),n(a),d(e,a)};b(at,e=>{t().attackVotes.length>0&&e(kt)})}var gt=l(at,2);{var yt=e=>{var a=ce(),m=l(c(a),2);{var E=f=>{var L=oe(),A=c(L);z(A,{get agentIdx(){return t().attack.targetIdx},highlight:!0});var j=l(A,2),st=c(j,!0);n(j),n(L),V(()=>q(st,t().attack.isSuccessful?"成功":"失敗")),d(f,L)},I=f=>{var L=le();d(f,L)};b(m,f=>{t().attack.targetIdx!=="-1"?f(E):f(I,!1)})}n(a),d(e,a)};b(gt,e=>{t().attack&&e(yt)})}var ft=l(gt,2);{var bt=e=>{var a=ve(),m=l(c(a),2),E=c(m);z(E,{get agentIdx(){return t().divine.agentIdx},highlight:!0});var I=l(E,2);z(I,{get agentIdx(){return t().divine.targetIdx},highlight:!0});var f=l(I,2),L=c(f,!0);n(f),n(m),n(a),V(()=>q(L,Ft[t().divine.result]??"NULL")),d(e,a)};b(ft,e=>{t().divine&&e(bt)})}var Et=l(ft,2);{var Lt=e=>{var a=_e(),m=l(c(a),2),E=c(m),I=c(E,!0);n(E),rt(),n(m),n(a),V(()=>q(I,jt[t().result.winSide])),d(e,a)};b(Et,e=>{t().result&&e(Lt)})}n(p),n(u),n(x),V(()=>q(k,`Day ${i()??""} `)),d(r,x),ot()}function dt(r){const o=r.split(/\r?\n/).filter(t=>t.trim()),i={};return o.forEach(t=>{const[x,u,...v]=t.split(",");i[x]||(i[x]=ge()),fe(i[x],u,v)}),i}function ge(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function fe(r,o,i){const x={status:([u,v,k,T])=>{r.agents[u]={role:v,status:k,name:T}},talk:([u,v,k,T])=>{r.talks.push({talkIdx:u,turnIdx:v,agentIdx:k,text:T})},vote:([u,v])=>{r.votes.push({agentIdx:u,targetIdx:v})},execute:([u,v])=>{r.execution={agentIdx:u,role:v}},divine:([u,v,k])=>{r.divine={agentIdx:u,targetIdx:v,result:k}},attackVote:([u,v])=>{r.attackVotes.push({agentIdx:u,targetIdx:v})},attack:([u,v])=>{r.attack={targetIdx:u,isSuccessful:v==="true"}},result:([u,v,k])=>{r.result={villagers:u,werewolves:v,winSide:k}}}[o];x&&x(i)}var he=h('<link rel="stylesheet">'),pe=h("<option> </option>"),xe=h('<div class="tab-wrapper svelte-1vycxas"><button class="tab-button svelte-1vycxas"> </button> <button class="close-button svelte-1vycxas" aria-label="Close tab">✕</button></div>'),me=h('<div class="log-container svelte-1vycxas"><div class="tabs-container svelte-1vycxas"><div class="tabs svelte-1vycxas"></div></div> <div class="days-container svelte-1vycxas"></div></div>'),Ie=h('<main class="svelte-1vycxas"><div class="input-controls svelte-1vycxas"><div class="select-container svelte-1vycxas"><select class="svelte-1vycxas"><option>サンプルログを選択</option><!></select></div> <div tabindex="0" class="file-input-container svelte-1vycxas" role="button"><div class="file-input-label svelte-1vycxas">ファイルを選択もしくはドラッグアンドドロップしてください</div></div> <input id="fileInput" type="file" accept=".log" multiple hidden></div> <style></style> <!></main>');function Oe(r,o){nt(o,!1);let i=_t([]),t=_t(0);function x(_){const g=_.target;Array.from(g.files||[]).forEach(y=>{const w=new FileReader;w.onload=N=>{var U;const F=((U=N.target)==null?void 0:U.result)??"";W(i,[...s(i),{name:y.name,data:dt(F)}]),W(t,s(i).length-1)},w.readAsText(y)}),g&&(g.value="")}function u(_){var p;Array.from(((p=_.dataTransfer)==null?void 0:p.files)||[]).forEach(y=>{const w=new FileReader;w.onload=N=>{var U;const F=((U=N.target)==null?void 0:U.result)??"";W(i,[...s(i),{name:y.name,data:dt(F)}]),W(t,s(i).length-1)},w.readAsText(y)})}function v(_){W(i,s(i).filter((g,p)=>p!==_)),s(t)>=s(i).length&&W(t,s(i).length-1)}const k=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>P(()=>import("../chunks/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>P(()=>import("../chunks/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>P(()=>import("../chunks/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>P(()=>import("../chunks/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>P(()=>import("../chunks/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>P(()=>import("../chunks/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>P(()=>import("../chunks/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>P(()=>import("../chunks/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>P(()=>import("../chunks/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>P(()=>import("../chunks/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.oHz1b7i6.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>P(()=>import("../chunks/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.K60EV997.js"),[],import.meta.url)})).map(([_,g])=>({name:_.split("/").pop()||"",path:`${mt}${_.replace("/static","")}`}));async function T(_,g){try{const y=await(await fetch(_)).text();W(i,[...s(i),{name:g,data:dt(y)}]),W(t,s(i).length-1)}catch(p){console.error("Error loading asset log:",p)}}let O=_t(null);it();var R=Ie();Vt(_=>{var g=he();St.title="aiwolf-nlp-viewer",Mt(g,"href",`${mt??""}/global.css`),d(_,g)});var C=c(R),D=c(C),M=c(D),G=c(M);G.value=((G.__value="")==null,"");var lt=l(G);$(lt,1,()=>k,J,(_,g)=>{var p=pe(),y={},w=c(p,!0);n(p),V(()=>{y!==(y=s(g).path)&&(p.value=(p.__value=s(g).path)==null?"":s(g).path),q(w,s(g).name)}),d(_,p)}),n(M),n(D);var B=l(D,2),tt=l(B,2);Tt(tt,_=>W(O,_),()=>s(O)),n(C);var et=l(C,4);{var ct=_=>{var g=me(),p=c(g),y=c(p);$(y,5,()=>s(i),J,(N,F,U)=>{var H=xe(),K=c(H),vt=c(K,!0);n(K);var at=l(K,2);n(H),V(()=>{ut(H,"active",s(t)===U),q(vt,s(F).name)}),Y("click",K,()=>W(t,U)),Y("click",at,()=>v(U)),d(N,H)}),n(y),n(p);var w=l(p,2);$(w,5,()=>Object.entries(s(i)[s(t)].data),J,(N,F)=>{let U=()=>s(F)[0],H=()=>s(F)[1];ue(N,{get dayIdx(){return U()},get dayStatus(){return H()}})}),n(w),n(g),d(_,g)};b(et,_=>{s(i).length>0&&_(ct)})}n(R),Y("change",M,_=>{const g=_.currentTarget.value;if(g){const p=k.find(y=>y.path===g);p&&T(p.path,p.name),_.currentTarget.value=""}}),Y("dragover",B,It(function(_){Pt.call(this,o,_)})),Y("drop",B,It(u)),Y("click",B,()=>{var _;return(_=s(O))==null?void 0:_.click()}),Y("keydown",B,_=>{var g;_.key==="Enter"&&((g=s(O))==null||g.click())}),Y("change",tt,x),d(r,R),ot()}export{Oe as component};
