import{t as v,a as c,c as da,d as Ia}from"../chunks/mIMC2spK.js";import{p as aa,c as l,r as n,t as R,a as ta,f as la,l as x,aK as pa,s as r,aL as ia,ak as ga,aI as Aa,ai as Y,$ as Ta}from"../chunks/CzSJPQjd.js";import{s as F,d as fa}from"../chunks/DuMCJiwN.js";import{i as w}from"../chunks/BbBOvd3h.js";import{e as z,i as H}from"../chunks/_gRLrEI3.js";import{h as Ea}from"../chunks/vngoCuur.js";import{s as E}from"../chunks/C-pHt_F9.js";import{s as _a}from"../chunks/C4VwiCoO.js";import{I as Da,R as wa,S as Sa,a as Oa,T as Pa}from"../chunks/Dz1Iufi4.js";/* empty css                */import{s as Z}from"../chunks/CxxO55Dj.js";import{p as J}from"../chunks/BfILAozT.js";import{_ as b}from"../chunks/C1FmrZbK.js";import{b as Va}from"../chunks/Bl84_gJB.js";function sa(p){const s=p.split(/\r?\n/).filter(a=>a.trim()),f={};return s.forEach(a=>{const[d,o,...u]=a.split(",");f[d]||(f[d]=Ra()),Ga(f[d],o,u)}),f}function Ra(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function Ga(p,s,f){const d={status:([o,u,m,I,h])=>{p.agents[o]={role:u,status:m,originalName:I,gameName:h||Da(o)}},talk:([o,u,m,I])=>{p.talks.push({talkIdx:o,turnIdx:u,agentIdx:m,text:I})},vote:([o,u])=>{p.votes.push({agentIdx:o,targetIdx:u})},execute:([o,u])=>{p.execution={agentIdx:o,role:u}},divine:([o,u,m])=>{p.divine={agentIdx:o,targetIdx:u,result:m}},attackVote:([o,u])=>{p.attackVotes.push({agentIdx:o,targetIdx:u})},attack:([o,u])=>{p.attack={targetIdx:o,isSuccessful:u==="true"}},result:([o,u,m])=>{p.result={villagers:o,werewolves:u,winSide:m}}}[s];d&&d(f)}function $(p){let s=0;for(let o=0;o<p.length;o++)s=p.charCodeAt(o)+((s<<5)-s);const f=Math.abs(s)%360,a=85+s%10,d=60+s%10;return`hsla(${f}, ${a}%, ${d}%, 0.7)`}var Na=v("<strong> </strong>");function B(p,s){aa(s,!0);let f=J(s,"highlight",3,!1),a=J(s,"text",3,""),d=J(s,"key",3,void 0);var o=Na(),u=l(o,!0);n(o),R(m=>{Z(o,m),F(u,a())},[()=>f()?`background: linear-gradient(transparent 60%, ${$(d()??a())} 60%)`:""]),c(p,o),ta()}function Ba(p,s){aa(s,!0);let f=J(s,"text",3,""),a=J(s,"names",19,()=>[]);function d(m){const I=[];let h=0;for(;h<m.length;){let O=!1,D=m.length,P="",g="";for(const i of a()){const L=m.indexOf("@"+i,h);L!==-1&&L<D&&(D=L,P="@"+i,g=i,O=!0);const k=m.indexOf(">>"+i,h);k!==-1&&k<D&&(D=k,P=">>"+i,g=i,O=!0);const T=m.indexOf(i,h);T!==-1&&T<D&&(T===0||m[T-1]!=="@"&&m[T-1]!==">")&&(D=T,P=i,g=i,O=!0)}if(O)D>h&&I.push({text:m.slice(h,D),key:void 0,tag:!1}),I.push({text:P,key:g,tag:!0}),h=D+P.length;else{I.push({text:m.slice(h),key:void 0,tag:!1});break}}return{parts:I}}var o=da(),u=la(o);z(u,17,()=>d(f()).parts,H,(m,I)=>{var h=da(),O=la(h);{var D=g=>{const i=pa(()=>x(I).text??"");B(g,{get text(){return x(i)},get key(){return x(I).key},highlight:!0})},P=g=>{var i=Ia();R(()=>F(i,x(I).text)),c(g,i)};w(O,g=>{x(I).tag?g(D):g(P,!1)})}c(m,h)}),c(p,o),ta()}var ja=v("<iconify-icon></iconify-icon>",2),Ma=v("<iconify-icon></iconify-icon>",2),Fa=v("<iconify-icon></iconify-icon>",2),Ka=v("<iconify-icon></iconify-icon>",2),qa=v("<iconify-icon></iconify-icon>",2),za=v("<iconify-icon></iconify-icon>",2),Ha=v("<iconify-icon></iconify-icon>",2),Ja=v("<li><!> </li>"),Qa=v('<div><h3 class="text-lg font-bold my-2">エージェント</h3> <ul></ul></div>'),Ua=v("<li><!> <!></li>"),Wa=v('<div><h3 class="text-lg font-bold my-2">会話</h3> <ul></ul></div>'),Xa=v('<li class="p-2 my-2 border-4 rounded-md"><!> が <!> に投票</li>'),Ya=v('<div><h3 class="text-lg font-bold my-2">投票</h3> <ul></ul></div>'),Za=v('<div><h3 class="text-lg font-bold my-2">追放</h3> <p><!> を追放</p></div>'),$a=v('<li class="p-2 my-2 border-4 rounded-md"><!> が <!> に投票</li>'),at=v('<div><h3 class="text-lg font-bold my-2">襲撃投票</h3> <ul></ul></div>'),tt=v("<p><!> を襲撃: <strong> </strong></p>"),et=v("<p>襲撃対象なし</p>"),it=v('<div><h3 class="text-lg font-bold my-2">襲撃</h3> <!></div>'),ot=v('<div><h3 class="text-lg font-bold my-2">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></div>'),rt=v('<div><h3 class="text-lg font-bold my-2">結果</h3> <p><strong> </strong> が勝利</p></div>'),nt=v('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><h2 class="text-xl font-bold pb-2"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="grow overflow-y-auto pr-4"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function st(p,s){aa(s,!0);let f=J(s,"dayIdx",3,""),a=J(s,"dayStatus",19,()=>({}));var d=nt(),o=l(d),u=l(o),m=l(u),I=r(m);{var h=t=>{var e=ja();E(e,"inline",!0),E(e,"icon","mdi:conversation"),c(t,e)};w(I,t=>{a().talks.length>0&&t(h)})}var O=r(I,2);{var D=t=>{var e=Ma();E(e,"inline",!0),E(e,"icon","mdi:vote"),c(t,e)};w(O,t=>{a().votes.length>0&&t(D)})}var P=r(O,2);{var g=t=>{var e=Fa();E(e,"inline",!0),E(e,"icon","mdi:account-remove"),c(t,e)};w(P,t=>{a().execution&&t(g)})}var i=r(P,2);{var L=t=>{var e=Ka();E(e,"inline",!0),E(e,"icon","mdi:vote"),c(t,e)};w(i,t=>{a().attackVotes.length>0&&t(L)})}var k=r(i,2);{var T=t=>{var e=qa();E(e,"inline",!0),E(e,"icon","mdi:sword"),c(t,e)};w(k,t=>{a().attack&&t(T)})}var G=r(k,2);{var K=t=>{var e=za();E(e,"inline",!0),E(e,"icon","mdi:account-eye"),c(t,e)};w(G,t=>{a().divine&&t(K)})}var j=r(G,2);{var M=t=>{var e=Ha();E(e,"inline",!0),E(e,"icon","mdi:trophy"),c(t,e)};w(j,t=>{a().result&&t(M)})}n(u);var q=r(u,2),U=l(q);{var oa=t=>{var e=Qa(),y=r(l(e),2);z(y,21,()=>Object.entries(a().agents),H,(S,A)=>{let _=()=>x(A)[1];var C=Ja();let V;var N=l(C);B(N,{get text(){return _().gameName},get key(){return _().gameName}});var W=r(N);n(C),R((X,na)=>{V=_a(C,1,"p-2 my-2 border-4 rounded-md",null,V,X),Z(C,na),F(W,` ${wa[_().role]??""??""} -
                ${Sa[_().status]??""??""}`)},[()=>({"opacity-25":_().status!=="ALIVE"}),()=>`border-color: ${$(_().gameName)}`]),c(S,C)}),n(y),n(e),c(t,e)};w(U,t=>{Object.keys(a().agents).length>0&&t(oa)})}var Q=r(U,2);{var ra=t=>{var e=Wa(),y=r(l(e),2);z(y,21,()=>a().talks,H,(S,A)=>{var _=Ua();let C;var V=l(_);B(V,{get text(){return a().agents[x(A).agentIdx].gameName}});var N=r(V,2);const W=pa(()=>Object.values(a().agents).map(X=>X.gameName));Ba(N,{get text(){return x(A).text},get names(){return x(W)}}),n(_),R((X,na)=>{Z(_,X),C=_a(_,1,"p-2 my-2 border-4 rounded-md",null,C,na)},[()=>`border-color: ${$(a().agents[x(A).agentIdx].gameName)}`,()=>({"opacity-25":x(A).text==="Over"})]),c(S,_)}),n(y),n(e),c(t,e)};w(Q,t=>{a().talks.length>0&&t(ra)})}var ea=r(Q,2);{var ba=t=>{var e=Ya(),y=r(l(e),2);z(y,21,()=>a().votes,H,(S,A)=>{var _=Xa(),C=l(_);B(C,{get text(){return a().agents[x(A).agentIdx].gameName}});var V=r(C,2);B(V,{get text(){return a().agents[x(A).targetIdx].gameName},highlight:!0}),ia(),n(_),R(N=>Z(_,N),[()=>`border-color: ${$(a().agents[x(A).agentIdx].gameName)}`]),c(S,_)}),n(y),n(e),c(t,e)};w(ea,t=>{a().votes.length>0&&t(ba)})}var ua=r(ea,2);{var La=t=>{var e=Za(),y=r(l(e),2),S=l(y);B(S,{get text(){return a().agents[a().execution.agentIdx].gameName},highlight:!0}),ia(),n(y),n(e),c(t,e)};w(ua,t=>{a().execution&&t(La)})}var ca=r(ua,2);{var xa=t=>{var e=at(),y=r(l(e),2);z(y,21,()=>a().attackVotes,H,(S,A)=>{var _=$a(),C=l(_);B(C,{get text(){return a().agents[x(A).agentIdx].gameName}});var V=r(C,2);B(V,{get text(){return a().agents[x(A).targetIdx].gameName},highlight:!0}),ia(),n(_),R(N=>Z(_,N),[()=>`border-color: ${$(a().agents[x(A).agentIdx].gameName)}`]),c(S,_)}),n(y),n(e),c(t,e)};w(ca,t=>{a().attackVotes.length>0&&t(xa)})}var ma=r(ca,2);{var ha=t=>{var e=it(),y=r(l(e),2);{var S=_=>{var C=tt(),V=l(C);B(V,{get text(){return a().agents[a().attack.targetIdx].gameName},highlight:!0});var N=r(V,2),W=l(N,!0);n(N),n(C),R(()=>F(W,a().attack.isSuccessful?"成功":"失敗")),c(_,C)},A=_=>{var C=et();c(_,C)};w(y,_=>{a().attack.targetIdx!=="-1"?_(S):_(A,!1)})}n(e),c(t,e)};w(ma,t=>{a().attack&&t(ha)})}var va=r(ma,2);{var ka=t=>{var e=ot(),y=r(l(e),2),S=l(y);B(S,{get text(){return a().agents[a().divine.agentIdx].gameName}});var A=r(S,2);B(A,{get text(){return a().agents[a().divine.targetIdx].gameName},highlight:!0});var _=r(A,2),C=l(_,!0);n(_),n(y),n(e),R(()=>F(C,Oa[a().divine.result]??"")),c(t,e)};w(va,t=>{a().divine&&t(ka)})}var ya=r(va,2);{var Ca=t=>{var e=rt(),y=r(l(e),2),S=l(y),A=l(S,!0);n(S),ia(),n(y),n(e),R(()=>F(A,Pa[a().result.winSide])),c(t,e)};w(ya,t=>{a().result&&t(Ca)})}n(q),n(o),n(d),R(()=>F(m,`Day ${f()??""} `)),c(p,d),ta()}var lt=v("<option> </option>"),_t=v('<div class="navbar bg-base-100 flex justify-start gap-4 overflow-x-auto"><a class="text-3xl font-bold text-nowrap ml-2" href="./">aiwolf-nlp-viewer</a> <button class="btn ml-auto">クリップボードから貼り付け</button> <select class="select min-w-3xs w-3xs"><option>サンプルログを選択</option><!></select> <input class="file-input min-w-3xs w-3xs" type="file" accept=".log" multiple> <label class="flex items-center cursor-pointer gap-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div>',2);function ut(p,s){aa(s,!0);const f=Object.entries(Object.assign({"/static/assets/1746429865_osawalab_ai168wolf_CamelliaDragons_kanolab_sunamelli.log":()=>b(()=>import("../chunks/N6UTbxh_.js"),[],import.meta.url),"/static/assets/1746438728_CanisLupus_kanolab_sunamelli_osawalab_ai168wolf.log":()=>b(()=>import("../chunks/Cfcm7mZx.js"),[],import.meta.url),"/static/assets/1746440342_GAIT_sunamelli_osawalab_ai168wolf_CamelliaDragons.log":()=>b(()=>import("../chunks/M07UJl7I.js"),[],import.meta.url),"/static/assets/1746440914_CamelliaDragons_kanolab_mille_sunamelli_CanisLupus.log":()=>b(()=>import("../chunks/KphTbOTH.js"),[],import.meta.url),"/static/assets/1746442087_CanisLupus_ai168wolf_kanolab_sunamelli_CamelliaDragons.log":()=>b(()=>import("../chunks/Dgh0ilJz.js"),[],import.meta.url),"/static/assets/1746460655_ai168wolf_GAIT_CamelliaDragons_kanolab_CanisLupus.log":()=>b(()=>import("../chunks/D2i00i0t.js"),[],import.meta.url),"/static/assets/1746461224_mille_kanolab_osawalab_CamelliaDragons_CanisLupus.log":()=>b(()=>import("../chunks/lCbcujLN.js"),[],import.meta.url),"/static/assets/1746470482_osawalab_kanolab_mille_GAIT_CamelliaDragons.log":()=>b(()=>import("../chunks/CjmIgYUX.js"),[],import.meta.url),"/static/assets/1746527448_GPTaku_sunamelli_ai168wolf_osawalab_kanolab.log":()=>b(()=>import("../chunks/BlKm883H.js"),[],import.meta.url),"/static/assets/1746528097_CamelliaDragons_kanolab_GPTaku_osawalab_mille.log":()=>b(()=>import("../chunks/BdZtLsuJ.js"),[],import.meta.url),"/static/assets/1746530082_GPTaku_CanisLupus_ai168wolf_mille_sunamelli.log":()=>b(()=>import("../chunks/BgiUjGpF.js"),[],import.meta.url),"/static/assets/1746638559_CanisLupus_GPTaku_sunamelli_CamelliaDragons_GAIT.log":()=>b(()=>import("../chunks/CJzO-l2B.js"),[],import.meta.url),"/static/assets/1746640559_mille_kanolab_GPTaku_sunamelli_GAIT.log":()=>b(()=>import("../chunks/DezKpScU.js"),[],import.meta.url),"/static/assets/1746673847_ai168wolf_GPTaku_GAIT_osawalab_sunamelli.log":()=>b(()=>import("../chunks/Biivd54e.js"),[],import.meta.url),"/static/assets/1746933286_CanisLupus-B_GAIT_kanolab-a_SunameLLi-B_CamelliaDragons_kanolab-c_CanisLupus-A_CanisLupus-C_kanolab-b_SunameLLi-A_mille_SunameLLi-C_kanolab.log":()=>b(()=>import("../chunks/Cmfy11JA.js"),[],import.meta.url),"/static/assets/1746936660_SunameLLi-A_kanolab-b_SunameLLi-C_CamelliaDragons_mille_kanolab-c_kanolab-a_kanolab_CanisLupus-C_GAIT_SunameLLi-B_CanisLupus-B_CanisLupus-A.log":()=>b(()=>import("../chunks/CAc4WZh7.js"),[],import.meta.url),"/static/assets/1746939921_mille_kanolab_CanisLupus-C_SunameLLi-A_GAIT_CamelliaDragons_kanolab-c_kanolab-b_SunameLLi-B_kanolab-a_SunameLLi-C_CanisLupus-A_CanisLupus-B.log":()=>b(()=>import("../chunks/fDTMe-jd.js"),[],import.meta.url),"/static/assets/1746942671_kanolab-b_CanisLupus-A_CanisLupus-C_GAIT_mille_CamelliaDragons_kanolab-a_kanolab_SunameLLi-B_SunameLLi-A_SunameLLi-C_kanolab-c_CanisLupus-B.log":()=>b(()=>import("../chunks/ChSdUglp.js"),[],import.meta.url),"/static/assets/1746945617_SunameLLi-A_CanisLupus-C_SunameLLi-C_SunameLLi-B_CamelliaDragons_kanolab_GAIT_mille_CanisLupus-B_kanolab-b_CanisLupus-A_kanolab-a_kanolab-c.log":()=>b(()=>import("../chunks/DJZAoE0G.js"),[],import.meta.url),"/static/assets/1746956196_kanolab-a_CanisLupus-C_mille_CanisLupus-B_kanolab-c_kanolab-b_CanisLupus-A_GAIT_SunameLLi-C_SunameLLi-B_SunameLLi-A_CamelliaDragons_kanolab.log":()=>b(()=>import("../chunks/CiNP6fU2.js"),[],import.meta.url),"/static/assets/1746959235_SunameLLi-A_CanisLupus-A_kanolab-a_kanolab-c_GAIT_kanolab-b_kanolab_CanisLupus-C_CanisLupus-B_mille_SunameLLi-B_SunameLLi-C_CamelliaDragons.log":()=>b(()=>import("../chunks/Cl9AkFDN.js"),[],import.meta.url),"/static/assets/1746962348_SunameLLi-A_kanolab_SunameLLi-C_CamelliaDragons_kanolab-a_CanisLupus-A_mille_kanolab-c_SunameLLi-B_GAIT_CanisLupus-C_CanisLupus-B_kanolab-b.log":()=>b(()=>import("../chunks/CqR3cq9f.js"),[],import.meta.url),"/static/assets/1746975048_CanisLupus-B_SunameLLi-A_kanolab_kanolab-b_kanolab-a_SunameLLi-C_GAIT_CamelliaDragons_mille_CanisLupus-A_CanisLupus-C_kanolab-c_SunameLLi-B.log":()=>b(()=>import("../chunks/DTaRAmRz.js"),[],import.meta.url),"/static/assets/1747150144_CanisLupus-A_GAIT_SunameLLi-B_kanolab-b_CamelliaDragons_CanisLupus-B_kanolab-a_kanolab_CanisLupus-C_SunameLLi-C_mille_SunameLLi-A_kanolab-c.log":()=>b(()=>import("../chunks/B5xefhW3.js"),[],import.meta.url)})).reduce((g,[i,L])=>{const k=i.split("/").pop()||"";return{...g,[k]:`${Va}${i.replace("/static","")}`}},{});var a=_t(),d=r(l(a),2);d.__click=function(...g){var i;(i=s.loadClipboardLog)==null||i.apply(this,g)};var o=r(d,2);o.__change=g=>{const i=g.currentTarget.value;i&&(s.loadAssetLog(f[i],i),g.currentTarget.value="")};var u=l(o);u.value=u.__value="";var m=r(u);z(m,17,()=>Object.entries(f),H,(g,i)=>{let L=()=>x(i)[0];var k=lt(),T={},G=l(k,!0);n(k),R(()=>{T!==(T=L())&&(k.value=(k.__value=L())??""),F(G,L())}),c(g,k)}),n(o);var I=r(o,2);I.__change=function(...g){var i;(i=s.handleFileSelect)==null||i.apply(this,g)};var h=r(I,2),O=l(h);E(O,"inline",!0),E(O,"icon","mdi:white-balance-sunny");var D=r(O,2),P=r(D,2);E(P,"inline",!0),E(P,"icon","mdi:moon-and-stars"),n(h),n(a),c(p,a),ta()}fa(["click","change"]);var ct=(p,s,f)=>Y(s,f(),!0),mt=(p,s,f)=>s(f()),vt=v('<div class="w-fit shrink-0 flex gap-0"><button> </button> <button class="btn btn-error btn-square" aria-label="Close tab"><iconify-icon></iconify-icon></button></div>',2),dt=v('<div class="w-full shrink-0 overflow-x-auto flex gap-4 m-4"></div> <div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"></div>',1),gt=v('<main class="h-screen flex flex-col"><!> <div class="w-full h-full flex flex-col overflow-hidden bg-base-300"><!></div></main>');function wt(p,s){aa(s,!0);let f={records:{},selectedKey:""},a=ga(f.records),d=Aa(ga(f.selectedKey));function o(i){const L=i.target;Array.from(L.files||[]).forEach(T=>{const G=new FileReader;G.onload=K=>{var M;const j=((M=K.target)==null?void 0:M.result)??"";a[T.name]=sa(j),Y(d,T.name,!0)},G.readAsText(T)}),L&&(L.value="")}function u(){navigator.clipboard.readText().then(i=>{const L="Clipboard"+new Date().toISOString();a[L]=sa(i),Y(d,L)}).catch(i=>{console.error("Error reading clipboard:",i)})}function m(i){delete a[i],Y(d,Object.keys(a)[0]||"",!0)}async function I(i,L){try{const T=await(await fetch(i)).text();a[L]=sa(T),Y(d,L,!0)}catch(k){console.error("Error loading asset log:",k)}}var h=gt();Ea(i=>{Ta.title="aiwolf-nlp-viewer"});var O=l(h);ut(O,{loadAssetLog:I,loadClipboardLog:u,handleFileSelect:o});var D=r(O,2),P=l(D);{var g=i=>{var L=dt(),k=la(L);z(k,21,()=>Object.entries(a),H,(G,K)=>{let j=()=>x(K)[0];var M=vt(),q=l(M);let U;q.__click=[ct,d,j];var oa=l(q,!0);n(q);var Q=r(q,2);Q.__click=[mt,m,j];var ra=l(Q);E(ra,"icon","mdi:close"),n(Q),n(M),R(ea=>{U=_a(q,1,"btn",null,U,ea),F(oa,j())},[()=>({"btn-active":x(d)===j()})]),c(G,M)}),n(k);var T=r(k,2);z(T,21,()=>Object.entries(a[x(d)]),H,(G,K)=>{let j=()=>x(K)[0],M=()=>x(K)[1];st(G,{get dayIdx(){return j()},get dayStatus(){return M()}})}),n(T),c(i,L)};w(P,i=>{Object.keys(a).length>0&&i(g)})}n(D),n(h),c(p,h),ta()}fa(["click"]);export{wt as component};
