var Ke=Object.defineProperty;var ne=t=>{throw TypeError(t)};var Ce=(t,e,r)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var w=(t,e,r)=>Ce(t,typeof e!="symbol"?e+"":e,r),ie=(t,e,r)=>e.has(t)||ne("Cannot "+r);var i=(t,e,r)=>(ie(t,e,"read from private field"),r?r.call(t):e.get(t)),A=(t,e,r)=>e.has(t)?ne("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),g=(t,e,r,s)=>(ie(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);import{t as fe,a as ae}from"../chunks/Cho36ymH.js";import{p as Pe,ae as Te,j as Re,s as b,c as l,t as oe,a as _e,$ as We,r as p}from"../chunks/DH_0n6i9.js";import{d as He,s as xe}from"../chunks/DiUXINXv.js";import{i as $e}from"../chunks/B4D05ref.js";import{h as De}from"../chunks/C04Rpw2F.js";import{s as V,r as ce}from"../chunks/BqBL1bKv.js";import{s as he}from"../chunks/D6NyDbKB.js";import{b as de}from"../chunks/COmPZSO1.js";import{b as Je}from"../chunks/F7xBxq30.js";/* empty css                */const W=new TextEncoder,j=new TextDecoder;function Oe(...t){const e=t.reduce((n,{length:a})=>n+a,0),r=new Uint8Array(e);let s=0;for(const n of t)r.set(n,s),s+=n.length;return r}function Ie(t){if(Uint8Array.prototype.toBase64)return t.toBase64();const e=32768,r=[];for(let s=0;s<t.length;s+=e)r.push(String.fromCharCode.apply(null,t.subarray(s,s+e)));return btoa(r.join(""))}function Ue(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);const e=atob(t),r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r}function Be(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:j.decode(t),{alphabet:"base64url"});let e=t;e instanceof Uint8Array&&(e=j.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Ue(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function F(t){let e=t;return typeof e=="string"&&(e=W.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):Ie(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class G extends Error{constructor(r,s){var n;super(r,s);w(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}w(G,"code","ERR_JOSE_GENERIC");class T extends G{constructor(){super(...arguments);w(this,"code","ERR_JOSE_NOT_SUPPORTED")}}w(T,"code","ERR_JOSE_NOT_SUPPORTED");class R extends G{constructor(){super(...arguments);w(this,"code","ERR_JWS_INVALID")}}w(R,"code","ERR_JWS_INVALID");class le extends G{constructor(){super(...arguments);w(this,"code","ERR_JWT_INVALID")}}w(le,"code","ERR_JWT_INVALID");function E(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function O(t,e){return t.name===e}function X(t){return parseInt(t.name.slice(4),10)}function Me(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Ne(t,e){if(!t.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function Le(t,e,r){switch(e){case"HS256":case"HS384":case"HS512":{if(!O(t.algorithm,"HMAC"))throw E("HMAC");const s=parseInt(e.slice(2),10);if(X(t.algorithm.hash)!==s)throw E(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!O(t.algorithm,"RSASSA-PKCS1-v1_5"))throw E("RSASSA-PKCS1-v1_5");const s=parseInt(e.slice(2),10);if(X(t.algorithm.hash)!==s)throw E(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!O(t.algorithm,"RSA-PSS"))throw E("RSA-PSS");const s=parseInt(e.slice(2),10);if(X(t.algorithm.hash)!==s)throw E(`SHA-${s}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!O(t.algorithm,"Ed25519"))throw E("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!O(t.algorithm,"ECDSA"))throw E("ECDSA");const s=Me(e);if(t.algorithm.namedCurve!==s)throw E(s,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Ne(t,r)}function pe(t,e,...r){var s;if(r=r.filter(Boolean),r.length>2){const n=r.pop();t+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(s=e.constructor)!=null&&s.name&&(t+=` Received an instance of ${e.constructor.name}`),t}const Ve=(t,...e)=>pe("Key must be ",t,...e);function me(t,e,...r){return pe(`Key for the ${t} algorithm must be `,e,...r)}function ye(t){return(t==null?void 0:t[Symbol.toStringTag])==="CryptoKey"}function Se(t){return(t==null?void 0:t[Symbol.toStringTag])==="KeyObject"}const we=t=>ye(t)||Se(t),je=(...t)=>{const e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(const s of e){const n=Object.keys(s);if(!r||r.size===0){r=new Set(n);continue}for(const a of n){if(r.has(a))return!1;r.add(a)}}return!0};function Ge(t){return typeof t=="object"&&t!==null}const be=t=>{if(!Ge(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Ye=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:r}=e.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}};function ze(t){let e,r;switch(t.kty){case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new T('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new T('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new T('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new T('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:r}}const qe=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:r}=ze(t),s={...t};return delete s.alg,delete s.use,crypto.subtle.importKey("jwk",s,e,t.ext??!t.d,t.key_ops??r)},Fe=(t,e,r,s,n)=>{if(n.crit!==void 0&&(s==null?void 0:s.crit)===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!s||s.crit===void 0)return new Set;if(!Array.isArray(s.crit)||s.crit.length===0||s.crit.some(o=>typeof o!="string"||o.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;r!==void 0?a=new Map([...Object.entries(r),...e.entries()]):a=e;for(const o of s.crit){if(!a.has(o))throw new T(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new t(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&s[o]===void 0)throw new t(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(s.crit)};function k(t){return be(t)&&typeof t.kty=="string"}function Xe(t){return t.kty!=="oct"&&typeof t.d=="string"}function Ze(t){return t.kty!=="oct"&&typeof t.d>"u"}function Qe(t){return t.kty==="oct"&&typeof t.k=="string"}let H;const ue=async(t,e,r,s=!1)=>{H||(H=new WeakMap);let n=H.get(t);if(n!=null&&n[r])return n[r];const a=await qe({...e,alg:r});return s&&Object.freeze(t),n?n[r]=a:H.set(t,{[r]:a}),a},ke=(t,e)=>{var o;H||(H=new WeakMap);let r=H.get(t);if(r!=null&&r[e])return r[e];const s=t.type==="public",n=!!s;let a;if(t.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}a=t.toCryptoKey(t.asymmetricKeyType,n,s?[]:["deriveBits"])}if(t.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");a=t.toCryptoKey(t.asymmetricKeyType,n,[s?"verify":"sign"])}if(t.asymmetricKeyType==="rsa"){let d;switch(e){case"RSA-OAEP":d="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":d="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":d="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":d="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return t.toCryptoKey({name:"RSA-OAEP",hash:d},n,s?["encrypt"]:["decrypt"]);a=t.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:d},n,[s?"verify":"sign"])}if(t.asymmetricKeyType==="ec"){const h=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=t.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!h)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&h==="P-256"&&(a=t.toCryptoKey({name:"ECDSA",namedCurve:h},n,[s?"verify":"sign"])),e==="ES384"&&h==="P-384"&&(a=t.toCryptoKey({name:"ECDSA",namedCurve:h},n,[s?"verify":"sign"])),e==="ES512"&&h==="P-521"&&(a=t.toCryptoKey({name:"ECDSA",namedCurve:h},n,[s?"verify":"sign"])),e.startsWith("ECDH-ES")&&(a=t.toCryptoKey({name:"ECDH",namedCurve:h},n,s?[]:["deriveBits"]))}if(!a)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return r?r[e]=a:H.set(t,{[e]:a}),a},et=async(t,e)=>{if(t instanceof Uint8Array||ye(t))return t;if(Se(t)){if(t.type==="secret")return t.export();if("toCryptoKey"in t&&typeof t.toCryptoKey=="function")try{return ke(t,e)}catch(s){if(s instanceof TypeError)throw s}let r=t.export({format:"jwk"});return ue(t,r,e)}if(k(t))return t.k?Be(t.k):ue(t,t,e,!0);throw new Error("unreachable")},_=t=>t==null?void 0:t[Symbol.toStringTag],Q=(t,e,r)=>{var s,n;if(e.use!==void 0){let a;switch(r){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc";break}if(e.use!==a)throw new TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(e.alg!==void 0&&e.alg!==t)throw new TypeError(`Invalid key for this operation, its "alg" must be "${t}" when present`);if(Array.isArray(e.key_ops)){let a;switch(!0){case r==="sign":case t==="dir":case t.includes("CBC-HS"):a=r;break;case t.startsWith("PBES2"):a="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(t):!t.includes("GCM")&&t.endsWith("KW")?a="unwrapKey":a=r;break;case r==="encrypt":a="wrapKey";break;case r==="decrypt":a=t.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(a&&((n=(s=e.key_ops)==null?void 0:s.includes)==null?void 0:n.call(s,a))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${a}" when present`)}return!0},tt=(t,e,r)=>{if(!(e instanceof Uint8Array)){if(k(e)){if(Qe(e)&&Q(t,e,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!we(e))throw new TypeError(me(t,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${_(e)} instances for symmetric algorithms must be of type "secret"`)}},rt=(t,e,r)=>{if(k(e))switch(r){case"decrypt":case"sign":if(Xe(e)&&Q(t,e,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Ze(e)&&Q(t,e,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!we(e))throw new TypeError(me(t,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${_(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(r){case"sign":throw new TypeError(`${_(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${_(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(r){case"verify":throw new TypeError(`${_(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${_(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},st=(t,e,r)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(t)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(t)?tt(t,e,r):rt(t,e,r)},nt=(t,e)=>{const r=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(t.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new T(`alg ${t} is not supported either by JOSE or your javascript runtime`)}},it=async(t,e,r)=>{if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(Ve(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[r])}return Le(e,t,r),e},C=t=>Math.floor(t.getTime()/1e3),Ee=60,Ae=Ee*60,ee=Ae*24,at=ee*7,ot=ee*365.25,ct=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Z=t=>{const e=ct.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const r=parseFloat(e[2]),s=e[3].toLowerCase();let n;switch(s){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(r*Ee);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(r*Ae);break;case"day":case"days":case"d":n=Math.round(r*ee);break;case"week":case"weeks":case"w":n=Math.round(r*at);break;default:n=Math.round(r*ot);break}return e[1]==="-"||e[4]==="ago"?-n:n};function P(t,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${t} input`);return e}var c;class ht{constructor(e){A(this,c);if(!be(e))throw new TypeError("JWT Claims Set MUST be an object");g(this,c,structuredClone(e))}data(){return W.encode(JSON.stringify(i(this,c)))}get iss(){return i(this,c).iss}set iss(e){i(this,c).iss=e}get sub(){return i(this,c).sub}set sub(e){i(this,c).sub=e}get aud(){return i(this,c).aud}set aud(e){i(this,c).aud=e}set jti(e){i(this,c).jti=e}set nbf(e){typeof e=="number"?i(this,c).nbf=P("setNotBefore",e):e instanceof Date?i(this,c).nbf=P("setNotBefore",C(e)):i(this,c).nbf=C(new Date)+Z(e)}set exp(e){typeof e=="number"?i(this,c).exp=P("setExpirationTime",e):e instanceof Date?i(this,c).exp=P("setExpirationTime",C(e)):i(this,c).exp=C(new Date)+Z(e)}set iat(e){typeof e>"u"?i(this,c).iat=C(new Date):e instanceof Date?i(this,c).iat=P("setIssuedAt",C(e)):typeof e=="string"?i(this,c).iat=P("setIssuedAt",C(new Date)+Z(e)):i(this,c).iat=P("setIssuedAt",e)}}c=new WeakMap;const dt=async(t,e,r)=>{const s=await it(t,e,"sign");Ye(t,s);const n=await crypto.subtle.sign(nt(t,s.algorithm),s,r);return new Uint8Array(n)};var I,f,y;class ut{constructor(e){A(this,I);A(this,f);A(this,y);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");g(this,I,e)}setProtectedHeader(e){if(i(this,f))throw new TypeError("setProtectedHeader can only be called once");return g(this,f,e),this}setUnprotectedHeader(e){if(i(this,y))throw new TypeError("setUnprotectedHeader can only be called once");return g(this,y,e),this}async sign(e,r){if(!i(this,f)&&!i(this,y))throw new R("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!je(i(this,f),i(this,y)))throw new R("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const s={...i(this,f),...i(this,y)},n=Fe(R,new Map([["b64",!0]]),r==null?void 0:r.crit,i(this,f),s);let a=!0;if(n.has("b64")&&(a=i(this,f).b64,typeof a!="boolean"))throw new R('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=s;if(typeof o!="string"||!o)throw new R('JWS "alg" (Algorithm) Header Parameter missing or invalid');st(o,e,"sign");let d=i(this,I);a&&(d=W.encode(F(d)));let h;i(this,f)?h=W.encode(F(JSON.stringify(i(this,f)))):h=W.encode("");const U=Oe(h,W.encode("."),d),B=await et(e,o),$=await dt(o,B,U),S={signature:F($),payload:""};return a&&(S.payload=j.decode(d)),i(this,y)&&(S.header=i(this,y)),i(this,f)&&(S.protected=j.decode(h)),S}}I=new WeakMap,f=new WeakMap,y=new WeakMap;var x;class ft{constructor(e){A(this,x);g(this,x,new ut(e))}setProtectedHeader(e){return i(this,x).setProtectedHeader(e),this}async sign(e,r){const s=await i(this,x).sign(e,r);if(s.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}}x=new WeakMap;var v,m;class lt{constructor(e={}){A(this,v);A(this,m);g(this,m,new ht(e))}setIssuer(e){return i(this,m).iss=e,this}setSubject(e){return i(this,m).sub=e,this}setAudience(e){return i(this,m).aud=e,this}setJti(e){return i(this,m).jti=e,this}setNotBefore(e){return i(this,m).nbf=e,this}setExpirationTime(e){return i(this,m).exp=e,this}setIssuedAt(e){return i(this,m).iat=e,this}setProtectedHeader(e){return g(this,v,e),this}async sign(e,r){var n;const s=new ft(i(this,m).data());if(s.setProtectedHeader(i(this,v)),Array.isArray((n=i(this,v))==null?void 0:n.crit)&&i(this,v).crit.includes("b64")&&i(this,v).b64===!1)throw new le("JWTs MUST NOT use unencoded payload");return s.sign(e,r)}}v=new WeakMap,m=new WeakMap;function pt(t,e){let r=new Uint8Array(32);crypto.getRandomValues(r),e.secret=btoa(String.fromCharCode(...r))}var mt=(t,e)=>navigator.clipboard.writeText(e.token),yt=fe('<div class="w-md card bg-base-100 shadow-xl mt-4"><div class="card-body"><pre class="whitespace-pre-wrap break-all"> </pre> <button class="btn">トークンをコピーする</button></div></div>'),St=fe('<main><div class="hero bg-base-200 min-h-screen"><div class="hero-content"><div><div class="w-md card bg-base-100 shadow-xl"><div class="card-body"><h2 class="text-xl font-bold text-center">トークン生成</h2> <p class="text-sm">対戦サーバにおける接続認証を有効にした場合に必要となるトークンを生成します。秘密鍵はブラウザ上で生成され、サーバには一切送信されません。</p> <p class="text-sm">エージェントとして接続する場合は、チーム名を入力してください。</p> <button class="btn mt-2">秘密鍵を生成する</button> <label class="input w-full mt-2 block"><iconify-icon></iconify-icon> <input type="text" class="grow" placeholder="秘密鍵"></label> <select class="select w-full mt-2"><option>エージェント</option><option>リアルタイムログ</option></select> <label class="input w-full mt-2 block"><iconify-icon></iconify-icon> <input type="text" class="grow" placeholder="チーム名"></label></div></div> <!></div></div></div></main>',2);function _t(t,e){Pe(e,!0);let r=Te({secret:"",role:"PLAYER",team:"",token:""});Re(()=>{s(r.secret,r.role,r.team)});async function s(u,K,D){if(!u||!K){r.token="";return}if(K==="PLAYER"&&!D){r.token="";return}const J=K==="PLAYER"?{role:"PLAYER",team:D}:{role:"RECEIVER"};try{const L=new TextEncoder().encode(u),q=await new lt(J).setProtectedHeader({alg:"HS256"}).sign(L);r.token=q}catch{r.token="エラーが発生しました"}}var n=St();De(u=>{We.title="aiwolf-nlp-viewer"});var a=l(n),o=l(a),d=l(o),h=l(d),U=l(h),B=b(l(U),6);B.__click=[pt,r];var $=b(B,2),S=l($);he(S,1,"h-[1em] opacity-50"),V(S,"inline",!0),V(S,"icon","mdi:key");var te=b(S,2);ce(te),p($);var M=b($,2),Y=l(M);Y.value=Y.__value="PLAYER";var re=b(Y);re.value=re.__value="RECEIVER",p(M);var se=b(M,2),N=l(se);he(N,1,"h-[1em] opacity-50"),V(N,"inline",!0),V(N,"icon","mdi:form-textbox");var z=b(N,2);ce(z),p(se),p(U),p(h);var ge=b(h,2);{var ve=u=>{var K=yt(),D=l(K),J=l(D),L=l(J,!0);p(J);var q=b(J,2);q.__click=[mt,r],p(D),p(K),oe(()=>xe(L,r.token)),ae(u,K)};$e(ge,u=>{r.token&&u(ve)})}p(d),p(o),p(a),p(n),oe(()=>z.disabled=r.role!=="PLAYER"),de(te,()=>r.secret,u=>r.secret=u),Je(M,()=>r.role,u=>r.role=u),de(z,()=>r.team,u=>r.team=u),ae(t,n),_e()}He(["click"]);export{_t as component};
