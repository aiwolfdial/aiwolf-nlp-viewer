import{p as dt,i as P,_ as X,b as ta}from"../chunks/preload-helper.BbwyDl-3.js";import{b as At,e as aa,a as k,t as y}from"../chunks/disclose-version.DiPJjwP6.js";import{i as Ut}from"../chunks/legacy.BBVHgSlC.js";import{m as Vt,v as j,B as mt,M as Nt,ao as zt,N as ea,O as Tt,C as vt,P as pt,w as rt,at as ut,Q as Pt,n as yt,R as ra,z as It,au as Rt,av as ia,an as sa,aw as na,q as Ht,y as Ft,x as oa,ak as la,ac as Gt,X as ca,ax as xt,ay as Lt,aa as _a,G as Dt,az as Wt,aA as va,aB as ua,ah as Bt,al as fa,aj as da,L as pa,aC as ga,ab as Ot,a2 as wt,aD as ha,p as Yt,c as u,s as d,r as v,t as V,a as $t,h as p,aE as _t,aF as ma,I as K,aG as gt}from"../chunks/runtime.5D6beMhC.js";import{a as H,d as Ia,e as tt}from"../chunks/store.DWaYwtIX.js";import{b as St}from"../chunks/paths.CEcl4h82.js";function it(e,a){return a}function Ea(e,a,t,r){for(var c=[],o=a.length,_=0;_<o;_++)ia(a[_].e,c,!0);var g=o>0&&c.length===0&&t!==null;if(g){var h=t.parentNode;sa(h),h.append(t),r.clear(),at(e,a[0].prev,a[o-1].next)}na(c,()=>{for(var b=0;b<o;b++){var x=a[b];g||(r.delete(x.k),at(e,x.prev,x.next)),Ht(x.e,!g)}})}function st(e,a,t,r,c,o=null){var _=e,g={flags:a,items:new Map,first:null},h=(a&Wt)!==0;if(h){var b=e;_=j?vt(Ft(b)):b.appendChild(oa())}j&&mt();var x=null,M=!1;Vt(()=>{var f=t(),m=Nt(f)?f:f==null?[]:zt(f),I=m.length;if(M&&I===0)return;M=I===0;let Y=!1;if(j){var O=_.data===ea;O!==(I===0)&&(_=Tt(),vt(_),pt(!1),Y=!0)}if(j){for(var N=null,W,U=0;U<I;U++){if(rt.nodeType===8&&rt.data===la){_=rt,Y=!0,pt(!1);break}var i=m[U],l=r(i,U);W=qt(rt,g,N,null,i,l,U,c,a),g.items.set(l,W),N=W}I>0&&vt(Tt())}if(!j){var E=Gt;ka(m,g,_,c,a,(E.f&ut)!==0,r)}o!==null&&(I===0?x?Pt(x):x=yt(()=>o(_)):x!==null&&ra(x,()=>{x=null})),Y&&pt(!0),t()}),j&&(_=rt)}function ka(e,a,t,r,c,o,_){var et,nt,ot,ct;var g=(c&va)!==0,h=(c&(xt|Lt))!==0,b=e.length,x=a.items,M=a.first,f=M,m,I=null,Y,O=[],N=[],W,U,i,l;if(g)for(l=0;l<b;l+=1)W=e[l],U=_(W,l),i=x.get(U),i!==void 0&&((et=i.a)==null||et.measure(),(Y??(Y=new Set)).add(i));for(l=0;l<b;l+=1){if(W=e[l],U=_(W,l),i=x.get(U),i===void 0){var E=f?f.e.nodes_start:t;I=qt(E,a,I,I===null?a.first:I.next,W,U,l,r,c),x.set(U,I),O=[],N=[],f=I.next;continue}if(h&&ya(i,W,l,c),i.e.f&ut&&(Pt(i.e),g&&((nt=i.a)==null||nt.unfix(),(Y??(Y=new Set)).delete(i))),i!==f){if(m!==void 0&&m.has(i)){if(O.length<N.length){var A=N[0],R;I=A.prev;var q=O[0],F=O[O.length-1];for(R=0;R<O.length;R+=1)Ct(O[R],A,t);for(R=0;R<N.length;R+=1)m.delete(N[R]);at(a,q.prev,F.next),at(a,I,q),at(a,F,A),f=A,I=F,l-=1,O=[],N=[]}else m.delete(i),Ct(i,f,t),at(a,i.prev,i.next),at(a,i,I===null?a.first:I.next),at(a,I,i),I=i;continue}for(O=[],N=[];f!==null&&f.k!==U;)(o||!(f.e.f&ut))&&(m??(m=new Set)).add(f),N.push(f),f=f.next;if(f===null)continue;i=f}O.push(i),I=i,f=i.next}if(f!==null||m!==void 0){for(var S=m===void 0?[]:zt(m);f!==null;)(o||!(f.e.f&ut))&&S.push(f),f=f.next;var $=S.length;if($>0){var J=c&Wt&&b===0?t:null;if(g){for(l=0;l<$;l+=1)(ot=S[l].a)==null||ot.measure();for(l=0;l<$;l+=1)(ct=S[l].a)==null||ct.fix()}Ea(a,S,J,x)}}g&&ca(()=>{var lt;if(Y!==void 0)for(i of Y)(lt=i.a)==null||lt.apply()}),It.first=a.first&&a.first.e,It.last=I&&I.e}function ya(e,a,t,r){r&xt&&Rt(e.v,a),r&Lt?Rt(e.i,t):e.i=t}function qt(e,a,t,r,c,o,_,g,h){var b=(h&xt)!==0,x=(h&ua)===0,M=b?x?_a(c):Dt(c):c,f=h&Lt?Dt(_):_,m={i:f,v:M,k:o,a:null,e:null,prev:t,next:r};try{return m.e=yt(()=>g(e,M,f),j),m.e.prev=t&&t.e,m.e.next=r&&r.e,t===null?a.first=m:(t.next=m,t.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function Ct(e,a,t){for(var r=e.next?e.next.e.nodes_start:t,c=a?a.e.nodes_start:t,o=e.e.nodes_start;o!==r;){var _=Bt(o);c.before(o),o=_}}function at(e,a,t){a===null?e.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}function xa(e,a,t,r,c){var o=e,_="",g;Vt(()=>{if(_===(_=a()??"")){j&&mt();return}g!==void 0&&(Ht(g),g=void 0),_!==""&&(g=yt(()=>{if(j){rt.data;for(var h=mt(),b=h;h!==null&&(h.nodeType!==8||h.data!=="");)b=h,h=Bt(h);if(h===null)throw fa(),da;At(rt,b),o=vt(h);return}var x=_+"",M=aa(x);At(Ft(M),M.lastChild),o.before(M)}))})}function Xt(e,a,t,r){var c=e.__attributes??(e.__attributes={});j&&(c[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||c[a]!==(c[a]=t)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[ha]=t),t==null?e.removeAttribute(a):typeof t!="string"&&Kt(e).includes(a)?e[a]=t:e.setAttribute(a,t))}function B(e,a,t){var r=Gt,c=It;Ot(null),wt(null);try{(Et.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?Kt(e).includes(a):t&&typeof t=="object")?e[a]=t:Xt(e,a,t==null?t:String(t))}finally{Ot(r),wt(c)}}var Et=new Map;function Kt(e){var a=Et.get(e.nodeName);if(a)return a;Et.set(e.nodeName,a=[]);for(var t,r=e,c=Element.prototype;c!==r;){t=ga(r);for(var o in t)t[o].set&&a.push(o);r=pa(r)}return a}function kt(e,a,t){if(t){if(e.classList.contains(a))return;e.classList.add(a)}else{if(!e.classList.contains(a))return;e.classList.remove(a)}}function Mt(e){return function(...a){var t=a[0];return t.preventDefault(),e==null?void 0:e.apply(this,a)}}function La(e,a){var o;var t=(o=e.$$events)==null?void 0:o[a.type],r=Nt(t)?t.slice():t==null?[]:[t];for(var c of r)c.call(this,a)}const ba={VILLAGER:"村人",SEER:"占い師",MEDIUM:"霊能者",BODYGUARD:"騎士",WEREWOLF:"人狼",POSSESSED:"狂人"},Aa={ALIVE:"生存",DEAD:"死亡"},Ta={HUMAN:"人間",WEREWOLF:"人狼"},Ra={VILLAGER:"村人陣営",WEREWOLF:"人狼陣営"};function ht(e){const a=e.split(/\r?\n/).filter(r=>r.trim()),t={};return a.forEach(r=>{const[c,o,..._]=r.split(",");t[c]||(t[c]=Da()),Oa(t[c],o,_)}),t}function Da(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function Oa(e,a,t){const c={status:([o,_,g,h])=>{e.agents[o]={role:_,status:g,name:h}},talk:([o,_,g,h])=>{e.talks.push({talkIdx:o,turnIdx:_,agentIdx:g,text:h})},vote:([o,_])=>{e.votes.push({agentIdx:o,targetIdx:_})},execute:([o,_])=>{e.execution={agentIdx:o,role:_}},divine:([o,_,g])=>{e.divine={agentIdx:o,targetIdx:_,result:g}},attackVote:([o,_])=>{e.attackVotes.push({agentIdx:o,targetIdx:_})},attack:([o,_])=>{e.attack={targetIdx:o,isSuccessful:_==="true"}},result:([o,_,g])=>{e.result={villagers:o,werewolves:_,winSide:g}}}[a];c&&c(t)}function Q(e,a,t){var o;const r=(o=e[a])==null?void 0:o.agents[t];return`Agent[${t.padStart(2,"0")}]`}function wa(e){const a=e.match(/>>Agent\[\d+\]/);return a?e.replace(a[0],`<strong>${a[0]}</strong>`).trim():e.trim()}var Sa=y("<iconify-icon></iconify-icon>",2),Ca=y("<iconify-icon></iconify-icon>",2),Ma=y("<iconify-icon></iconify-icon>",2),Ua=y("<iconify-icon></iconify-icon>",2),Va=y("<iconify-icon></iconify-icon>",2),Na=y("<iconify-icon></iconify-icon>",2),za=y("<iconify-icon></iconify-icon>",2),Pa=y("<li><strong> </strong> </li>"),Ha=y('<section class="agent-section"><h3>エージェント</h3> <ul></ul></section>'),Fa=y('<div class="talk"><strong> </strong> <!></div>'),Ga=y('<section class="talks-section"><h3>会話</h3> <div class="talks"></div></section>'),Wa=y("<li><strong> </strong> が <strong> </strong> に投票</li>"),Ba=y('<section class="votes-section"><h3>投票</h3> <ul></ul></section>'),Ya=y('<section class="execution-section"><h3>追放</h3> <p><strong> </strong> を追放</p></section>'),$a=y("<li><strong> </strong> が <strong> </strong> に投票</li>"),qa=y('<section class="attack-votes-section"><h3>襲撃投票</h3> <ul></ul></section>'),Xa=y("<p><strong> </strong> を襲撃: <strong> </strong></p>"),Ka=y("<p>襲撃対象なし</p>"),Qa=y('<section class="attack-section"><h3>襲撃</h3> <!></section>'),ja=y('<section class="divine-section"><h3>占い</h3> <p><strong> </strong> が <strong> </strong> を占い: <strong> </strong></p></section>'),Ja=y('<section class="result-section"><h3>結果</h3> <p><strong> </strong> が勝利</p></section>'),Za=y('<div class="day-column"><div class="day-section"><h2 style="margin-bottom: 0"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="scrollable-content"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function te(e,a){Yt(a,!1);let t=dt(a,"dayIdx",8),r=dt(a,"dayStatus",8),c=dt(a,"dayStatuses",8);Ut();var o=Za(),_=u(o),g=u(_),h=u(g),b=d(h);{var x=s=>{var n=Sa();B(n,"inline",!0),B(n,"icon","mdi:conversation"),k(s,n)};P(b,s=>{r().talks.length>0&&s(x)})}var M=d(b,2);{var f=s=>{var n=Ca();B(n,"inline",!0),B(n,"icon","mdi:vote"),k(s,n)};P(M,s=>{r().votes.length>0&&s(f)})}var m=d(M,2);{var I=s=>{var n=Ma();B(n,"inline",!0),B(n,"icon","mdi:account-remove"),k(s,n)};P(m,s=>{r().execution&&s(I)})}var Y=d(m,2);{var O=s=>{var n=Ua();B(n,"inline",!0),B(n,"icon","mdi:vote"),k(s,n)};P(Y,s=>{r().attackVotes.length>0&&s(O)})}var N=d(Y,2);{var W=s=>{var n=Va();B(n,"inline",!0),B(n,"icon","mdi:sword"),k(s,n)};P(N,s=>{r().attack&&s(W)})}var U=d(N,2);{var i=s=>{var n=Na();B(n,"inline",!0),B(n,"icon","mdi:account-eye"),k(s,n)};P(U,s=>{r().divine&&s(i)})}var l=d(U,2);{var E=s=>{var n=za();B(n,"inline",!0),B(n,"icon","mdi:trophy"),k(s,n)};P(l,s=>{r().result&&s(E)})}v(g);var A=d(g,2),R=u(A);{var q=s=>{var n=Ha(),D=d(u(n),2);st(D,5,()=>Object.entries(r().agents),it,(C,w)=>{let L=()=>p(w)[0],T=()=>p(w)[1];var z=Pa(),G=u(z),Z=u(G,!0);V(()=>H(Z,Q(c(),t(),L()))),v(G);var ft=d(G);v(z),V(()=>{kt(z,"over",T().status!=="ALIVE"),H(ft,` ${ba[T().role]??"NULL"??""} -
                ${Aa[T().status]??"NULL"??""}`)}),k(C,z)}),v(D),v(n),k(s,n)};P(R,s=>{Object.keys(r().agents).length>0&&s(q)})}var F=d(R,2);{var S=s=>{var n=Ga(),D=d(u(n),2);st(D,5,()=>r().talks,it,(C,w)=>{var L=Fa(),T=u(L),z=u(T,!0);V(()=>H(z,Q(c(),t(),p(w).agentIdx))),v(T);var G=d(T,2);xa(G,()=>wa(p(w).text)),v(L),V(()=>kt(L,"over",p(w).text==="Over")),k(C,L)}),v(D),v(n),k(s,n)};P(F,s=>{r().talks.length>0&&s(S)})}var $=d(F,2);{var J=s=>{var n=Ba(),D=d(u(n),2);st(D,5,()=>r().votes,it,(C,w)=>{var L=Wa(),T=u(L),z=u(T,!0);V(()=>H(z,Q(c(),t(),p(w).agentIdx))),v(T);var G=d(T,2),Z=u(G,!0);V(()=>H(Z,Q(c(),t(),p(w).targetIdx))),v(G),_t(),v(L),k(C,L)}),v(D),v(n),k(s,n)};P($,s=>{r().votes.length>0&&s(J)})}var et=d($,2);{var nt=s=>{var n=Ya(),D=d(u(n),2),C=u(D),w=u(C,!0);V(()=>H(w,Q(c(),t(),r().execution.agentIdx))),v(C),_t(),v(D),v(n),k(s,n)};P(et,s=>{r().execution&&s(nt)})}var ot=d(et,2);{var ct=s=>{var n=qa(),D=d(u(n),2);st(D,5,()=>r().attackVotes,it,(C,w)=>{var L=$a(),T=u(L),z=u(T,!0);V(()=>H(z,Q(c(),t(),p(w).agentIdx))),v(T);var G=d(T,2),Z=u(G,!0);V(()=>H(Z,Q(c(),t(),p(w).targetIdx))),v(G),_t(),v(L),k(C,L)}),v(D),v(n),k(s,n)};P(ot,s=>{r().attackVotes.length>0&&s(ct)})}var lt=d(ot,2);{var Qt=s=>{var n=Qa(),D=d(u(n),2);{var C=L=>{var T=Xa(),z=u(T),G=u(z,!0);V(()=>H(G,Q(c(),t(),r().attack.targetIdx))),v(z);var Z=d(z,2),ft=u(Z,!0);v(Z),v(T),V(()=>H(ft,r().attack.isSuccessful?"成功":"失敗")),k(L,T)},w=L=>{var T=Ka();k(L,T)};P(D,L=>{r().attack.targetIdx!=="-1"?L(C):L(w,!1)})}v(n),k(s,n)};P(lt,s=>{r().attack&&s(Qt)})}var bt=d(lt,2);{var jt=s=>{var n=ja(),D=d(u(n),2),C=u(D),w=u(C,!0);V(()=>H(w,Q(c(),t(),r().divine.agentIdx))),v(C);var L=d(C,2),T=u(L,!0);V(()=>H(T,Q(c(),t(),r().divine.targetIdx))),v(L);var z=d(L,2),G=u(z,!0);v(z),v(D),v(n),V(()=>H(G,Ta[r().divine.result]??"NULL")),k(s,n)};P(bt,s=>{r().divine&&s(jt)})}var Jt=d(bt,2);{var Zt=s=>{var n=Ja(),D=d(u(n),2),C=u(D),w=u(C,!0);v(C),_t(),v(D),v(n),V(()=>H(w,Ra[r().result.winSide])),k(s,n)};P(Jt,s=>{r().result&&s(Zt)})}v(A),v(_),v(o),V(()=>H(h,`Day ${t()??""} `)),k(e,o),$t()}var ae=y('<link rel="stylesheet">'),ee=y("<option> </option>"),re=y('<div class="tab-wrapper"><button class="tab-button"> </button> <button class="close-button" aria-label="Close tab">✕</button></div>'),ie=y('<div class="log-container"><div class="tabs-container"><div class="tabs"></div></div> <div class="days-container"></div></div>'),se=y('<main><div class="input-controls"><div class="select-container"><select><option>サンプルログを選択</option><!></select></div> <div tabindex="0" class="file-input-container" role="button"><div class="file-input-label">ファイルを選択もしくはドラッグアンドドロップしてください</div></div> <input id="fileInput" type="file" accept=".log" multiple hidden></div> <style></style> <!></main>');function ue(e,a){Yt(a,!1);let t=gt([]),r=gt(0);function c(i){const l=i.target;Array.from(l.files||[]).forEach(A=>{const R=new FileReader;R.onload=q=>{var S;const F=((S=q.target)==null?void 0:S.result)??"";K(t,[...p(t),{name:A.name,processed:ht(F)}]),K(r,p(t).length-1)},R.readAsText(A)}),l&&(l.value="")}function o(i){var E;Array.from(((E=i.dataTransfer)==null?void 0:E.files)||[]).forEach(A=>{const R=new FileReader;R.onload=q=>{var S;const F=((S=q.target)==null?void 0:S.result)??"";K(t,[...p(t),{name:A.name,processed:ht(F)}]),K(r,p(t).length-1)},R.readAsText(A)})}function _(i){K(t,p(t).filter((l,E)=>E!==i)),p(r)>=p(t).length&&K(r,p(t).length-1)}const g=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>X(()=>import("../chunks/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>X(()=>import("../chunks/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>X(()=>import("../chunks/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>X(()=>import("../chunks/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>X(()=>import("../chunks/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>X(()=>import("../chunks/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>X(()=>import("../chunks/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>X(()=>import("../chunks/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>X(()=>import("../chunks/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>X(()=>import("../chunks/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.CkaHbgN8.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>X(()=>import("../chunks/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.K60EV997.js"),[],import.meta.url)})).map(([i,l])=>({name:i.split("/").pop()||"",path:`${St}${i.replace("/static","")}`}));async function h(i,l){try{const A=await(await fetch(i)).text();K(t,[...p(t),{name:l,processed:ht(A)}]),K(r,p(t).length-1)}catch(E){console.error("Error loading asset log:",E)}}let b=gt(null);Ut();var x=se();Ia(i=>{var l=ae();ma.title="aiwolf-nlp-viewer",Xt(l,"href",`${St??""}/global.css`),k(i,l)});var M=u(x),f=u(M),m=u(f),I=u(m);I.value=((I.__value="")==null,"");var Y=d(I);st(Y,1,()=>g,it,(i,l)=>{var E=ee(),A={},R=u(E,!0);v(E),V(()=>{A!==(A=p(l).path)&&(E.value=(E.__value=p(l).path)==null?"":p(l).path),H(R,p(l).name)}),k(i,E)}),v(m),v(f);var O=d(f,2),N=d(O,2);ta(N,i=>K(b,i),()=>p(b)),v(M);var W=d(M,4);{var U=i=>{var l=ie(),E=u(l),A=u(E);st(A,5,()=>p(t),it,(q,F,S)=>{var $=re(),J=u($),et=u(J,!0);v(J);var nt=d(J,2);v($),V(()=>{kt($,"active",p(r)===S),H(et,p(F).name)}),tt("click",J,()=>K(r,S)),tt("click",nt,()=>_(S)),k(q,$)}),v(A),v(E);var R=d(E,2);st(R,5,()=>Object.entries(p(t)[p(r)].processed),it,(q,F)=>{let S=()=>p(F)[0],$=()=>p(F)[1];te(q,{get dayIdx(){return S()},get dayStatus(){return $()},get dayStatuses(){return p(t)[p(r)].processed}})}),v(R),v(l),k(i,l)};P(W,i=>{p(t).length>0&&i(U)})}v(x),tt("change",m,i=>{const l=i.currentTarget.value;if(l){const E=g.find(A=>A.path===l);E&&h(E.path,E.name),i.currentTarget.value=""}}),tt("dragover",O,Mt(function(i){La.call(this,a,i)})),tt("drop",O,Mt(o)),tt("click",O,()=>{var i;return(i=p(b))==null?void 0:i.click()}),tt("keydown",O,i=>{var l;i.key==="Enter"&&((l=p(b))==null||l.click())}),tt("change",N,c),k(e,x),$t()}export{ue as component};
