import{p as Z,_ as M}from"../chunks/zBeYteZB.js";import{t as d,a as v,d as gt,b as kt}from"../chunks/CYHUnqUB.js";import{p as rt,c as s,r,i as R,a as it,aA as vt,g as n,ac as Lt,s as i,aI as at,aG as ft,d as H,$ as Et}from"../chunks/C6VFkXJ6.js";import{s as N}from"../chunks/CcTxLL8i.js";import{i as L}from"../chunks/DbQD98kR.js";import{e as W,i as B}from"../chunks/CDvNhuoa.js";import{d as At,h as Tt}from"../chunks/BLcQzrmO.js";import{s as k}from"../chunks/D4mFRh8Z.js";import{I as wt,s as Y,R as Ut,t as ct,a as Ot,S as Vt,b as St,T as Rt}from"../chunks/DjS1rb8r.js";import{p as Q}from"../chunks/BZhcqTp8.js";import{b as Dt}from"../chunks/DeauuXp6.js";/* empty css                */function xt(o){var f,u,t="";if(typeof o=="string"||typeof o=="number")t+=o;else if(typeof o=="object")if(Array.isArray(o)){var _=o.length;for(f=0;f<_;f++)o[f]&&(u=xt(o[f]))&&(t&&(t+=" "),t+=u)}else for(u in o)o[u]&&(t&&(t+=" "),t+=u);return t}function Ct(){for(var o,f,u=0,t="",_=arguments.length;u<_;u++)(o=arguments[u])&&(f=xt(o))&&(t&&(t+=" "),t+=f);return t}function Mt(o){return typeof o=="object"?Ct(o):o??""}var zt=d("<strong> </strong>");function z(o,f){rt(f,!0);let u=Z(f,"agentIdx",3,""),t=Z(f,"highlight",3,!1);var _=zt(),g=s(_,!0);r(_),R((l,p)=>{Y(_,Mt(l),"svelte-dj3b7l"),N(g,p)},[()=>t()?"agent"+u().padStart(2,"0"):"",()=>wt(u())]),v(o,_),it()}function Pt(o,f){rt(f,!0);let u=Z(f,"text",3,"");function t(l){const p=/Agent\[(\d+)\]/g,A=[];let V=0,w;for(;(w=p.exec(l))!==null;)w.index>V&&A.push({text:l.slice(V,w.index),agentIdx:null,isAgentTag:!1}),A.push({text:w[0],agentIdx:parseInt(w[1]),isAgentTag:!0}),V=p.lastIndex;if(V<l.length){var S=l.slice(V);Object.entries(Ut).forEach(([T,P])=>{S=S.replaceAll(T,P)}),A.push({text:S,agentIdx:null,isAgentTag:!1})}return{parts:A}}var _=gt(),g=vt(_);W(g,17,()=>t(u()).parts,B,(l,p)=>{var A=gt(),V=vt(A);{var w=T=>{const P=Lt(()=>{var $;return(($=n(p).agentIdx)==null?void 0:$.toString())??""});z(T,{get agentIdx(){return n(P)},highlight:!0})},S=T=>{var P=kt();R(()=>N(P,n(p).text)),v(T,P)};L(V,T=>{n(p).isAgentTag?T(w):T(S,!1)})}v(l,A)}),v(o,_),it()}var jt=d("<iconify-icon></iconify-icon>",2),Ft=d("<iconify-icon></iconify-icon>",2),Nt=d("<iconify-icon></iconify-icon>",2),$t=d("<iconify-icon></iconify-icon>",2),qt=d("<iconify-icon></iconify-icon>",2),Gt=d("<iconify-icon></iconify-icon>",2),Wt=d("<iconify-icon></iconify-icon>",2),Bt=d("<li><!> </li>"),Ht=d('<div><h3 class="text-lg font-bold my-2">エージェント</h3> <ul></ul></div>'),Jt=d("<li><!> <!></li>"),Kt=d('<div><h3 class="text-lg font-bold my-2">会話</h3> <ul></ul></div>'),Qt=d("<li><!> が <!> に投票</li>"),Xt=d('<div><h3 class="text-lg font-bold my-2">投票</h3> <ul></ul></div>'),Yt=d('<div><h3 class="text-lg font-bold my-2">追放</h3> <p><!> を追放</p></div>'),Zt=d("<li><!> が <!> に投票</li>"),te=d('<div><h3 class="text-lg font-bold my-2">襲撃投票</h3> <ul></ul></div>'),ee=d("<p><!> を襲撃: <strong> </strong></p>"),ae=d("<p>襲撃対象なし</p>"),re=d('<div><h3 class="text-lg font-bold my-2">襲撃</h3> <!></div>'),ie=d('<div><h3 class="text-lg font-bold my-2">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></div>'),oe=d('<div><h3 class="text-lg font-bold my-2">結果</h3> <p><strong> </strong> が勝利</p></div>'),ne=d('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><h2 class="text-xl font-bold pb-2"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="grow overflow-y-auto pr-4"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function se(o,f){rt(f,!0);let u=Z(f,"dayIdx",3,""),t=Z(f,"dayStatus",19,()=>({}));var _=ne(),g=s(_),l=s(g),p=s(l),A=i(p);{var V=e=>{var a=jt();k(a,"inline",!0),k(a,"icon","mdi:conversation"),v(e,a)};L(A,e=>{t().talks.length>0&&e(V)})}var w=i(A,2);{var S=e=>{var a=Ft();k(a,"inline",!0),k(a,"icon","mdi:vote"),v(e,a)};L(w,e=>{t().votes.length>0&&e(S)})}var T=i(w,2);{var P=e=>{var a=Nt();k(a,"inline",!0),k(a,"icon","mdi:account-remove"),v(e,a)};L(T,e=>{t().execution&&e(P)})}var $=i(T,2);{var tt=e=>{var a=$t();k(a,"inline",!0),k(a,"icon","mdi:vote"),v(e,a)};L($,e=>{t().attackVotes.length>0&&e(tt)})}var J=i($,2);{var et=e=>{var a=qt();k(a,"inline",!0),k(a,"icon","mdi:sword"),v(e,a)};L(J,e=>{t().attack&&e(et)})}var X=i(J,2);{var ot=e=>{var a=Gt();k(a,"inline",!0),k(a,"icon","mdi:account-eye"),v(e,a)};L(X,e=>{t().divine&&e(ot)})}var nt=i(X,2);{var b=e=>{var a=Wt();k(a,"inline",!0),k(a,"icon","mdi:trophy"),v(e,a)};L(nt,e=>{t().result&&e(b)})}r(l);var I=i(l,2),x=s(I);{var U=e=>{var a=Ht(),m=i(s(a),2);W(m,21,()=>Object.entries(t().agents),B,(E,h)=>{let c=()=>n(h)[0],y=()=>n(h)[1];var O=Bt(),C=s(O);z(C,{get agentIdx(){return c()}});var _t=i(C);r(O),R(yt=>{Y(O,`${yt??""} svelte-1xvg87g`),ct(O,"opacity-25",y().status!=="ALIVE"),N(_t,` ${Ot[y().role]??"NULL"} -
                ${Vt[y().status]??"NULL"}`)},[()=>"p-2 my-2 border-4 rounded-md agent"+c().padStart(2,"0")]),v(E,O)}),r(m),r(a),v(e,a)};L(x,e=>{Object.keys(t().agents).length>0&&e(U)})}var D=i(x,2);{var q=e=>{var a=Kt(),m=i(s(a),2);W(m,21,()=>t().talks,B,(E,h)=>{var c=Jt(),y=s(c);z(y,{get agentIdx(){return n(h).agentIdx}});var O=i(y,2);Pt(O,{get text(){return n(h).text}}),r(c),R(C=>{Y(c,`${C??""} svelte-1xvg87g`),ct(c,"opacity-25",n(h).text==="Over")},[()=>"p-2 my-2 border-4 rounded-md agent"+n(h).agentIdx.padStart(2,"0")]),v(E,c)}),r(m),r(a),v(e,a)};L(D,e=>{t().talks.length>0&&e(q)})}var j=i(D,2);{var F=e=>{var a=Xt(),m=i(s(a),2);W(m,21,()=>t().votes,B,(E,h)=>{var c=Qt(),y=s(c);z(y,{get agentIdx(){return n(h).agentIdx}});var O=i(y,2);z(O,{get agentIdx(){return n(h).targetIdx},highlight:!0}),at(),r(c),R(C=>Y(c,`${C??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+n(h).agentIdx.padStart(2,"0")]),v(E,c)}),r(m),r(a),v(e,a)};L(j,e=>{t().votes.length>0&&e(F)})}var G=i(j,2);{var st=e=>{var a=Yt(),m=i(s(a),2),E=s(m);z(E,{get agentIdx(){return t().execution.agentIdx},highlight:!0}),at(),r(m),r(a),v(e,a)};L(G,e=>{t().execution&&e(st)})}var K=i(G,2);{var lt=e=>{var a=te(),m=i(s(a),2);W(m,21,()=>t().attackVotes,B,(E,h)=>{var c=Zt(),y=s(c);z(y,{get agentIdx(){return n(h).agentIdx}});var O=i(y,2);z(O,{get agentIdx(){return n(h).targetIdx},highlight:!0}),at(),r(c),R(C=>Y(c,`${C??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+n(h).agentIdx.padStart(2,"0")]),v(E,c)}),r(m),r(a),v(e,a)};L(K,e=>{t().attackVotes.length>0&&e(lt)})}var dt=i(K,2);{var mt=e=>{var a=re(),m=i(s(a),2);{var E=c=>{var y=ee(),O=s(y);z(O,{get agentIdx(){return t().attack.targetIdx},highlight:!0});var C=i(O,2),_t=s(C,!0);r(C),r(y),R(()=>N(_t,t().attack.isSuccessful?"成功":"失敗")),v(c,y)},h=c=>{var y=ae();v(c,y)};L(m,c=>{t().attack.targetIdx!=="-1"?c(E):c(h,!1)})}r(a),v(e,a)};L(dt,e=>{t().attack&&e(mt)})}var ut=i(dt,2);{var ht=e=>{var a=ie(),m=i(s(a),2),E=s(m);z(E,{get agentIdx(){return t().divine.agentIdx},highlight:!0});var h=i(E,2);z(h,{get agentIdx(){return t().divine.targetIdx},highlight:!0});var c=i(h,2),y=s(c,!0);r(c),r(m),r(a),R(()=>N(y,St[t().divine.result]??"NULL")),v(e,a)};L(ut,e=>{t().divine&&e(ht)})}var It=i(ut,2);{var bt=e=>{var a=oe(),m=i(s(a),2),E=s(m),h=s(E,!0);r(E),at(),r(m),r(a),R(()=>N(h,Rt[t().result.winSide])),v(e,a)};L(It,e=>{t().result&&e(bt)})}r(I),r(g),r(_),R(()=>N(p,`Day ${u()??""} `)),v(o,_),it()}function pt(o){const f=o.split(/\r?\n/).filter(t=>t.trim()),u={};return f.forEach(t=>{const[_,g,...l]=t.split(",");u[_]||(u[_]=le()),_e(u[_],g,l)}),u}function le(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function _e(o,f,u){const _={status:([g,l,p,A])=>{o.agents[g]={role:l,status:p,name:A}},talk:([g,l,p,A])=>{o.talks.push({talkIdx:g,turnIdx:l,agentIdx:p,text:A})},vote:([g,l])=>{o.votes.push({agentIdx:g,targetIdx:l})},execute:([g,l])=>{o.execution={agentIdx:g,role:l}},divine:([g,l,p])=>{o.divine={agentIdx:g,targetIdx:l,result:p}},attackVote:([g,l])=>{o.attackVotes.push({agentIdx:g,targetIdx:l})},attack:([g,l])=>{o.attack={targetIdx:g,isSuccessful:l==="true"}},result:([g,l,p])=>{o.result={villagers:g,werewolves:l,winSide:p}}}[f];_&&_(u)}var ve=d("<option> </option>"),ce=d('<div class="w-fit shrink-0 flex gap-0"><button class="btn"> </button> <button class="btn btn-error btn-square" aria-label="Close tab"><iconify-icon></iconify-icon></button></div>',2),de=d('<div class="w-full shrink-0 overflow-x-auto flex gap-4 m-4"></div> <div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"></div>',1),ue=d('<main class="h-screen flex flex-col"><div class="navbar bg-base-100 flex justify-start"><h1 class="text-3xl font-bold truncate mx-4">aiwolf-nlp-viewer</h1> <select class="select w-full max-w-xs ml-auto"><option>サンプルログを選択</option><!></select> <input class="file-input w-full max-w-xs mx-2" type="file" accept=".log" multiple> <label class="flex items-center cursor-pointer gap-2 mx-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div> <div class="w-full h-full flex flex-col overflow-hidden bg-base-300"><!></div></main>',2);function Ae(o,f){rt(f,!0);let u={logFiles:[],selectedTabIdx:0},t=ft(Q(u.logFiles)),_=ft(Q(u.selectedTabIdx));function g(b){const I=b.target;Array.from(I.files||[]).forEach(U=>{const D=new FileReader;D.onload=q=>{var F;const j=((F=q.target)==null?void 0:F.result)??"";H(t,Q([...n(t),{name:U.name,data:pt(j)}])),H(_,n(t).length-1)},D.readAsText(U)}),I&&(I.value="")}function l(b){H(t,Q(n(t).filter((I,x)=>x!==b))),n(_)>=n(t).length&&H(_,n(t).length-1)}const p=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>M(()=>import("../chunks/uLwNvvUb.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>M(()=>import("../chunks/cHV5Ilpp.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>M(()=>import("../chunks/KsaoEMQt.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>M(()=>import("../chunks/Cu7J-Cma.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>M(()=>import("../chunks/JpfJ7G0g.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>M(()=>import("../chunks/CH1amTOw.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>M(()=>import("../chunks/BCiIyikN.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>M(()=>import("../chunks/Cx4MDn7u.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>M(()=>import("../chunks/F010eNko.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>M(()=>import("../chunks/BrcFOvsV.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>M(()=>import("../chunks/CbqCXvao.js"),[],import.meta.url)})).map(([b,I])=>({name:b.split("/").pop()||"",path:`${Dt}${b.replace("/static","")}`}));async function A(b,I){try{const U=await(await fetch(b)).text();H(t,Q([...n(t),{name:I,data:pt(U)}])),H(_,n(t).length-1)}catch(x){console.error("Error loading asset log:",x)}}var V=ue();Tt(b=>{Et.title="aiwolf-nlp-viewer"});var w=s(V),S=i(s(w),2);S.__change=b=>{const I=b.currentTarget.value;if(I){const x=p.find(U=>U.path===I);x&&A(x.path,x.name),b.currentTarget.value=""}};var T=s(S);T.value=((T.__value="")==null,"");var P=i(T);W(P,17,()=>p,B,(b,I)=>{var x=ve(),U={},D=s(x,!0);r(x),R(()=>{U!==(U=n(I).path)&&(x.value=(x.__value=n(I).path)==null?"":n(I).path),N(D,n(I).name)}),v(b,x)}),r(S);var $=i(S,2);$.__change=g;var tt=i($,2),J=s(tt);k(J,"inline",!0),k(J,"icon","mdi:white-balance-sunny");var et=i(J,4);k(et,"inline",!0),k(et,"icon","mdi:moon-and-stars"),r(tt),r(w);var X=i(w,2),ot=s(X);{var nt=b=>{var I=de(),x=vt(I);W(x,21,()=>n(t),B,(D,q,j)=>{var F=ce(),G=s(F);G.__click=()=>H(_,Q(j));var st=s(G,!0);r(G);var K=i(G,2);K.__click=()=>l(j);var lt=s(K);k(lt,"icon","mdi:close"),r(K),r(F),R(()=>{ct(G,"btn-active",n(_)===j),N(st,n(q).name)}),v(D,F)}),r(x);var U=i(x,2);W(U,21,()=>Object.entries(n(t)[n(_)].data),B,(D,q)=>{let j=()=>n(q)[0],F=()=>n(q)[1];se(D,{get dayIdx(){return j()},get dayStatus(){return F()}})}),r(U),v(b,I)};L(ot,b=>{n(t).length>0&&b(nt)})}r(X),r(V),v(o,V),it()}At(["change","click"]);export{Ae as component};
