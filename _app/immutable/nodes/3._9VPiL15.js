import{_ as P}from"../chunks/C1FmrZbK.js";import{t as p,a as d,d as pt,b as Tt}from"../chunks/INsZfON2.js";import"../chunks/CWgvtMZ3.js";import{am as Ut,az as Dt,X as Ot,z as rt,c,r as n,D as C,L as Y,A as it,ah as ht,v as i,s as l,aJ as st,$ as Vt,C as _t,B as q}from"../chunks/BLOI8AtL.js";import{s as J}from"../chunks/C8CAJf1e.js";import{i as L}from"../chunks/DpaHipqp.js";import{e as H,i as K,a as R,s as Rt}from"../chunks/Bvh40Bt5.js";import{h as St,e as G}from"../chunks/B2hL6-jM.js";import{I as zt,s as Z,R as Ct,t as ut,a as Mt,S as wt,b as Pt,T as jt}from"../chunks/C9BACT8Z.js";import{p as $,b as Ft}from"../chunks/D6mpIuce.js";import{i as nt}from"../chunks/Dss2tMcf.js";import{b as mt}from"../chunks/CKWB6iru.js";function It(r){var o,s,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var h=r.length;for(o=0;o<h;o++)r[o]&&(s=It(r[o]))&&(t&&(t+=" "),t+=s)}else for(s in r)r[s]&&(t&&(t+=" "),t+=s);return t}function Nt(){for(var r,o,s=0,t="",h=arguments.length;s<h;s++)(r=arguments[s])&&(o=It(r))&&(t&&(t+=" "),t+=o);return t}function qt(r){return typeof r=="object"?Nt(r):r??""}function Bt(r,o,s){var t=Ut(r,o);t&&t.set&&(r[o]=s,Dt(()=>{r[o]=null}))}function xt(r){return function(...o){var s=o[0];return s.preventDefault(),r==null?void 0:r.apply(this,o)}}function Jt(r,o){var u;var s=(u=r.$$events)==null?void 0:u[o.type],t=Ot(s)?s.slice():s==null?[]:[s];for(var h of t)h.call(this,o)}var Wt=p("<strong> </strong>");function j(r,o){rt(o,!1);let s=$(o,"agentIdx",8),t=$(o,"highlight",8,!1);nt();var h=Wt(),u=c(h,!0);n(h),C((v,x)=>{Z(h,qt(v),"svelte-2m8qed"),J(u,x)},[()=>t()?"agent"+s().padStart(2,"0"):"",()=>zt(s())],Y),d(r,h),it()}function Xt(r,o){rt(o,!1);let s=$(o,"text",8);function t(v){const x=/Agent\[(\d+)\]/g,A=[];let U=0,D;for(;(D=x.exec(v))!==null;)D.index>U&&A.push({text:v.slice(U,D.index),agentIdx:null,isAgentTag:!1}),A.push({text:D[0],agentIdx:parseInt(D[1]),isAgentTag:!0}),U=x.lastIndex;if(U<v.length){var M=v.slice(U);Object.entries(Ct).forEach(([T,S])=>{M=M.replaceAll(T,S)}),A.push({text:M,agentIdx:null,isAgentTag:!1})}return{parts:A}}nt();var h=pt(),u=ht(h);return H(u,1,()=>t(s()).parts,K,(v,x)=>{var A=pt(),U=ht(A);{var D=T=>{const S=Y(()=>{var B;return((B=i(x).agentIdx)==null?void 0:B.toString())??""});j(T,{get agentIdx(){return i(S)},highlight:!0})},M=T=>{var S=Tt();C(()=>J(S,i(x).text)),d(T,S)};L(U,T=>{i(x).isAgentTag?T(D):T(M,!1)})}d(v,A)}),d(r,h),Bt(o,"formatTalkText",t),it({formatTalkText:t})}var Gt=p("<iconify-icon></iconify-icon>",2),Ht=p("<iconify-icon></iconify-icon>",2),Kt=p("<iconify-icon></iconify-icon>",2),Qt=p("<iconify-icon></iconify-icon>",2),Yt=p("<iconify-icon></iconify-icon>",2),Zt=p("<iconify-icon></iconify-icon>",2),$t=p("<iconify-icon></iconify-icon>",2),te=p("<li><!> </li>"),ee=p('<section class="agent-section"><h3 class="svelte-1cf5h64">エージェント</h3> <ul class="svelte-1cf5h64"></ul></section>'),ae=p("<li><!> <!></li>"),se=p('<section class="talks-section"><h3 class="svelte-1cf5h64">会話</h3> <ul class="talks svelte-1cf5h64"></ul></section>'),re=p("<li><!> が <!> に投票</li>"),ie=p('<section class="votes-section"><h3 class="svelte-1cf5h64">投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),ne=p('<section class="execution-section"><h3 class="svelte-1cf5h64">追放</h3> <p><!> を追放</p></section>'),oe=p("<li><!> が <!> に投票</li>"),le=p('<section class="attack-votes-section"><h3 class="svelte-1cf5h64">襲撃投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),ce=p("<p><!> を襲撃: <strong> </strong></p>"),ve=p("<p>襲撃対象なし</p>"),_e=p('<section class="attack-section"><h3 class="svelte-1cf5h64">襲撃</h3> <!></section>'),de=p('<section class="divine-section"><h3 class="svelte-1cf5h64">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></section>'),ue=p('<section class="result-section"><h3 class="svelte-1cf5h64">結果</h3> <p><strong> </strong> が勝利</p></section>'),ge=p('<div class="day-column svelte-1cf5h64"><div class="day-section svelte-1cf5h64"><h2 class="svelte-1cf5h64"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="scrollable-content svelte-1cf5h64"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function fe(r,o){rt(o,!1);let s=$(o,"dayIdx",8),t=$(o,"dayStatus",8);nt();var h=ge(),u=c(h),v=c(u),x=c(v),A=l(x);{var U=e=>{var a=Gt();R(a,"inline",!0),R(a,"icon","mdi:conversation"),d(e,a)};L(A,e=>{t().talks.length>0&&e(U)})}var D=l(A,2);{var M=e=>{var a=Ht();R(a,"inline",!0),R(a,"icon","mdi:vote"),d(e,a)};L(D,e=>{t().votes.length>0&&e(M)})}var T=l(D,2);{var S=e=>{var a=Kt();R(a,"inline",!0),R(a,"icon","mdi:account-remove"),d(e,a)};L(T,e=>{t().execution&&e(S)})}var B=l(T,2);{var ot=e=>{var a=Qt();R(a,"inline",!0),R(a,"icon","mdi:vote"),d(e,a)};L(B,e=>{t().attackVotes.length>0&&e(ot)})}var W=l(B,2);{var tt=e=>{var a=Yt();R(a,"inline",!0),R(a,"icon","mdi:sword"),d(e,a)};L(W,e=>{t().attack&&e(tt)})}var et=l(W,2);{var lt=e=>{var a=Zt();R(a,"inline",!0),R(a,"icon","mdi:account-eye"),d(e,a)};L(et,e=>{t().divine&&e(lt)})}var _=l(et,2);{var g=e=>{var a=$t();R(a,"inline",!0),R(a,"icon","mdi:trophy"),d(e,a)};L(_,e=>{t().result&&e(g)})}n(v);var m=l(v,2),b=c(m);{var z=e=>{var a=ee(),I=l(c(a),2);H(I,5,()=>Object.entries(t().agents),K,(E,y)=>{let f=()=>i(y)[0],k=()=>i(y)[1];var V=te(),w=c(V);j(w,{get agentIdx(){return f()}});var vt=l(w);n(V),C(At=>{Z(V,`${At??""} svelte-1cf5h64`),ut(V,"over",k().status!=="ALIVE"),J(vt,` ${Mt[k().role]??"NULL"} -
                ${wt[k().status]??"NULL"}`)},[()=>"agent"+f().padStart(2,"0")],Y),d(E,V)}),n(I),n(a),d(e,a)};L(b,e=>{Object.keys(t().agents).length>0&&e(z)})}var F=l(b,2);{var N=e=>{var a=se(),I=l(c(a),2);H(I,5,()=>t().talks,K,(E,y)=>{var f=ae(),k=c(f);j(k,{get agentIdx(){return i(y).agentIdx}});var V=l(k,2);Xt(V,{get text(){return i(y).text}}),n(f),C(w=>{Z(f,`${w??""} svelte-1cf5h64`),ut(f,"over",i(y).text==="Over")},[()=>"talk agent"+i(y).agentIdx.padStart(2,"0")],Y),d(E,f)}),n(I),n(a),d(e,a)};L(F,e=>{t().talks.length>0&&e(N)})}var O=l(F,2);{var X=e=>{var a=ie(),I=l(c(a),2);H(I,5,()=>t().votes,K,(E,y)=>{var f=re(),k=c(f);j(k,{get agentIdx(){return i(y).agentIdx}});var V=l(k,2);j(V,{get agentIdx(){return i(y).targetIdx},highlight:!0}),st(),n(f),C(w=>Z(f,`${w??""} svelte-1cf5h64`),[()=>"agent"+i(y).agentIdx.padStart(2,"0")],Y),d(E,f)}),n(I),n(a),d(e,a)};L(O,e=>{t().votes.length>0&&e(X)})}var Q=l(O,2);{var ct=e=>{var a=ne(),I=l(c(a),2),E=c(I);j(E,{get agentIdx(){return t().execution.agentIdx},highlight:!0}),st(),n(I),n(a),d(e,a)};L(Q,e=>{t().execution&&e(ct)})}var at=l(Q,2);{var yt=e=>{var a=le(),I=l(c(a),2);H(I,5,()=>t().attackVotes,K,(E,y)=>{var f=oe(),k=c(f);j(k,{get agentIdx(){return i(y).agentIdx}});var V=l(k,2);j(V,{get agentIdx(){return i(y).targetIdx},highlight:!0}),st(),n(f),C(w=>Z(f,`${w??""} svelte-1cf5h64`),[()=>"agent"+i(y).agentIdx.padStart(2,"0")],Y),d(E,f)}),n(I),n(a),d(e,a)};L(at,e=>{t().attackVotes.length>0&&e(yt)})}var gt=l(at,2);{var kt=e=>{var a=_e(),I=l(c(a),2);{var E=f=>{var k=ce(),V=c(k);j(V,{get agentIdx(){return t().attack.targetIdx},highlight:!0});var w=l(V,2),vt=c(w,!0);n(w),n(k),C(()=>J(vt,t().attack.isSuccessful?"成功":"失敗")),d(f,k)},y=f=>{var k=ve();d(f,k)};L(I,f=>{t().attack.targetIdx!=="-1"?f(E):f(y,!1)})}n(a),d(e,a)};L(gt,e=>{t().attack&&e(kt)})}var ft=l(gt,2);{var bt=e=>{var a=de(),I=l(c(a),2),E=c(I);j(E,{get agentIdx(){return t().divine.agentIdx},highlight:!0});var y=l(E,2);j(y,{get agentIdx(){return t().divine.targetIdx},highlight:!0});var f=l(y,2),k=c(f,!0);n(f),n(I),n(a),C(()=>J(k,Pt[t().divine.result]??"NULL")),d(e,a)};L(ft,e=>{t().divine&&e(bt)})}var Lt=l(ft,2);{var Et=e=>{var a=ue(),I=l(c(a),2),E=c(I),y=c(E,!0);n(E),st(),n(I),n(a),C(()=>J(y,jt[t().result.winSide])),d(e,a)};L(Lt,e=>{t().result&&e(Et)})}n(m),n(u),n(h),C(()=>J(x,`Day ${s()??""} `)),d(r,h),it()}function dt(r){const o=r.split(/\r?\n/).filter(t=>t.trim()),s={};return o.forEach(t=>{const[h,u,...v]=t.split(",");s[h]||(s[h]=pe()),he(s[h],u,v)}),s}function pe(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function he(r,o,s){const h={status:([u,v,x,A])=>{r.agents[u]={role:v,status:x,name:A}},talk:([u,v,x,A])=>{r.talks.push({talkIdx:u,turnIdx:v,agentIdx:x,text:A})},vote:([u,v])=>{r.votes.push({agentIdx:u,targetIdx:v})},execute:([u,v])=>{r.execution={agentIdx:u,role:v}},divine:([u,v,x])=>{r.divine={agentIdx:u,targetIdx:v,result:x}},attackVote:([u,v])=>{r.attackVotes.push({agentIdx:u,targetIdx:v})},attack:([u,v])=>{r.attack={targetIdx:u,isSuccessful:v==="true"}},result:([u,v,x])=>{r.result={villagers:u,werewolves:v,winSide:x}}}[o];h&&h(s)}var me=p('<link rel="stylesheet">'),xe=p("<option> </option>"),Ie=p('<div class="tab-wrapper svelte-1vycxas"><button class="tab-button svelte-1vycxas"> </button> <button class="close-button svelte-1vycxas" aria-label="Close tab">✕</button></div>'),ye=p('<div class="log-container svelte-1vycxas"><div class="tabs-container svelte-1vycxas"><div class="tabs svelte-1vycxas"></div></div> <div class="days-container svelte-1vycxas"></div></div>'),ke=p('<main class="svelte-1vycxas"><div class="input-controls svelte-1vycxas"><div class="select-container svelte-1vycxas"><select class="svelte-1vycxas"><option>サンプルログを選択</option><!></select></div> <div tabindex="0" class="file-input-container svelte-1vycxas" role="button"><div class="file-input-label svelte-1vycxas">ファイルを選択もしくはドラッグアンドドロップしてください</div></div> <input id="fileInput" type="file" accept=".log" multiple hidden></div> <style></style> <!></main>');function Ce(r,o){rt(o,!1);let s=_t([]),t=_t(0);function h(_){const g=_.target;Array.from(g.files||[]).forEach(b=>{const z=new FileReader;z.onload=F=>{var O;const N=((O=F.target)==null?void 0:O.result)??"";q(s,[...i(s),{name:b.name,data:dt(N)}]),q(t,i(s).length-1)},z.readAsText(b)}),g&&(g.value="")}function u(_){var m;Array.from(((m=_.dataTransfer)==null?void 0:m.files)||[]).forEach(b=>{const z=new FileReader;z.onload=F=>{var O;const N=((O=F.target)==null?void 0:O.result)??"";q(s,[...i(s),{name:b.name,data:dt(N)}]),q(t,i(s).length-1)},z.readAsText(b)})}function v(_){q(s,i(s).filter((g,m)=>m!==_)),i(t)>=i(s).length&&q(t,i(s).length-1)}const x=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>P(()=>import("../chunks/CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>P(()=>import("../chunks/Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>P(()=>import("../chunks/D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>P(()=>import("../chunks/BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>P(()=>import("../chunks/Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>P(()=>import("../chunks/B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>P(()=>import("../chunks/CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>P(()=>import("../chunks/JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>P(()=>import("../chunks/gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>P(()=>import("../chunks/oHz1b7i6.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>P(()=>import("../chunks/K60EV997.js"),[],import.meta.url)})).map(([_,g])=>({name:_.split("/").pop()||"",path:`${mt}${_.replace("/static","")}`}));async function A(_,g){try{const b=await(await fetch(_)).text();q(s,[...i(s),{name:g,data:dt(b)}]),q(t,i(s).length-1)}catch(m){console.error("Error loading asset log:",m)}}let U=_t(null);nt();var D=ke();St(_=>{var g=me();Vt.title="aiwolf-nlp-viewer",Rt(g,"href",`${mt??""}/global.css`),d(_,g)});var M=c(D),T=c(M),S=c(T),B=c(S);B.value=((B.__value="")==null,"");var ot=l(B);H(ot,1,()=>x,K,(_,g)=>{var m=xe(),b={},z=c(m,!0);n(m),C(()=>{b!==(b=i(g).path)&&(m.value=(m.__value=i(g).path)==null?"":i(g).path),J(z,i(g).name)}),d(_,m)}),n(S),n(T);var W=l(T,2),tt=l(W,2);Ft(tt,_=>q(U,_),()=>i(U)),n(M);var et=l(M,4);{var lt=_=>{var g=ye(),m=c(g),b=c(m);H(b,5,()=>i(s),K,(F,N,O)=>{var X=Ie(),Q=c(X),ct=c(Q,!0);n(Q);var at=l(Q,2);n(X),C(()=>{ut(X,"active",i(t)===O),J(ct,i(N).name)}),G("click",Q,()=>q(t,O)),G("click",at,()=>v(O)),d(F,X)}),n(b),n(m);var z=l(m,2);H(z,5,()=>Object.entries(i(s)[i(t)].data),K,(F,N)=>{let O=()=>i(N)[0],X=()=>i(N)[1];fe(F,{get dayIdx(){return O()},get dayStatus(){return X()}})}),n(z),n(g),d(_,g)};L(et,_=>{i(s).length>0&&_(lt)})}n(D),G("change",S,_=>{const g=_.currentTarget.value;if(g){const m=x.find(b=>b.path===g);m&&A(m.path,m.name),_.currentTarget.value=""}}),G("dragover",W,xt(function(_){Jt.call(this,o,_)})),G("drop",W,xt(u)),G("click",W,()=>{var _;return(_=i(U))==null?void 0:_.click()}),G("keydown",W,_=>{var g;_.key==="Enter"&&((g=i(U))==null||g.click())}),G("change",tt,h),d(r,D),it()}export{Ce as component};
