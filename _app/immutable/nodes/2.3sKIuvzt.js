import{p as Z,_ as w,b as Tt}from"../chunks/preload-helper.Cm8Mow3V.js";import{a as d,t as h,c as ht,b as Dt}from"../chunks/disclose-version.BhdA-am7.js";import{i as rt}from"../chunks/legacy.DE9w-RQJ.js";import{h as pt,o as Ot,ad as Ut,B as Rt,g as nt,k as c,t as V,l as n,v as s,j as ot,ar as Q,i as xt,m as l,aG as it,$ as St,w as j,x as _t}from"../chunks/runtime.BdflQa79.js";import{s as G,h as Vt,e as H}from"../chunks/render.DQoJ6lLy.js";import{i as b}from"../chunks/if.BU7XQiHK.js";import{e as Y,i as $,a as R,s as Mt}from"../chunks/attributes.DIUH77Cf.js";import{b as mt}from"../chunks/paths.Dv1WxH_m.js";function X(i,o){var r=i.__className,t=wt(o);pt&&i.className===t?i.__className=t:(r!==t||pt&&i.className!==t)&&(o==null?i.removeAttribute("class"):i.className=t,i.__className=t)}function wt(i){return i??""}function ut(i,o,r){if(r){if(i.classList.contains(o))return;i.classList.add(o)}else{if(!i.classList.contains(o))return;i.classList.remove(o)}}function Ct(i,o,r){var t=Ut(i,o);t&&t.set&&(i[o]=r,Ot(()=>{i[o]=null}))}function It(i){return function(...o){var r=o[0];return r.preventDefault(),i==null?void 0:i.apply(this,o)}}function Pt(i,o){var u;var r=(u=i.$$events)==null?void 0:u[o.type],t=Rt(r)?r.slice():r==null?[]:[r];for(var x of t)x.call(this,o)}const zt={VILLAGER:"村人",SEER:"占い師",MEDIUM:"霊能者",BODYGUARD:"騎士",WEREWOLF:"人狼",POSSESSED:"狂人"},Nt={ALIVE:"生存",DEAD:"死亡"},Ft={HUMAN:"人間",WEREWOLF:"人狼"},jt={VILLAGER:"村人陣営",WEREWOLF:"人狼陣営"};var Wt=h("<strong> </strong>");function C(i,o){nt(o,!1);let r=Z(o,"agentIdx",8),t=Z(o,"highlight",8,!1);rt();var x=Wt();const u=Q(()=>`${(t()?"agent"+r().padStart(2,"0"):"")??""} svelte-2m8qed`);var v=c(x);V(()=>G(v,`Agent[${r().padStart(2,"0")??""}]`)),n(x),V(()=>X(x,s(u))),d(i,x),ot()}function Gt(i,o){nt(o,!1);let r=Z(o,"text",8);function t(v){const k=/Agent\[(\d+)\]/g,T=[];let D=0,O;for(;(O=k.exec(v))!==null;)O.index>D&&T.push({text:v.slice(D,O.index),agentIdx:null,isAgentTag:!1}),T.push({text:O[0],agentIdx:parseInt(O[1]),isAgentTag:!0}),D=k.lastIndex;return D<v.length&&T.push({text:v.slice(D),agentIdx:null,isAgentTag:!1}),{parts:T}}rt();var x=ht(),u=xt(x);return Y(u,1,()=>t(r()).parts,$,(v,k)=>{var T=ht(),D=xt(T);{var O=S=>{var P=Q(()=>{var W;return((W=s(k).agentIdx)==null?void 0:W.toString())??""});C(S,{get agentIdx(){return s(P)},highlight:!0})},J=S=>{var P=Dt();V(()=>G(P,s(k).text)),d(S,P)};b(D,S=>{s(k).isAgentTag?S(O):S(J,!1)})}d(v,T)}),d(i,x),Ct(o,"formatTalkText",t),ot({formatTalkText:t})}var qt=h("<iconify-icon></iconify-icon>",2),Bt=h("<iconify-icon></iconify-icon>",2),Ht=h("<iconify-icon></iconify-icon>",2),Yt=h("<iconify-icon></iconify-icon>",2),$t=h("<iconify-icon></iconify-icon>",2),Jt=h("<iconify-icon></iconify-icon>",2),Kt=h("<iconify-icon></iconify-icon>",2),Qt=h("<li><!> </li>"),Xt=h('<section class="agent-section"><h3 class="svelte-1cf5h64">エージェント</h3> <ul class="svelte-1cf5h64"></ul></section>'),Zt=h("<li><!> <!></li>"),te=h('<section class="talks-section"><h3 class="svelte-1cf5h64">会話</h3> <ul class="talks svelte-1cf5h64"></ul></section>'),ee=h("<li><!> が <!> に投票</li>"),ae=h('<section class="votes-section"><h3 class="svelte-1cf5h64">投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),se=h('<section class="execution-section"><h3 class="svelte-1cf5h64">追放</h3> <p><!> を追放</p></section>'),ie=h("<li><!> が <!> に投票</li>"),re=h('<section class="attack-votes-section"><h3 class="svelte-1cf5h64">襲撃投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),ne=h("<p><!> を襲撃: <strong> </strong></p>"),oe=h("<p>襲撃対象なし</p>"),le=h('<section class="attack-section"><h3 class="svelte-1cf5h64">襲撃</h3> <!></section>'),ce=h('<section class="divine-section"><h3 class="svelte-1cf5h64">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></section>'),ve=h('<section class="result-section"><h3 class="svelte-1cf5h64">結果</h3> <p><strong> </strong> が勝利</p></section>'),_e=h('<div class="day-column svelte-1cf5h64"><div class="day-section svelte-1cf5h64"><h2 class="svelte-1cf5h64"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="scrollable-content svelte-1cf5h64"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function de(i,o){nt(o,!1);let r=Z(o,"dayIdx",8),t=Z(o,"dayStatus",8);rt();var x=_e(),u=c(x),v=c(u),k=c(v),T=l(k);{var D=e=>{var a=qt();R(a,"inline",!0),R(a,"icon","mdi:conversation"),d(e,a)};b(T,e=>{t().talks.length>0&&e(D)})}var O=l(T,2);{var J=e=>{var a=Bt();R(a,"inline",!0),R(a,"icon","mdi:vote"),d(e,a)};b(O,e=>{t().votes.length>0&&e(J)})}var S=l(O,2);{var P=e=>{var a=Ht();R(a,"inline",!0),R(a,"icon","mdi:account-remove"),d(e,a)};b(S,e=>{t().execution&&e(P)})}var W=l(S,2);{var lt=e=>{var a=Yt();R(a,"inline",!0),R(a,"icon","mdi:vote"),d(e,a)};b(W,e=>{t().attackVotes.length>0&&e(lt)})}var q=l(W,2);{var tt=e=>{var a=$t();R(a,"inline",!0),R(a,"icon","mdi:sword"),d(e,a)};b(q,e=>{t().attack&&e(tt)})}var et=l(q,2);{var ct=e=>{var a=Jt();R(a,"inline",!0),R(a,"icon","mdi:account-eye"),d(e,a)};b(et,e=>{t().divine&&e(ct)})}var _=l(et,2);{var g=e=>{var a=Kt();R(a,"inline",!0),R(a,"icon","mdi:trophy"),d(e,a)};b(_,e=>{t().result&&e(g)})}n(v);var p=l(v,2),y=c(p);{var M=e=>{var a=Xt(),m=l(c(a),2);Y(m,5,()=>Object.entries(t().agents),$,(L,I)=>{let f=()=>s(I)[0],E=()=>s(I)[1];var A=Qt();const F=Q(()=>`${"agent"+f().padStart(2,"0")} svelte-1cf5h64`);var st=c(A);C(st,{get agentIdx(){return f()}});var At=l(st);n(A),V(()=>{X(A,s(F)),ut(A,"over",E().status!=="ALIVE"),G(At,` ${zt[E().role]??"NULL"??""} -
                ${Nt[E().status]??"NULL"??""}`)}),d(L,A)}),n(m),n(a),d(e,a)};b(y,e=>{Object.keys(t().agents).length>0&&e(M)})}var z=l(y,2);{var N=e=>{var a=te(),m=l(c(a),2);Y(m,5,()=>t().talks,$,(L,I)=>{var f=Zt();const E=Q(()=>`${"talk agent"+s(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=c(f);C(A,{get agentIdx(){return s(I).agentIdx}});var F=l(A,2);Gt(F,{get text(){return s(I).text}}),n(f),V(()=>{X(f,s(E)),ut(f,"over",s(I).text==="Over")}),d(L,f)}),n(m),n(a),d(e,a)};b(z,e=>{t().talks.length>0&&e(N)})}var U=l(z,2);{var B=e=>{var a=ae(),m=l(c(a),2);Y(m,5,()=>t().votes,$,(L,I)=>{var f=ee();const E=Q(()=>`${"agent"+s(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=c(f);C(A,{get agentIdx(){return s(I).agentIdx}});var F=l(A,2);C(F,{get agentIdx(){return s(I).targetIdx},highlight:!0}),it(),n(f),V(()=>X(f,s(E))),d(L,f)}),n(m),n(a),d(e,a)};b(U,e=>{t().votes.length>0&&e(B)})}var K=l(U,2);{var vt=e=>{var a=se(),m=l(c(a),2),L=c(m);C(L,{get agentIdx(){return t().execution.agentIdx},highlight:!0}),it(),n(m),n(a),d(e,a)};b(K,e=>{t().execution&&e(vt)})}var at=l(K,2);{var kt=e=>{var a=re(),m=l(c(a),2);Y(m,5,()=>t().attackVotes,$,(L,I)=>{var f=ie();const E=Q(()=>`${"agent"+s(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=c(f);C(A,{get agentIdx(){return s(I).agentIdx}});var F=l(A,2);C(F,{get agentIdx(){return s(I).targetIdx},highlight:!0}),it(),n(f),V(()=>X(f,s(E))),d(L,f)}),n(m),n(a),d(e,a)};b(at,e=>{t().attackVotes.length>0&&e(kt)})}var gt=l(at,2);{var yt=e=>{var a=le(),m=l(c(a),2);{var L=f=>{var E=ne(),A=c(E);C(A,{get agentIdx(){return t().attack.targetIdx},highlight:!0});var F=l(A,2),st=c(F,!0);n(F),n(E),V(()=>G(st,t().attack.isSuccessful?"成功":"失敗")),d(f,E)},I=f=>{var E=oe();d(f,E)};b(m,f=>{t().attack.targetIdx!=="-1"?f(L):f(I,!1)})}n(a),d(e,a)};b(gt,e=>{t().attack&&e(yt)})}var ft=l(gt,2);{var bt=e=>{var a=ce(),m=l(c(a),2),L=c(m);C(L,{get agentIdx(){return t().divine.agentIdx},highlight:!0});var I=l(L,2);C(I,{get agentIdx(){return t().divine.targetIdx},highlight:!0});var f=l(I,2),E=c(f,!0);n(f),n(m),n(a),V(()=>G(E,Ft[t().divine.result]??"NULL")),d(e,a)};b(ft,e=>{t().divine&&e(bt)})}var Lt=l(ft,2);{var Et=e=>{var a=ve(),m=l(c(a),2),L=c(m),I=c(L,!0);n(L),it(),n(m),n(a),V(()=>G(I,jt[t().result.winSide])),d(e,a)};b(Lt,e=>{t().result&&e(Et)})}n(p),n(u),n(x),V(()=>G(k,`Day ${r()??""} `)),d(i,x),ot()}function dt(i){const o=i.split(/\r?\n/).filter(t=>t.trim()),r={};return o.forEach(t=>{const[x,u,...v]=t.split(",");r[x]||(r[x]=ue()),ge(r[x],u,v)}),r}function ue(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function ge(i,o,r){const x={status:([u,v,k,T])=>{i.agents[u]={role:v,status:k,name:T}},talk:([u,v,k,T])=>{i.talks.push({talkIdx:u,turnIdx:v,agentIdx:k,text:T})},vote:([u,v])=>{i.votes.push({agentIdx:u,targetIdx:v})},execute:([u,v])=>{i.execution={agentIdx:u,role:v}},divine:([u,v,k])=>{i.divine={agentIdx:u,targetIdx:v,result:k}},attackVote:([u,v])=>{i.attackVotes.push({agentIdx:u,targetIdx:v})},attack:([u,v])=>{i.attack={targetIdx:u,isSuccessful:v==="true"}},result:([u,v,k])=>{i.result={villagers:u,werewolves:v,winSide:k}}}[o];x&&x(r)}var fe=h('<link rel="stylesheet">'),he=h("<option> </option>"),pe=h('<div class="tab-wrapper svelte-1vycxas"><button class="tab-button svelte-1vycxas"> </button> <button class="close-button svelte-1vycxas" aria-label="Close tab">✕</button></div>'),xe=h('<div class="log-container svelte-1vycxas"><div class="tabs-container svelte-1vycxas"><div class="tabs svelte-1vycxas"></div></div> <div class="days-container svelte-1vycxas"></div></div>'),me=h('<main class="svelte-1vycxas"><div class="input-controls svelte-1vycxas"><div class="select-container svelte-1vycxas"><select class="svelte-1vycxas"><option>サンプルログを選択</option><!></select></div> <div tabindex="0" class="file-input-container svelte-1vycxas" role="button"><div class="file-input-label svelte-1vycxas">ファイルを選択もしくはドラッグアンドドロップしてください</div></div> <input id="fileInput" type="file" accept=".log" multiple hidden></div> <style></style> <!></main>');function De(i,o){nt(o,!1);let r=_t([]),t=_t(0);function x(_){const g=_.target;Array.from(g.files||[]).forEach(y=>{const M=new FileReader;M.onload=z=>{var U;const N=((U=z.target)==null?void 0:U.result)??"";j(r,[...s(r),{name:y.name,data:dt(N)}]),j(t,s(r).length-1)},M.readAsText(y)}),g&&(g.value="")}function u(_){var p;Array.from(((p=_.dataTransfer)==null?void 0:p.files)||[]).forEach(y=>{const M=new FileReader;M.onload=z=>{var U;const N=((U=z.target)==null?void 0:U.result)??"";j(r,[...s(r),{name:y.name,data:dt(N)}]),j(t,s(r).length-1)},M.readAsText(y)})}function v(_){j(r,s(r).filter((g,p)=>p!==_)),s(t)>=s(r).length&&j(t,s(r).length-1)}const k=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>w(()=>import("../chunks/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>w(()=>import("../chunks/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>w(()=>import("../chunks/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>w(()=>import("../chunks/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>w(()=>import("../chunks/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>w(()=>import("../chunks/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>w(()=>import("../chunks/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>w(()=>import("../chunks/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>w(()=>import("../chunks/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>w(()=>import("../chunks/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.oHz1b7i6.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>w(()=>import("../chunks/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.K60EV997.js"),[],import.meta.url)})).map(([_,g])=>({name:_.split("/").pop()||"",path:`${mt}${_.replace("/static","")}`}));async function T(_,g){try{const y=await(await fetch(_)).text();j(r,[...s(r),{name:g,data:dt(y)}]),j(t,s(r).length-1)}catch(p){console.error("Error loading asset log:",p)}}let D=_t(null);rt();var O=me();Vt(_=>{var g=fe();St.title="aiwolf-nlp-viewer",Mt(g,"href",`${mt??""}/global.css`),d(_,g)});var J=c(O),S=c(J),P=c(S),W=c(P);W.value=((W.__value="")==null,"");var lt=l(W);Y(lt,1,()=>k,$,(_,g)=>{var p=he(),y={},M=c(p,!0);n(p),V(()=>{y!==(y=s(g).path)&&(p.value=(p.__value=s(g).path)==null?"":s(g).path),G(M,s(g).name)}),d(_,p)}),n(P),n(S);var q=l(S,2),tt=l(q,2);Tt(tt,_=>j(D,_),()=>s(D)),n(J);var et=l(J,4);{var ct=_=>{var g=xe(),p=c(g),y=c(p);Y(y,5,()=>s(r),$,(z,N,U)=>{var B=pe(),K=c(B),vt=c(K,!0);n(K);var at=l(K,2);n(B),V(()=>{ut(B,"active",s(t)===U),G(vt,s(N).name)}),H("click",K,()=>j(t,U)),H("click",at,()=>v(U)),d(z,B)}),n(y),n(p);var M=l(p,2);Y(M,5,()=>Object.entries(s(r)[s(t)].data),$,(z,N)=>{let U=()=>s(N)[0],B=()=>s(N)[1];de(z,{get dayIdx(){return U()},get dayStatus(){return B()}})}),n(M),n(g),d(_,g)};b(et,_=>{s(r).length>0&&_(ct)})}n(O),H("change",P,_=>{const g=_.currentTarget.value;if(g){const p=k.find(y=>y.path===g);p&&T(p.path,p.name),_.currentTarget.value=""}}),H("dragover",q,It(function(_){Pt.call(this,o,_)})),H("drop",q,It(u)),H("click",q,()=>{var _;return(_=s(D))==null?void 0:_.click()}),H("keydown",q,_=>{var g;_.key==="Enter"&&((g=s(D))==null||g.click())}),H("change",tt,x),d(i,O),ot()}export{De as component};
