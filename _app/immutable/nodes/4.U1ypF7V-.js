import{p as Z,_ as M}from"../chunks/WARW8F66.js";import"../chunks/Bg9kRutz.js";import{p as rt,c as n,f as r,i as D,a as it,aw as vt,g as o,x as yt,h as i,aF as at,aD as gt,s as H,$ as kt}from"../chunks/sDBeb3T2.js";import{s as N,d as Lt}from"../chunks/CEqd99YM.js";import{i as y}from"../chunks/Cs_QwUJL.js";import{e as B,i as G}from"../chunks/DDcytoOe.js";import{t as v,a as l,c as pt,b as Et}from"../chunks/CS_i3HMU.js";import{h as wt}from"../chunks/CzlQwNva.js";import{s as I}from"../chunks/zR9ABBex.js";import{I as Tt,s as Y,c as At,R as Ut,t as ct,a as Ot,S as Vt,b as St,T as Dt}from"../chunks/BsZDHtIb.js";import{p as Q}from"../chunks/BazZ8WVp.js";import{b as Rt}from"../chunks/VHEfhAve.js";/* empty css                */function ft(b){const L=b.split(/\r?\n/).filter(a=>a.trim()),E={};return L.forEach(a=>{const[c,d,...s]=a.split(",");E[c]||(E[c]=Ct()),Mt(E[c],d,s)}),E}function Ct(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function Mt(b,L,E){const c={status:([d,s,u,w])=>{b.agents[d]={role:s,status:u,name:w}},talk:([d,s,u,w])=>{b.talks.push({talkIdx:d,turnIdx:s,agentIdx:u,text:w})},vote:([d,s])=>{b.votes.push({agentIdx:d,targetIdx:s})},execute:([d,s])=>{b.execution={agentIdx:d,role:s}},divine:([d,s,u])=>{b.divine={agentIdx:d,targetIdx:s,result:u}},attackVote:([d,s])=>{b.attackVotes.push({agentIdx:d,targetIdx:s})},attack:([d,s])=>{b.attack={targetIdx:d,isSuccessful:s==="true"}},result:([d,s,u])=>{b.result={villagers:d,werewolves:s,winSide:u}}}[L];c&&c(E)}var zt=v("<strong> </strong>");function z(b,L){rt(L,!0);let E=Z(L,"agentIdx",3,""),a=Z(L,"highlight",3,!1);var c=zt(),d=n(c,!0);r(c),D((s,u)=>{Y(c,At(s),"svelte-dj3b7l"),N(d,u)},[()=>a()?"agent"+E().padStart(2,"0"):"",()=>Tt(E())]),l(b,c),it()}function Pt(b,L){rt(L,!0);let E=Z(L,"text",3,"");function a(s){const u=/Agent\[(\d+)\]/g,w=[];let V=0,A;for(;(A=u.exec(s))!==null;)A.index>V&&w.push({text:s.slice(V,A.index),agentIdx:null,isAgentTag:!1}),w.push({text:A[0],agentIdx:parseInt(A[1]),isAgentTag:!0}),V=u.lastIndex;if(V<s.length){var S=s.slice(V);Object.entries(Ut).forEach(([T,P])=>{S=S.replaceAll(T,P)}),w.push({text:S,agentIdx:null,isAgentTag:!1})}return{parts:w}}var c=pt(),d=vt(c);B(d,17,()=>a(E()).parts,G,(s,u)=>{var w=pt(),V=vt(w);{var A=T=>{const P=yt(()=>{var q;return((q=o(u).agentIdx)==null?void 0:q.toString())??""});z(T,{get agentIdx(){return o(P)},highlight:!0})},S=T=>{var P=Et();D(()=>N(P,o(u).text)),l(T,P)};y(V,T=>{o(u).isAgentTag?T(A):T(S,!1)})}l(s,w)}),l(b,c),it()}var jt=v("<iconify-icon></iconify-icon>",2),Ft=v("<iconify-icon></iconify-icon>",2),Nt=v("<iconify-icon></iconify-icon>",2),qt=v("<iconify-icon></iconify-icon>",2),Wt=v("<iconify-icon></iconify-icon>",2),$t=v("<iconify-icon></iconify-icon>",2),Bt=v("<iconify-icon></iconify-icon>",2),Gt=v("<li><!> </li>"),Ht=v('<div><h3 class="text-lg font-bold my-2">エージェント</h3> <ul></ul></div>'),Jt=v("<li><!> <!></li>"),Kt=v('<div><h3 class="text-lg font-bold my-2">会話</h3> <ul></ul></div>'),Qt=v("<li><!> が <!> に投票</li>"),Xt=v('<div><h3 class="text-lg font-bold my-2">投票</h3> <ul></ul></div>'),Yt=v('<div><h3 class="text-lg font-bold my-2">追放</h3> <p><!> を追放</p></div>'),Zt=v("<li><!> が <!> に投票</li>"),te=v('<div><h3 class="text-lg font-bold my-2">襲撃投票</h3> <ul></ul></div>'),ee=v("<p><!> を襲撃: <strong> </strong></p>"),ae=v("<p>襲撃対象なし</p>"),re=v('<div><h3 class="text-lg font-bold my-2">襲撃</h3> <!></div>'),ie=v('<div><h3 class="text-lg font-bold my-2">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></div>'),oe=v('<div><h3 class="text-lg font-bold my-2">結果</h3> <p><strong> </strong> が勝利</p></div>'),ne=v('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><h2 class="text-xl font-bold pb-2"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="grow overflow-y-auto pr-4"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function se(b,L){rt(L,!0);let E=Z(L,"dayIdx",3,""),a=Z(L,"dayStatus",19,()=>({}));var c=ne(),d=n(c),s=n(d),u=n(s),w=i(u);{var V=t=>{var e=jt();I(e,"inline",!0),I(e,"icon","mdi:conversation"),l(t,e)};y(w,t=>{a().talks.length>0&&t(V)})}var A=i(w,2);{var S=t=>{var e=Ft();I(e,"inline",!0),I(e,"icon","mdi:vote"),l(t,e)};y(A,t=>{a().votes.length>0&&t(S)})}var T=i(A,2);{var P=t=>{var e=Nt();I(e,"inline",!0),I(e,"icon","mdi:account-remove"),l(t,e)};y(T,t=>{a().execution&&t(P)})}var q=i(T,2);{var tt=t=>{var e=qt();I(e,"inline",!0),I(e,"icon","mdi:vote"),l(t,e)};y(q,t=>{a().attackVotes.length>0&&t(tt)})}var J=i(q,2);{var et=t=>{var e=Wt();I(e,"inline",!0),I(e,"icon","mdi:sword"),l(t,e)};y(J,t=>{a().attack&&t(et)})}var X=i(J,2);{var ot=t=>{var e=$t();I(e,"inline",!0),I(e,"icon","mdi:account-eye"),l(t,e)};y(X,t=>{a().divine&&t(ot)})}var nt=i(X,2);{var m=t=>{var e=Bt();I(e,"inline",!0),I(e,"icon","mdi:trophy"),l(t,e)};y(nt,t=>{a().result&&t(m)})}r(s);var x=i(s,2),g=n(x);{var U=t=>{var e=Ht(),p=i(n(e),2);B(p,21,()=>Object.entries(a().agents),G,(k,f)=>{let _=()=>o(f)[0],h=()=>o(f)[1];var O=Gt(),C=n(O);z(C,{get agentIdx(){return _()}});var _t=i(C);r(O),D(bt=>{Y(O,`${bt??""} svelte-1xvg87g`),ct(O,"opacity-25",h().status!=="ALIVE"),N(_t,` ${Ot[h().role]??"NULL"} -
                ${Vt[h().status]??"NULL"}`)},[()=>"p-2 my-2 border-4 rounded-md agent"+_().padStart(2,"0")]),l(k,O)}),r(p),r(e),l(t,e)};y(g,t=>{Object.keys(a().agents).length>0&&t(U)})}var R=i(g,2);{var W=t=>{var e=Kt(),p=i(n(e),2);B(p,21,()=>a().talks,G,(k,f)=>{var _=Jt(),h=n(_);z(h,{get agentIdx(){return o(f).agentIdx}});var O=i(h,2);Pt(O,{get text(){return o(f).text}}),r(_),D(C=>{Y(_,`${C??""} svelte-1xvg87g`),ct(_,"opacity-25",o(f).text==="Over")},[()=>"p-2 my-2 border-4 rounded-md agent"+o(f).agentIdx.padStart(2,"0")]),l(k,_)}),r(p),r(e),l(t,e)};y(R,t=>{a().talks.length>0&&t(W)})}var j=i(R,2);{var F=t=>{var e=Xt(),p=i(n(e),2);B(p,21,()=>a().votes,G,(k,f)=>{var _=Qt(),h=n(_);z(h,{get agentIdx(){return o(f).agentIdx}});var O=i(h,2);z(O,{get agentIdx(){return o(f).targetIdx},highlight:!0}),at(),r(_),D(C=>Y(_,`${C??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+o(f).agentIdx.padStart(2,"0")]),l(k,_)}),r(p),r(e),l(t,e)};y(j,t=>{a().votes.length>0&&t(F)})}var $=i(j,2);{var st=t=>{var e=Yt(),p=i(n(e),2),k=n(p);z(k,{get agentIdx(){return a().execution.agentIdx},highlight:!0}),at(),r(p),r(e),l(t,e)};y($,t=>{a().execution&&t(st)})}var K=i($,2);{var lt=t=>{var e=te(),p=i(n(e),2);B(p,21,()=>a().attackVotes,G,(k,f)=>{var _=Zt(),h=n(_);z(h,{get agentIdx(){return o(f).agentIdx}});var O=i(h,2);z(O,{get agentIdx(){return o(f).targetIdx},highlight:!0}),at(),r(_),D(C=>Y(_,`${C??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+o(f).agentIdx.padStart(2,"0")]),l(k,_)}),r(p),r(e),l(t,e)};y(K,t=>{a().attackVotes.length>0&&t(lt)})}var dt=i(K,2);{var xt=t=>{var e=re(),p=i(n(e),2);{var k=_=>{var h=ee(),O=n(h);z(O,{get agentIdx(){return a().attack.targetIdx},highlight:!0});var C=i(O,2),_t=n(C,!0);r(C),r(h),D(()=>N(_t,a().attack.isSuccessful?"成功":"失敗")),l(_,h)},f=_=>{var h=ae();l(_,h)};y(p,_=>{a().attack.targetIdx!=="-1"?_(k):_(f,!1)})}r(e),l(t,e)};y(dt,t=>{a().attack&&t(xt)})}var ut=i(dt,2);{var mt=t=>{var e=ie(),p=i(n(e),2),k=n(p);z(k,{get agentIdx(){return a().divine.agentIdx},highlight:!0});var f=i(k,2);z(f,{get agentIdx(){return a().divine.targetIdx},highlight:!0});var _=i(f,2),h=n(_,!0);r(_),r(p),r(e),D(()=>N(h,St[a().divine.result]??"NULL")),l(t,e)};y(ut,t=>{a().divine&&t(mt)})}var ht=i(ut,2);{var It=t=>{var e=oe(),p=i(n(e),2),k=n(p),f=n(k,!0);r(k),at(),r(p),r(e),D(()=>N(f,Dt[a().result.winSide])),l(t,e)};y(ht,t=>{a().result&&t(It)})}r(x),r(d),r(c),D(()=>N(u,`Day ${E()??""} `)),l(b,c),it()}var le=v("<option> </option>"),_e=v('<div class="w-fit shrink-0 flex gap-0"><button class="btn"> </button> <button class="btn btn-error btn-square" aria-label="Close tab"><iconify-icon></iconify-icon></button></div>',2),ve=v('<div class="w-full shrink-0 overflow-x-auto flex gap-4 m-4"></div> <div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"></div>',1),ce=v('<main class="h-screen flex flex-col"><div class="navbar bg-base-100 flex justify-start gap-4 overflow-x-auto"><h1 class="text-3xl font-bold text-nowrap ml-2">aiwolf-nlp-viewer</h1> <select class="select min-w-3xs w-3xs ml-auto"><option>サンプルログを選択</option><!></select> <input class="file-input min-w-3xs w-3xs" type="file" accept=".log" multiple> <label class="flex items-center cursor-pointer gap-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div> <div class="w-full h-full flex flex-col overflow-hidden bg-base-300"><!></div></main>',2);function Ee(b,L){rt(L,!0);let E={logFiles:[],selectedTabIdx:0},a=gt(Q(E.logFiles)),c=gt(Q(E.selectedTabIdx));function d(m){const x=m.target;Array.from(x.files||[]).forEach(U=>{const R=new FileReader;R.onload=W=>{var F;const j=((F=W.target)==null?void 0:F.result)??"";H(a,Q([...o(a),{name:U.name,data:ft(j)}])),H(c,o(a).length-1)},R.readAsText(U)}),x&&(x.value="")}function s(m){H(a,Q(o(a).filter((x,g)=>g!==m))),o(c)>=o(a).length&&H(c,o(a).length-1)}const u=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>M(()=>import("../chunks/CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>M(()=>import("../chunks/Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>M(()=>import("../chunks/D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>M(()=>import("../chunks/BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>M(()=>import("../chunks/Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>M(()=>import("../chunks/B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>M(()=>import("../chunks/CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>M(()=>import("../chunks/JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>M(()=>import("../chunks/gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>M(()=>import("../chunks/oHz1b7i6.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>M(()=>import("../chunks/K60EV997.js"),[],import.meta.url)})).map(([m,x])=>({name:m.split("/").pop()||"",path:`${Rt}${m.replace("/static","")}`}));async function w(m,x){try{const U=await(await fetch(m)).text();H(a,Q([...o(a),{name:x,data:ft(U)}])),H(c,o(a).length-1)}catch(g){console.error("Error loading asset log:",g)}}var V=ce();wt(m=>{kt.title="aiwolf-nlp-viewer"});var A=n(V),S=i(n(A),2);S.__change=m=>{const x=m.currentTarget.value;if(x){const g=u.find(U=>U.path===x);g&&w(g.path,g.name),m.currentTarget.value=""}};var T=n(S);T.value=((T.__value="")==null,"");var P=i(T);B(P,17,()=>u,G,(m,x)=>{var g=le(),U={},R=n(g,!0);r(g),D(()=>{U!==(U=o(x).path)&&(g.value=(g.__value=o(x).path)==null?"":o(x).path),N(R,o(x).name)}),l(m,g)}),r(S);var q=i(S,2);q.__change=d;var tt=i(q,2),J=n(tt);I(J,"inline",!0),I(J,"icon","mdi:white-balance-sunny");var et=i(J,4);I(et,"inline",!0),I(et,"icon","mdi:moon-and-stars"),r(tt),r(A);var X=i(A,2),ot=n(X);{var nt=m=>{var x=ve(),g=vt(x);B(g,21,()=>o(a),G,(R,W,j)=>{var F=_e(),$=n(F);$.__click=()=>H(c,Q(j));var st=n($,!0);r($);var K=i($,2);K.__click=()=>s(j);var lt=n(K);I(lt,"icon","mdi:close"),r(K),r(F),D(()=>{ct($,"btn-active",o(c)===j),N(st,o(W).name)}),l(R,F)}),r(g);var U=i(g,2);B(U,21,()=>Object.entries(o(a)[o(c)].data),G,(R,W)=>{let j=()=>o(W)[0],F=()=>o(W)[1];se(R,{get dayIdx(){return j()},get dayStatus(){return F()}})}),r(U),l(m,x)};y(ot,m=>{o(a).length>0&&m(nt)})}r(X),r(V),l(b,V),it()}Lt(["change","click"]);export{Ee as component};
