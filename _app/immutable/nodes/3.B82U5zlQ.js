var Nt=Object.defineProperty;var Ct=(a,e,g)=>e in a?Nt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:g}):a[e]=g;var Ye=(a,e,g)=>Ct(a,typeof e!="symbol"?e+"":e,g);import{t as _,a as o,c as Ae}from"../chunks/C96Obp6N.js";import{y as Qe,u as Mt,aN as bt,p as Pe,ap as Lt,i as j,b as n,aA as ne,c as r,r as t,a as Ge,f as Z,s as i,aB as ke,aG as Te,t as L,h as Ne,$ as Ft}from"../chunks/BP9y4yKp.js";import{d as ht,s,h as Ht}from"../chunks/DZNU9N6A.js";import{i as O}from"../chunks/C4IGXha7.js";import{s as je,a as Ze}from"../chunks/XBNY5BM4.js";import{p as Pt}from"../chunks/xCmSONZG.js";import{s as Ue,a as Fe,S as We,R as Gt}from"../chunks/CfHWT9s-.js";import{a as Be,o as Ve}from"../chunks/CUbQW9Gg.js";import{$ as Je}from"../chunks/Cj9fvRom.js";import{r as Oe,a as oe,s as Ie,b as Ke,L as Kt,c as Xe}from"../chunks/DlJVdtuQ.js";import{e as be,i as he}from"../chunks/DbFYbdTt.js";import{b as st}from"../chunks/DBOqFBuJ.js";import{b as $e}from"../chunks/CpCB4Eu6.js";import{s as ze}from"../chunks/Z3TIC2Rx.js";import{b as ot}from"../chunks/D90TZfxR.js";function vt(a,e,g){Qe(()=>{var D=Mt(()=>e(a,g==null?void 0:g())||{});if(D!=null&&D.destroy)return()=>D.destroy()})}class yt{static fromJson(e){return JSON.parse(e)}static toJson(e){return JSON.stringify(e,null,2)}}const At="agent-settings",ct={connection:{url:"ws://localhost:8080/ws",token:""},team:"aiwolf-nlp-viewer",display:{largeScale:!1}};function Vt(){const a=localStorage.getItem(At);if(a)try{return yt.fromJson(a)}catch(e){console.error("Failed to parse agent settings:",e)}return It(ct),ct}function It(a){localStorage.setItem(At,yt.toJson(a))}const Se=bt(Vt());Se.subscribe(It);var pe=(a=>(a.NAME="NAME",a.TALK="TALK",a.WHISPER="WHISPER",a.VOTE="VOTE",a.DIVINE="DIVINE",a.GUARD="GUARD",a.ATTACK="ATTACK",a.INITIALIZE="INITIALIZE",a.DAILY_INITIALIZE="DAILY_INITIALIZE",a.DAILY_FINISH="DAILY_FINISH",a.FINISH="FINISH",a))(pe||{});const et={ミナト:"/images/male/01.png",タクミ:"/images/male/02.png",ケンジ:"/images/male/03.png",リュウジ:"/images/male/04.png",ダイスケ:"/images/male/05.png",シオン:"/images/male/06.png",ベンジャミン:"/images/male/07.png",トシオ:"/images/male/08.png",ジョナサン:"/images/male/09.png",シュンイチ:"/images/male/10.png",ジョージ:"/images/male/11.png",セルヴァス:"/images/male/12.png",サクラ:"/images/female/01.png",リン:"/images/female/02.png",ユミ:"/images/female/03.png",メイ:"/images/female/04.png",ミサキ:"/images/female/05.png",ミオ:"/images/female/06.png",ミヅキ:"/images/female/07.png",ミナコ:"/images/female/08.png",アスカ:"/images/female/09.png",ミドリ:"/images/female/10.png",ヴィクトリア:"/images/female/11.png",シズエ:"/images/female/12.png"},ut=()=>({status:"disconnected",deadline:null,entries:[],agent:null,role:null,profile:null,request:null,info:null,mediumResults:[],divineResults:[],setting:null,talkHistory:[],whisperHistory:[],executedAgents:[],attackedAgents:[]});function qt(){const{subscribe:a,update:e}=bt(ut());let g=null,D=null,d=null,H=null;Se.subscribe(k=>{D=k});function ee(){g&&(g.close(),g=null,e(k=>({...k,status:"disconnected"}))),H&&(H.clear(),H=null)}function ie(){if(!D)return;g&&e(()=>ut()),e(c=>({...c,status:"connecting"}));const k=new URL(D.connection.url);D.connection.token&&k.searchParams.set("token",D.connection.token),g=new WebSocket(k),g.onopen=()=>{e(c=>({...c,status:"connected"}))},g.onclose=()=>{ee()},g.onerror=()=>{ee()},g.onmessage=c=>{try{const x=Date.now(),P=JSON.parse(c.data);e(W=>J(W,P)),z(P,x)}catch(x){console.error("Failed to parse message:",x)}}}function ae(k){if(H&&(H.clear(),H=null,e(c=>({...c,deadline:null}))),g&&g.readyState===WebSocket.OPEN)try{g.send(k),e(c=>{const x=c.entries.slice();return x.push(k),{...c,entries:x}})}catch(c){console.error("Failed to send message:",c)}}function J(k,c){const x={...k,entries:[...k.entries,c],request:c.request};if(c.info){if(x.info=c.info,c.info.medium_result){const P=c.info.medium_result;x.mediumResults.some(W=>W.day===P.day&&W.agent===P.agent)||x.mediumResults.push(P)}if(c.info.divine_result){const P=c.info.divine_result;x.divineResults.some(W=>W.day===P.day&&W.agent===P.agent)||x.divineResults.push(P)}c.info.executed_agent&&x.executedAgents.push(c.info.executed_agent),c.info.attacked_agent&&x.attackedAgents.push(c.info.attacked_agent)}return c.setting&&(x.setting=c.setting,d=c.setting.timeout.action),c.talk_history&&x.talkHistory.push(...c.talk_history),c.whisper_history&&x.whisperHistory.push(...c.whisper_history),c.request===pe.INITIALIZE&&x.info&&(x.agent=x.info.agent,x.role=x.info.role_map[x.info.agent],x.profile=x.info.profile||null),x}function z(k,c){switch(k.request){case pe.NAME:ae((D==null?void 0:D.team)||"viewer"+Math.floor(Math.random()*1e3));break;case pe.TALK:case pe.WHISPER:case pe.VOTE:case pe.DIVINE:case pe.GUARD:case pe.ATTACK:H&&H.clear(),H=new Ut(()=>{ae("TIMEOUT")},new Date(c+(d??6e4))),e(x=>({...x,deadline:(H==null?void 0:H.deadline())??null}));break;case pe.FINISH:ee();break}}return{subscribe:a,connect:ie,disconnect:ee,send:ae}}const He=qt();class Ut{constructor(e,g){Ye(this,"timeout");Ye(this,"_deadline");this.timeout=setTimeout(e,g.getTime()-new Date().getTime()),this._deadline=g}deadline(){return this._deadline}clear(){clearTimeout(this.timeout)}}var _t;(function(a){a[a.HIGH_SURROGATE_START=55296]="HIGH_SURROGATE_START",a[a.HIGH_SURROGATE_END=56319]="HIGH_SURROGATE_END",a[a.LOW_SURROGATE_START=56320]="LOW_SURROGATE_START",a[a.REGIONAL_INDICATOR_START=127462]="REGIONAL_INDICATOR_START",a[a.REGIONAL_INDICATOR_END=127487]="REGIONAL_INDICATOR_END",a[a.FITZPATRICK_MODIFIER_START=127995]="FITZPATRICK_MODIFIER_START",a[a.FITZPATRICK_MODIFIER_END=127999]="FITZPATRICK_MODIFIER_END",a[a.VARIATION_MODIFIER_START=65024]="VARIATION_MODIFIER_START",a[a.VARIATION_MODIFIER_END=65039]="VARIATION_MODIFIER_END",a[a.DIACRITICAL_MARKS_START=8400]="DIACRITICAL_MARKS_START",a[a.DIACRITICAL_MARKS_END=8447]="DIACRITICAL_MARKS_END",a[a.SUBDIVISION_INDICATOR_START=127988]="SUBDIVISION_INDICATOR_START",a[a.TAGS_START=917504]="TAGS_START",a[a.TAGS_END=917631]="TAGS_END",a[a.ZWJ=8205]="ZWJ"})(_t||(_t={}));const Wt=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);var dt;function ft(a){if(typeof a!="string")throw new TypeError("string cannot be undefined or null");const e=[];let g=0,D=0;for(;g<a.length;)D+=jt(g+D,a),Xt(a[g+D])&&D++,Yt(a[g+D])&&D++,zt(a[g+D])&&D++,$t(a[g+D])?D++:(e.push(a.substring(g,g+D)),g+=D,D=0);return e}function jt(a,e){const g=e[a];if(!Zt(g)||a===e.length-1)return 1;const D=g+e[a+1];let d=e.substring(a+2,a+5);return gt(D)&&gt(d)?4:Bt(D)&&Qt(d)?e.slice(a).indexOf(String.fromCodePoint(917631))+2:Jt(d)?4:2}function Zt(a){return a&&Ce(a[0].charCodeAt(0),55296,56319)}function gt(a){return Ce(tt(a),127462,127487)}function Bt(a){return Ce(tt(a),127988,127988)}function Jt(a){return Ce(tt(a),127995,127999)}function Yt(a){return typeof a=="string"&&Ce(a.charCodeAt(0),65024,65039)}function zt(a){return typeof a=="string"&&Ce(a.charCodeAt(0),8400,8447)}function Qt(a){const e=a.codePointAt(0);return typeof a=="string"&&typeof e=="number"&&Ce(e,917504,917631)}function Xt(a){return typeof a=="string"&&Wt.includes(a.charCodeAt(0))}function $t(a){return typeof a=="string"&&a.charCodeAt(0)===8205}function tt(a){return(a.charCodeAt(0)-55296<<10)+(a.charCodeAt(1)-56320)+65536}function Ce(a,e,g){return a>=e&&a<=g}(function(a){a[a.unit_1=1]="unit_1",a[a.unit_2=2]="unit_2",a[a.unit_4=4]="unit_4"})(dt||(dt={}));function mt(a,e,g){a.key==="Enter"&&(a.ctrlKey||a.metaKey)&&(a.preventDefault(),e.onSendMessage(n(g)))}var ea=_('<span aria-live="polite"> </span>m',1),ta=(a,e,g)=>e(g()),aa=_('<button class="btn btn-xl"> </button>'),ra=(a,e)=>e("Skip"),na=_('<button class="btn btn-xl" aria-label="Skip"><iconify-icon></iconify-icon> SKIP</button>',2),ia=(a,e)=>e("Over"),la=_('<!> <button class="btn btn-xl" aria-label="Over"><iconify-icon></iconify-icon> OVER</button>',3),sa=_("<option></option>"),oa=_("<option></option>"),va=_("<!> <option></option>",1),ca=_('<pre class="text-2xl"> </pre>'),ua=_('<pre class="text-2xl bg-error text-error-content"> </pre>'),_a=(a,e,g)=>e.onSendMessage(n(g)),da=_('<div class="flex gap-2 items-center px-4 pt-4 pb-4 overflow-x-auto"><span class="countdown font-mono text-3xl"><!> <span aria-live="polite"> </span>s</span> <span class="bg-primary text-primary-content w-full py-2 text-3xl font-bold text-nowrap text-center"> </span></div> <div class="flex gap-2 items-center px-4 pt-2 pb-4 overflow-x-auto"><!> <input type="text" class="input input-xl min-w-64 flex-1" list="suggests"> <datalist id="suggests"><!></datalist> <!> <button class="btn btn-xl" aria-label="Send"><iconify-icon></iconify-icon> </button></div> <div class="-mt-2 mx-4 mb-2"><progress class="progress" max="100"></progress></div>',3),fa=_('<span aria-live="polite"> </span>m',1),ga=(a,e,g)=>e(g()),ma=_('<button class="btn"> </button>'),xa=_('<span class="bg-primary text-primary-content text-lg font-bold text-nowrap"> </span> <!>',1),pa=(a,e)=>e("Skip"),ba=_('<button class="btn" aria-label="Skip"><iconify-icon></iconify-icon> SKIP</button>',2),ha=(a,e)=>e("Over"),ya=_('<span class="bg-primary text-primary-content text-lg font-bold text-nowrap"> </span> <!> <button class="btn" aria-label="Over"><iconify-icon></iconify-icon> OVER</button>',3),Aa=_("<option></option>"),Ia=_("<option></option>"),wa=_("<!> <option></option>",1),ka=_('<pre class="text-md"> </pre>'),Ta=_('<pre class="text-md bg-error text-error-content"> </pre>'),Sa=(a,e,g)=>e.onSendMessage(n(g)),Ra=_('<div class="flex gap-2 items-center p-4 overflow-x-auto"><span class="countdown font-mono text-2xl"><!> <span aria-live="polite"> </span>s</span> <!> <input type="text" class="input min-w-64 flex-1" list="suggests"> <datalist id="suggests"><!></datalist> <!> <button class="btn" aria-label="Send"><iconify-icon></iconify-icon> </button></div> <div class="-mt-2 mx-4 mb-2"><progress class="progress" max="100"></progress></div>',3),Ea=_('<form class="flex-none bg-base-200" data-sveltekit-keepfocus=""><!></form>');function Oa(a,e){Pe(e,!0);const[g,D]=je(),d=()=>Ze(Je,"$_",g);let H=ne(""),ee=ne(0),ie=ne(void 0),ae=ne(null);const J=Te(()=>{var b;return e.remain!==null?e.remain/(((b=e.setting)==null?void 0:b.timeout.action)??6e4)*100:0}),z=Te(()=>e.remain!==null?Math.floor(e.remain/6e4):0),k=Te(()=>e.remain!==null?Math.floor(e.remain%6e4/1e3):0),c=Te(()=>[pe.VOTE,pe.DIVINE,pe.GUARD,pe.ATTACK].includes(e.request));function x(b){var F,R;if(!e.request||!e.setting)return 0;const T=e.request===pe.TALK?e.setting.talk.max_length:e.request===pe.WHISPER?e.setting.whisper.max_length:null;if(!T)return 0;let I=T.base_length??0;if(I+=((F=e.info)==null?void 0:F.remain_length)??0,T.mention_length){for(const ve in((R=e.info)==null?void 0:R.status_map)??{})if(b.indexOf("@"+ve)!==-1){I+=T.mention_length,I+=ft("@"+ve).length;break}}return T.per_talk&&(I=Math.min(I,T.per_talk)),I-=ft(b).length,I}Lt(()=>{j(ee,x(n(H)),!0)}),Be(()=>{const b=Se.subscribe(T=>{j(ie,T,!0)});return()=>{b()}});function P(b){var T;j(H,b,!0),(T=n(ae))==null||T.focus()}function W(b){b.focus()}var se=Ea(),le=r(se);{var ce=b=>{var T=da(),I=Z(T),F=r(I),R=r(F);{var ve=l=>{var u=ea(),A=Z(u),m=r(A,!0);t(A),ke(),L(q=>{Ue(A,`--value:${n(z)??""};`),Ie(A,"aria-label",q),s(m,n(z))},[()=>n(z).toString()]),o(l,u)};O(R,l=>{e.remain&&e.remain>6e4&&l(ve)})}var de=i(R,2),me=r(de,!0);t(de),ke(),t(F);var Y=i(F,2),Q=r(Y,!0);t(Y),t(I);var te=i(I,2),re=r(te);{var ue=l=>{var u=Ae(),A=Z(u);be(A,17,()=>{var m;return Object.entries(((m=e.info)==null?void 0:m.status_map)??{})},he,(m,q)=>{let U=()=>n(q)[0],K=()=>n(q)[1];var $=Ae(),fe=Z($);{var ye=ge=>{var _e=aa();_e.__click=[ta,P,U];var Ee=r(_e,!0);t(_e),L(()=>s(Ee,U())),o(ge,_e)};O(fe,ge=>{var _e;K()===Fe.ALIVE&&U()!==((_e=e.info)==null?void 0:_e.agent)&&ge(ye)})}o(m,$)}),o(l,u)},p=l=>{var u=la(),A=Z(u);{var m=K=>{var $=na();$.__click=[ra,P];var fe=r($);oe(fe,"icon","mdi:arrow-u-down-right-bold"),ke(),t($),o(K,$)};O(A,K=>{var $;((($=e.info)==null?void 0:$.remain_skip)??0)>0&&K(m)})}var q=i(A,2);q.__click=[ia,P];var U=r(q);oe(U,"icon","mdi:skip-forward"),ke(),t(q),o(l,u)};O(re,l=>{n(c)?l(ue):l(p,!1)})}var h=i(re,2);Oe(h),h.__keydown=[mt,e,H],Qe(()=>st(h,()=>n(H),l=>j(H,l))),vt(h,l=>W==null?void 0:W(l)),$e(h,l=>j(ae,l),()=>n(ae));var w=i(h,2),E=r(w);{var V=l=>{var u=Ae(),A=Z(u);be(A,17,()=>{var m;return Object.entries(((m=e.info)==null?void 0:m.status_map)??{})},he,(m,q)=>{let U=()=>n(q)[0],K=()=>n(q)[1];var $=Ae(),fe=Z($);{var ye=ge=>{var _e=sa(),Ee={};L(()=>{Ee!==(Ee=U())&&(_e.value=(_e.__value=U())??"")}),o(ge,_e)};O(fe,ge=>{var _e;K()===Fe.ALIVE&&U()!==((_e=e.info)==null?void 0:_e.agent)&&ge(ye)})}o(m,$)}),o(l,u)},M=l=>{var u=va(),A=Z(u);{var m=U=>{var K=oa();K.value=K.__value="Skip",o(U,K)};O(A,U=>{var K;(((K=e.info)==null?void 0:K.remain_skip)??0)>0&&U(m)})}var q=i(A,2);q.value=q.__value="Over",o(l,u)};O(E,l=>{n(c)?l(V):l(M,!1)})}t(w);var X=i(w,2);{var N=l=>{var u=ca(),A=r(u,!0);t(u),L(m=>s(A,m),[()=>d()("agent.remainingChars",{values:{count:n(ee)}})]),o(l,u)},C=l=>{var u=ua(),A=r(u,!0);t(u),L(m=>s(A,m),[()=>d()("agent.exceededChars",{values:{count:n(ee)*-1}})]),o(l,u)};O(X,l=>{n(ee)>=0?l(N):l(C,!1)})}var S=i(X,2);S.__click=[_a,e,H];var B=r(S);oe(B,"icon","mdi:send");var v=i(B);t(S),t(te);var y=i(te,2),f=r(y);t(y),L((l,u,A)=>{Ue(de,`--value:${n(k)??""};`),Ie(de,"aria-label",l),s(me,n(k)),s(Q,u),s(v,` ${A??""}`),Ke(f,n(J))},[()=>n(k).toString(),()=>n(c)?`${d()(`game.request.${e.request}`)}${d()("agent.selectTarget")}`:`${d()(`game.request.${e.request}`)}${d()("agent.enterContent")}`,()=>d()("agent.send")]),o(b,T)},G=b=>{var T=Ra(),I=Z(T),F=r(I),R=r(F);{var ve=v=>{var y=fa(),f=Z(y),l=r(f,!0);t(f),ke(),L((u,A,m)=>{Ue(f,`--value:${u??""};`),Ie(f,"aria-label",A),s(l,m)},[()=>Math.floor(e.remain/6e4),()=>Math.floor(e.remain/6e4).toString(),()=>Math.floor(e.remain/6e4)]),o(v,y)};O(R,v=>{e.remain&&e.remain>6e4&&v(ve)})}var de=i(R,2),me=r(de,!0);t(de),ke(),t(F);var Y=i(F,2);{var Q=v=>{var y=xa(),f=Z(y),l=r(f);t(f);var u=i(f,2);be(u,17,()=>{var A;return Object.entries(((A=e.info)==null?void 0:A.status_map)??{})},he,(A,m)=>{let q=()=>n(m)[0],U=()=>n(m)[1];var K=Ae(),$=Z(K);{var fe=ye=>{var ge=ma();ge.__click=[ga,P,q];var _e=r(ge,!0);t(ge),L(()=>s(_e,q())),o(ye,ge)};O($,ye=>{var ge;U()===Fe.ALIVE&&q()!==((ge=e.info)==null?void 0:ge.agent)&&ye(fe)})}o(A,K)}),L((A,m)=>s(l,`${A??""}${m??""}`),[()=>d()(`game.request.${e.request}`),()=>d()("agent.selectTarget")]),o(v,y)},te=v=>{var y=ya(),f=Z(y),l=r(f);t(f);var u=i(f,2);{var A=U=>{var K=ba();K.__click=[pa,P];var $=r(K);oe($,"icon","mdi:arrow-u-down-right-bold"),ke(),t(K),o(U,K)};O(u,U=>{var K;(((K=e.info)==null?void 0:K.remain_skip)??0)>0&&U(A)})}var m=i(u,2);m.__click=[ha,P];var q=r(m);oe(q,"icon","mdi:skip-forward"),ke(),t(m),L((U,K)=>s(l,`${U??""}${K??""}`),[()=>d()(`game.request.${e.request}`),()=>d()("agent.enterContent")]),o(v,y)};O(Y,v=>{n(c)?v(Q):v(te,!1)})}var re=i(Y,2);Oe(re),re.__keydown=[mt,e,H],Qe(()=>st(re,()=>n(H),v=>j(H,v))),vt(re,v=>W==null?void 0:W(v)),$e(re,v=>j(ae,v),()=>n(ae));var ue=i(re,2),p=r(ue);{var h=v=>{var y=Ae(),f=Z(y);be(f,17,()=>{var l;return Object.entries(((l=e.info)==null?void 0:l.status_map)??{})},he,(l,u)=>{let A=()=>n(u)[0],m=()=>n(u)[1];var q=Ae(),U=Z(q);{var K=$=>{var fe=Aa(),ye={};L(()=>{ye!==(ye=A())&&(fe.value=(fe.__value=A())??"")}),o($,fe)};O(U,$=>{var fe;m()===Fe.ALIVE&&A()!==((fe=e.info)==null?void 0:fe.agent)&&$(K)})}o(l,q)}),o(v,y)},w=v=>{var y=wa(),f=Z(y);{var l=A=>{var m=Ia();m.value=m.__value="Skip",o(A,m)};O(f,A=>{var m;(((m=e.info)==null?void 0:m.remain_skip)??0)>0&&A(l)})}var u=i(f,2);u.value=u.__value="Over",o(v,y)};O(p,v=>{n(c)?v(h):v(w,!1)})}t(ue);var E=i(ue,2);{var V=v=>{var y=ka(),f=r(y,!0);t(y),L(l=>s(f,l),[()=>d()("agent.remainingChars",{values:{count:n(ee)}})]),o(v,y)},M=v=>{var y=Ta(),f=r(y,!0);t(y),L(l=>s(f,l),[()=>d()("agent.exceededChars",{values:{count:n(ee)*-1}})]),o(v,y)};O(E,v=>{n(ee)>=0?v(V):v(M,!1)})}var X=i(E,2);X.__click=[Sa,e,H];var N=r(X);oe(N,"icon","mdi:send");var C=i(N);t(X),t(I);var S=i(I,2),B=r(S);t(S),L((v,y,f,l)=>{Ue(de,`--value:${v??""};`),Ie(de,"aria-label",y),s(me,f),s(C,` ${l??""}`),Ke(B,n(J))},[()=>Math.floor((e.remain?e.remain%6e4:0)/1e3),()=>Math.floor((e.remain?e.remain%6e4:0)/1e3).toString(),()=>Math.floor((e.remain?e.remain%6e4:0)/1e3),()=>d()("agent.send")]),o(b,T)};O(le,b=>{var T;(T=n(ie))!=null&&T.display.largeScale?b(ce):b(G,!1)})}t(se),o(a,se),Ge(),D()}ht(["click","keydown"]);var Da=_('<pre class="bg-primary text-primary-content text-3xl font-bold text-center my-2"> </pre>'),Na=_('<pre class="text-md text-pretty break-all my-2"> </pre>'),Ca=_('<div class="bg-info text-success-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Ma=_('<div class="bg-error text-error-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),La=_('<div class="bg-error text-error-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Fa=_('<div class="bg-success text-info-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Ha=_('<h2 class="text-2xl font-bold text-center my-2">霊能結果</h2> <!>',1),Pa=_('<div class="bg-error text-error-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Ga=_('<div class="bg-success text-info-content flex flex-row gap-2 px-2"><pre class="text-2xl font-bold"> </pre> <pre class="text-2xl"> </pre> <pre class="text-2xl font-bold ml-auto"> </pre></div>'),Ka=_('<h2 class="text-2xl font-bold text-center my-2">占い結果</h2> <!>',1),Va=_('<div class="grow overflow-y-auto pr-4"><pre class="text-3xl font-bold text-center"> </pre> <pre class="text-3xl font-bold text-center"> </pre> <pre class="text-3xl text-center my-2"> </pre> <!> <!> <!> <!> <!></div>'),qa=_('<pre class="text-lg text-center"> </pre>'),Ua=_('<h2 class="text-lg font-bold text-center">プロフィール</h2> <pre class="text-md text-pretty break-all"> </pre>',1),Wa=_('<div class="bg-info text-info-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),ja=_('<div class="bg-error text-error-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Za=_('<div class="bg-error text-error-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Ba=_('<div class="bg-success text-info-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Ja=_('<h2 class="text-lg font-bold pt-2">霊能結果</h2> <!>',1),Ya=_('<div class="bg-error text-error-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),za=_('<div class="bg-success text-info-content flex flex-row gap-2"><pre class="text-lg"> </pre> <pre class="text-lg"> </pre> <pre class="text-lg ml-auto"> </pre></div>'),Qa=_('<h2 class="text-lg font-bold pt-2">占い結果</h2> <!>',1),Xa=_('<h2 class="text-xl font-bold pb-2">エージェント</h2> <div class="grow overflow-y-auto pr-4"><div class="flex justify-around"><div><h2 class="text-lg font-bold text-center">名前</h2> <pre class="text-lg text-center"> </pre></div> <div><h2 class="text-lg font-bold text-center">役職</h2> <pre class="text-lg text-center"> </pre></div> <div><h2 class="text-lg font-bold text-center">日数</h2> <pre class="text-lg text-center"> </pre></div> <div><h2 class="text-lg font-bold text-center">リクエスト</h2> <!></div></div> <!> <h2 class="text-lg font-bold pt-2">ステータス</h2> <!> <!> <!></div>',1),$a=_('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><!></div></div>');function er(a,e){Pe(e,!0);const[g,D]=je(),d=()=>Ze(Je,"$_",g);let H=ne(void 0);Be(()=>{const k=Se.subscribe(c=>{j(H,c,!0)});Ve(k)});var ee=$a(),ie=r(ee),ae=r(ie);{var J=k=>{var c=Va(),x=r(c),P=r(x,!0);t(x);var W=i(x,2),se=r(W,!0);t(W);var le=i(W,2),ce=r(le,!0);t(le);var G=i(le,2);{var b=Y=>{var Q=Da(),te=r(Q,!0);t(Q),L(re=>s(te,re),[()=>d()(`game.request.${e.request}`)]),o(Y,Q)};O(G,Y=>{e.request&&Y(b)})}var T=i(G,2);{var I=Y=>{var Q=Na(),te=r(Q,!0);t(Q),L(()=>s(te,e.profile)),o(Y,Q)};O(T,Y=>{e.profile&&Y(I)})}var F=i(T,2);be(F,17,()=>Object.entries(e.info.status_map??{}),he,(Y,Q)=>{let te=()=>n(Q)[0],re=()=>n(Q)[1];var ue=Ae(),p=Z(ue);{var h=E=>{var V=Ca(),M=r(V),X=r(M,!0);t(M);var N=i(M,2),C=r(N,!0);t(N);var S=i(N,2),B=r(S,!0);t(S),t(V),L((v,y)=>{s(X,te()),s(C,v),s(B,y)},[()=>(e.info.role_map??{})[te()]?d()(`game.role.${(e.info.role_map??{})[te()]}`):"",()=>d()(`game.status.${re()}`)]),o(E,V)},w=E=>{var V=Ma(),M=r(V),X=r(M,!0);t(M);var N=i(M,2),C=r(N,!0);t(N);var S=i(N,2),B=r(S);t(S),t(V),L((v,y,f)=>{s(X,te()),s(C,v),s(B,`${y??""}${f??""}`)},[()=>(e.info.role_map??{})[te()]?d()(`game.role.${(e.info.role_map??{})[te()]}`):"",()=>d()(`game.status.${re()}`),()=>e.executedAgents.includes(te())?" (追放)":e.attackedAgents.includes(te())?" (襲撃)":""]),o(E,V)};O(p,E=>{re()===Fe.ALIVE?E(h):E(w,!1)})}o(Y,ue)});var R=i(F,2);{var ve=Y=>{var Q=Ha(),te=i(Z(Q),2);be(te,17,()=>e.mediumResults,he,(re,ue)=>{let p=()=>n(ue).day,h=()=>n(ue).target,w=()=>n(ue).result;var E=Ae(),V=Z(E);{var M=N=>{var C=La(),S=r(C),B=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var f=i(v,2),l=r(f,!0);t(f),t(C),L(u=>{s(B,h()),s(y,`(${p()??""}日目)`),s(l,u)},[()=>d()(`game.species.${w()}`)]),o(N,C)},X=N=>{var C=Fa(),S=r(C),B=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var f=i(v,2),l=r(f,!0);t(f),t(C),L(u=>{s(B,h()),s(y,`(${p()??""}日目)`),s(l,u)},[()=>d()(`game.species.${w()}`)]),o(N,C)};O(V,N=>{w()!==We.HUMAN?N(M):N(X,!1)})}o(re,E)}),o(Y,Q)};O(R,Y=>{e.mediumResults.length>0&&Y(ve)})}var de=i(R,2);{var me=Y=>{var Q=Ka(),te=i(Z(Q),2);be(te,17,()=>e.divineResults,he,(re,ue)=>{let p=()=>n(ue).day,h=()=>n(ue).target,w=()=>n(ue).result;var E=Ae(),V=Z(E);{var M=N=>{var C=Pa(),S=r(C),B=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var f=i(v,2),l=r(f,!0);t(f),t(C),L(u=>{s(B,h()),s(y,`(${p()??""}日目)`),s(l,u)},[()=>d()(`game.species.${w()}`)]),o(N,C)},X=N=>{var C=Ga(),S=r(C),B=r(S,!0);t(S);var v=i(S,2),y=r(v);t(v);var f=i(v,2),l=r(f,!0);t(f),t(C),L(u=>{s(B,h()),s(y,`(${p()??""}日目)`),s(l,u)},[()=>d()(`game.species.${w()}`)]),o(N,C)};O(V,N=>{w()!==We.HUMAN?N(M):N(X,!1)})}o(re,E)}),o(Y,Q)};O(de,Y=>{e.divineResults.length>0&&Y(me)})}t(c),L(Y=>{s(P,e.agent?e.agent:"ゲーム外"),s(se,Y),s(ce,e.info?e.info.day+"日目":"ゲーム外")},[()=>e.role?d()(`game.role.${e.role}`):"ゲーム外"]),o(k,c)},z=k=>{var c=Xa(),x=i(Z(c),2),P=r(x),W=r(P),se=i(r(W),2),le=r(se,!0);t(se),t(W);var ce=i(W,2),G=i(r(ce),2),b=r(G,!0);t(G),t(ce);var T=i(ce,2),I=i(r(T),2),F=r(I,!0);t(I),t(T);var R=i(T,2),ve=i(r(R),2);{var de=h=>{var w=qa(),E=r(w,!0);t(w),L(V=>s(E,V),[()=>d()(`game.request.${e.request}`)]),o(h,w)};O(ve,h=>{e.request&&h(de)})}t(R),t(P);var me=i(P,2);{var Y=h=>{var w=Ua(),E=i(Z(w),2),V=r(E,!0);t(E),L(()=>s(V,e.profile)),o(h,w)};O(me,h=>{e.profile&&h(Y)})}var Q=i(me,4);be(Q,17,()=>Object.entries(e.info.status_map??{}),he,(h,w)=>{let E=()=>n(w)[0],V=()=>n(w)[1];var M=Ae(),X=Z(M);{var N=S=>{var B=Wa(),v=r(B),y=r(v,!0);t(v);var f=i(v,2),l=r(f,!0);t(f);var u=i(f,2),A=r(u,!0);t(u),t(B),L((m,q)=>{s(y,E()),s(l,m),s(A,q)},[()=>(e.info.role_map??{})[E()]?d()(`game.role.${(e.info.role_map??{})[E()]}`):"",()=>d()(`game.status.${V()}`)]),o(S,B)},C=S=>{var B=ja(),v=r(B),y=r(v,!0);t(v);var f=i(v,2),l=r(f,!0);t(f);var u=i(f,2),A=r(u);t(u),t(B),L((m,q,U)=>{s(y,E()),s(l,m),s(A,`${q??""}${U??""}`)},[()=>(e.info.role_map??{})[E()]?d()(`game.role.${(e.info.role_map??{})[E()]}`):"",()=>d()(`game.status.${V()}`),()=>e.executedAgents.includes(E())?" (追放)":e.attackedAgents.includes(E())?" (襲撃)":""]),o(S,B)};O(X,S=>{V()===Fe.ALIVE?S(N):S(C,!1)})}o(h,M)});var te=i(Q,2);{var re=h=>{var w=Ja(),E=i(Z(w),2);be(E,17,()=>e.mediumResults,he,(V,M)=>{let X=()=>n(M).day,N=()=>n(M).target,C=()=>n(M).result;var S=Ae(),B=Z(S);{var v=f=>{var l=Za(),u=r(l),A=r(u,!0);t(u);var m=i(u,2),q=r(m);t(m);var U=i(m,2),K=r(U,!0);t(U),t(l),L($=>{s(A,N()),s(q,`(${X()??""}日目)`),s(K,$)},[()=>d()(`game.species.${C()}`)]),o(f,l)},y=f=>{var l=Ba(),u=r(l),A=r(u,!0);t(u);var m=i(u,2),q=r(m);t(m);var U=i(m,2),K=r(U,!0);t(U),t(l),L($=>{s(A,N()),s(q,`(${X()??""}日目)`),s(K,$)},[()=>d()(`game.species.${C()}`)]),o(f,l)};O(B,f=>{C()!==We.HUMAN?f(v):f(y,!1)})}o(V,S)}),o(h,w)};O(te,h=>{e.mediumResults.length>0&&h(re)})}var ue=i(te,2);{var p=h=>{var w=Qa(),E=i(Z(w),2);be(E,17,()=>e.divineResults,he,(V,M)=>{let X=()=>n(M).day,N=()=>n(M).target,C=()=>n(M).result;var S=Ae(),B=Z(S);{var v=f=>{var l=Ya(),u=r(l),A=r(u,!0);t(u);var m=i(u,2),q=r(m);t(m);var U=i(m,2),K=r(U,!0);t(U),t(l),L($=>{s(A,N()),s(q,`(${X()??""}日目)`),s(K,$)},[()=>d()(`game.species.${C()}`)]),o(f,l)},y=f=>{var l=za(),u=r(l),A=r(u,!0);t(u);var m=i(u,2),q=r(m);t(m);var U=i(m,2),K=r(U,!0);t(U),t(l),L($=>{s(A,N()),s(q,`(${X()??""}日目)`),s(K,$)},[()=>d()(`game.species.${C()}`)]),o(f,l)};O(B,f=>{C()!==We.HUMAN?f(v):f(y,!1)})}o(V,S)}),o(h,w)};O(ue,h=>{e.divineResults.length>0&&h(p)})}t(x),L(h=>{s(le,e.agent?e.agent:"ゲーム外"),s(b,h),s(F,e.info?e.info.day+"日目":"ゲーム外")},[()=>e.role?d()(`game.role.${e.role}`):"ゲーム外"]),o(k,c)};O(ae,k=>{var c;(c=n(H))!=null&&c.display.largeScale?k(J):k(z,!1)})}t(ie),t(ee),o(a,ee),Ge(),D()}function tr(){He.connect()}function ar(){He.disconnect()}var rr=_('<div class="status status-success animate-ping"></div> <div class="status status-success"></div>',1),nr=_('<div class="status status-warning animate-ping"></div> <div class="status status-warning"></div>',1),ir=_('<div class="status status-error"></div>'),lr=(a,e)=>e("connection.url",a.currentTarget.value),sr=(a,e)=>e("connection.token",a.currentTarget.value),or=(a,e)=>e("team",a.currentTarget.value),vr=(a,e)=>e("display.largeScale",a.currentTarget.checked),cr=_('<div class="navbar bg-base-100 flex justify-start gap-4 overflow-x-auto"><a class="text-3xl font-bold text-nowrap ml-2" href="./"> </a> <div class="ml-auto"><div class="inline-grid *:[grid-area:1/1]"><!></div></div> <label class="input min-w-3xs w-3xs"><iconify-icon></iconify-icon> <input type="text" class="grow"></label> <label class="input min-w-3xs w-3xs"><iconify-icon></iconify-icon> <input type="text" class="grow"> <span class="badge badge-neutral badge-xs"> </span></label> <button class="btn btn-info"> </button> <button class="btn btn-error"> </button> <button class="btn"> </button> <dialog class="modal"><div class="modal-box"><div class="form-control my-2"><h3 class="text-lg font-bold"> </h3> <h4 class="text-base font-bold mt-2"> </h4> <label class="input min-w-3xs w-3xs my-2"><iconify-icon></iconify-icon> <input type="text" class="grow"></label> <h3 class="text-lg font-bold mt-4"> </h3> <h4 class="text-base font-bold mt-2"> </h4> <label class="label cursor-pointer my-2"><span class="label-text"> </span> <input type="checkbox" class="checkbox"></label> <h4 class="text-base font-bold mt-2"> </h4> <div class="my-2"><!></div></div></div> <form method="dialog" class="modal-backdrop"><button> </button></form></dialog> <label class="flex items-center cursor-pointer gap-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div>',2);function ur(a,e){Pe(e,!0);const[g,D]=je(),d=()=>Ze(Je,"$_",g);let H=ne(void 0),ee=ne(void 0);const ie=Se.subscribe(xe=>{j(H,xe,!0)}),ae=He.subscribe(xe=>{j(ee,xe.status,!0)});Ve(()=>{ie(),ae()});function J(xe,De){Se.update(Me=>{const Le=xe.split("."),we=Le.pop();let Re=Me;for(const qe of Le)qe&&(Re=Re[qe]);return Re[we]=De,{...Me}})}let z;var k=cr(),c=r(k),x=r(c,!0);t(c);var P=i(c,2),W=r(P),se=r(W);{var le=xe=>{var De=rr();ke(2),o(xe,De)},ce=(xe,De)=>{{var Me=we=>{var Re=nr();ke(2),o(we,Re)},Le=we=>{var Re=ir();o(we,Re)};O(xe,we=>{n(ee)==="connecting"?we(Me):we(Le,!1)},De)}};O(se,xe=>{n(ee)==="connected"?xe(le):xe(ce,!1)})}t(W),t(P);var G=i(P,2),b=r(G);ze(b,1,"h-[1em] opacity-50"),oe(b,"inline",!0),oe(b,"icon","mdi:link");var T=i(b,2);Oe(T),T.__input=[lr,J],t(G);var I=i(G,2),F=r(I);ze(F,1,"h-[1em] opacity-50"),oe(F,"inline",!0),oe(F,"icon","mdi:key");var R=i(F,2);Oe(R),R.__input=[sr,J];var ve=i(R,2),de=r(ve,!0);t(ve),t(I);var me=i(I,2);me.__click=[tr];var Y=r(me,!0);t(me);var Q=i(me,2);Q.__click=[ar];var te=r(Q,!0);t(Q);var re=i(Q,2);re.__click=()=>z.showModal();var ue=r(re,!0);t(re);var p=i(re,2),h=r(p),w=r(h),E=r(w),V=r(E,!0);t(E);var M=i(E,2),X=r(M,!0);t(M);var N=i(M,2),C=r(N);ze(C,1,"h-[1em] opacity-50"),oe(C,"inline",!0),oe(C,"icon","mdi:rename");var S=i(C,2);Oe(S),S.__input=[or,J],t(N);var B=i(N,2),v=r(B,!0);t(B);var y=i(B,2),f=r(y,!0);t(y);var l=i(y,2),u=r(l),A=r(u,!0);t(u);var m=i(u,2);Oe(m),m.__change=[vr,J],t(l);var q=i(l,2),U=r(q,!0);t(q);var K=i(q,2),$=r(K);Kt($,{}),t(K),t(w),t(h);var fe=i(h,2),ye=r(fe),ge=r(ye,!0);t(ye),t(fe),t(p),$e(p,xe=>z=xe,()=>z);var _e=i(p,2),Ee=r(_e);oe(Ee,"inline",!0),oe(Ee,"icon","mdi:white-balance-sunny");var wt=i(Ee,2),at=i(wt,2);oe(at,"inline",!0),oe(at,"icon","mdi:moon-and-stars"),t(_e),t(k),L((xe,De,Me,Le,we,Re,qe,kt,Tt,St,Rt,Et,Ot,Dt)=>{var rt,nt,it,lt;s(x,xe),Ie(T,"placeholder",De),Ke(T,(rt=n(H))==null?void 0:rt.connection.url),Ie(R,"placeholder",Me),Ke(R,(nt=n(H))==null?void 0:nt.connection.token),s(de,Le),me.disabled=n(ee)!=="disconnected",s(Y,we),Q.disabled=n(ee)==="disconnected",s(te,Re),s(ue,qe),s(V,kt),s(X,Tt),Ke(S,(it=n(H))==null?void 0:it.team),s(v,St),s(f,Rt),s(A,Et),Xe(m,(lt=n(H))==null?void 0:lt.display.largeScale),s(U,Ot),s(ge,Dt)},[()=>d()("appName"),()=>d()("realtime.websocketUrl"),()=>d()("realtime.authKey"),()=>d()("realtime.optional"),()=>d()("realtime.connect"),()=>d()("realtime.disconnect"),()=>d()("realtime.settings"),()=>d()("agent.agentSettings"),()=>d()("agent.teamName"),()=>d()("realtime.displaySettings"),()=>d()("realtime.largeScreen"),()=>d()("realtime.enable"),()=>d()("common.language"),()=>d()("common.close")]),o(a,k),Ge(),D()}ht(["input","click","change"]);var _r=_("<iconify-icon></iconify-icon>",2),dr=_("<iconify-icon></iconify-icon>",2),fr=_('<div class="chat-bubble bg-base-100 text-xl text-pretty break-all"> </div>'),gr=_('<div class="chat-image avatar"><div class="w-20 rounded-full"><img></div></div> <pre class="chat-header text-lg"> </pre> <!> <pre class="chat-footer opacity-50 text-sm"> </pre>',1),mr=_("<iconify-icon></iconify-icon>",2),xr=_("<iconify-icon></iconify-icon>",2),pr=_('<div class="chat-bubble bg-base-100 text-pretty break-all"> </div>'),br=_('<div class="chat-image avatar"><div class="w-10 rounded-full"><img></div></div> <pre class="chat-header"> </pre> <!> <pre class="chat-footer opacity-50"> </pre>',1),hr=_('<div class="chat chat-start"><!></div>');function xt(a,e){Pe(e,!0);let g=ne(void 0);Be(()=>{const ie=Se.subscribe(ae=>{j(g,ae,!0)});Ve(ie)});var D=hr(),d=r(D);{var H=ie=>{var ae=gr(),J=Z(ae),z=r(J),k=r(z);t(z),t(J);var c=i(J,2),x=r(c,!0);t(c);var P=i(c,2);{var W=G=>{var b=_r();oe(b,"inline",!0),oe(b,"icon","mdi:skip-forward"),o(G,b)},se=(G,b)=>{{var T=F=>{var R=dr();oe(R,"inline",!0),oe(R,"icon","mdi:arrow-u-down-right-bold"),o(F,R)},I=F=>{var R=fr(),ve=r(R,!0);t(R),L(()=>s(ve,e.talk.text)),o(F,R)};O(G,F=>{e.talk.skip?F(T):F(I,!1)},b)}};O(P,G=>{e.talk.over?G(W):G(se,!1)})}var le=i(P,2),ce=r(le);t(le),L(()=>{Ie(k,"src",e.isDefaultProfile?`${ot}${et[e.talk.agent]}`:""),Ie(k,"alt",e.talk.agent),s(x,e.talk.agent),s(ce,`Idx: ${e.talk.idx??""}`)}),o(ie,ae)},ee=ie=>{var ae=br(),J=Z(ae),z=r(J),k=r(z);t(z),t(J);var c=i(J,2),x=r(c,!0);t(c);var P=i(c,2);{var W=G=>{var b=mr();oe(b,"inline",!0),oe(b,"icon","mdi:skip-forward"),o(G,b)},se=(G,b)=>{{var T=F=>{var R=xr();oe(R,"inline",!0),oe(R,"icon","mdi:arrow-u-down-right-bold"),o(F,R)},I=F=>{var R=pr(),ve=r(R,!0);t(R),L(()=>s(ve,e.talk.text)),o(F,R)};O(G,F=>{e.talk.skip?F(T):F(I,!1)},b)}};O(P,G=>{e.talk.over?G(W):G(se,!1)})}var le=i(P,2),ce=r(le);t(le),L(()=>{Ie(k,"src",e.isDefaultProfile?`${ot}${et[e.talk.agent]}`:""),Ie(k,"alt",e.talk.agent),s(x,e.talk.agent),s(ce,`Idx: ${e.talk.idx??""}`)}),o(ie,ae)};O(d,ie=>{var ae;(ae=n(g))!=null&&ae.display.largeScale?ie(H):ie(ee,!1)})}t(D),o(a,D),Ge()}var yr=_('<input type="radio" name="talk_days" class="tab text-lg font-bold"> <div class="tab-content my-4"></div>',1),Ar=_('<div class="tabs tabs-border"></div>'),Ir=_('<h2 class="text-3xl font-bold pb-2"> </h2> <div class="grow overflow-y-auto pr-4"><!></div>',1),wr=_('<input type="radio" name="talk_days" class="tab"> <div class="tab-content my-4"></div>',1),kr=_('<div class="tabs tabs-border"></div>'),Tr=_('<h2 class="text-xl font-bold pb-2"> </h2> <div class="grow overflow-y-auto pr-4"><!></div>',1),Sr=_('<div class="flex-[0_0_600px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><!></div></div>');function pt(a,e){Pe(e,!0);let g=ne(void 0),D=e.agents.every(J=>Object.keys(et).includes(J));Be(()=>{const J=Se.subscribe(z=>{j(g,z,!0)});Ve(J)});var d=Sr(),H=r(d),ee=r(H);{var ie=J=>{var z=Ir(),k=Z(z),c=r(k,!0);t(k);var x=i(k,2),P=r(x);{var W=se=>{var le=Ar();const ce=Te(()=>[...new Set(e.talks.map(G=>G.day))].sort((G,b)=>b-G));be(le,21,()=>n(ce),he,(G,b)=>{var T=yr(),I=Z(T);Oe(I);var F=i(I,2);be(F,21,()=>e.talks.filter(R=>R.day===n(b)),he,(R,ve)=>{xt(R,{get talk(){return n(ve)},get agents(){return e.agents},isDefaultProfile:D})}),t(F),L(()=>{Xe(I,n(b)===n(ce)[0]),Ie(I,"aria-label",`${n(b)}日目`)}),o(G,T)}),t(le),o(se,le)};O(P,se=>{e.talks.length>0&&se(W)})}t(x),L(()=>s(c,e.header)),o(J,z)},ae=J=>{var z=Tr(),k=Z(z),c=r(k,!0);t(k);var x=i(k,2),P=r(x);{var W=se=>{var le=kr();const ce=Te(()=>[...new Set(e.talks.map(G=>G.day))].sort((G,b)=>b-G));be(le,21,()=>n(ce),he,(G,b)=>{var T=wr(),I=Z(T);Oe(I);var F=i(I,2);be(F,21,()=>e.talks.filter(R=>R.day===n(b)),he,(R,ve)=>{xt(R,{get talk(){return n(ve)},get agents(){return e.agents},isDefaultProfile:D})}),t(F),L(()=>{Xe(I,n(b)===n(ce)[0]),Ie(I,"aria-label",`${n(b)}日目`)}),o(G,T)}),t(le),o(se,le)};O(P,se=>{e.talks.length>0&&se(W)})}t(x),L(()=>s(c,e.header)),o(J,z)};O(ee,J=>{var z;(z=n(g))!=null&&z.display.largeScale?J(ie):J(ae,!1)})}t(H),t(d),o(a,d),Ge()}var Rr=_('<div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"><!> <!> <!></div> <!>',1),Er=_('<div class="flex items-center justify-center h-full"><pre class="base-content text-9xl font-bold opacity-70 select-none"> </pre></div>'),Or=_('<div role="alert" class="alert m-4"><span class="text-lg font-bold"> </span></div>'),Dr=_('<main class="h-screen flex flex-col bg-base-300"><!> <!></main>');function Jr(a,e){Pe(e,!0);const[g,D]=je(),d=()=>Ze(Je,"$_",g);let H=ne(void 0),ee=ne(""),ie=ne(null),ae=ne(Ne([])),J=ne(null),z=ne(null),k=ne(null),c=ne(null),x=ne(null),P=ne(Ne([])),W=ne(Ne([])),se=ne(null),le=ne(Ne([])),ce=ne(Ne([])),G=ne(Ne([])),b=ne(Ne([])),T=ne(null),I=ne(null),F=Se.subscribe(p=>{j(H,p,!0)}),R=He.subscribe(p=>{j(ee,p.status,!0),p.deadline?(j(ie,p.deadline.getTime(),!0),de()):(j(ie,null),j(T,null),n(I)&&(cancelAnimationFrame(n(I)),j(I,null))),j(ae,p.entries,!0),j(J,p.agent,!0),j(z,p.role,!0),j(k,p.profile,!0),j(c,p.request,!0),j(x,p.info,!0),j(P,p.mediumResults,!0),j(W,p.divineResults,!0),j(se,p.setting,!0),j(le,p.talkHistory,!0),j(ce,p.whisperHistory,!0),j(G,p.executedAgents,!0),j(b,p.attackedAgents,!0)});function ve(){const p=Pt.url.searchParams,h=p.get("url"),w=p.get("token");h&&(Se.update(E=>({...E,connection:{url:h??"",token:w??""}})),He.connect())}function de(){if(n(ie)===null)return;const p=()=>{if(n(ie)===null)return;const h=Date.now(),w=Math.max(0,n(ie)-h);j(T,w,!0),w>0?j(I,requestAnimationFrame(p),!0):(j(T,0),j(I,null))};n(I)&&cancelAnimationFrame(n(I)),j(I,requestAnimationFrame(p),!0)}function me(p){He.send(p)}{ve();const p=w=>{n(ee)==="connected"&&w.preventDefault()},h=w=>{n(ee)==="connected"&&w.preventDefault()};window.addEventListener("beforeunload",p),window.addEventListener("popstate",h),Ve(()=>{window.removeEventListener("beforeunload",p),window.removeEventListener("popstate",h),n(I)&&cancelAnimationFrame(n(I)),F(),R()})}var Y=Dr();Ht(p=>{Ft.title="aiwolf-nlp-viewer"});var Q=r(Y);ur(Q,{});var te=i(Q,2);{var re=p=>{var h=Rr(),w=Z(h),E=r(w);er(E,{get agent(){return n(J)},get role(){return n(z)},get profile(){return n(k)},get request(){return n(c)},get info(){return n(x)},get mediumResults(){return n(P)},get divineResults(){return n(W)},get executedAgents(){return n(G)},get attackedAgents(){return n(b)}});var V=i(E,2);const M=Te(()=>d()("agent.talkHistory")),X=Te(()=>{var v;return Object.keys(((v=n(x))==null?void 0:v.status_map)??{})});pt(V,{get header(){return n(M)},get talks(){return n(le)},get agents(){return n(X)}});var N=i(V,2);{var C=v=>{const y=Te(()=>d()("agent.whisperHistory")),f=Te(()=>{var l;return Object.keys(((l=n(x))==null?void 0:l.status_map)??{})});pt(v,{get header(){return n(y)},get talks(){return n(ce)},get agents(){return n(f)}})};O(N,v=>{n(z)===Gt.WEREWOLF&&v(C)})}t(w);var S=i(w,2);{var B=v=>{Oa(v,{get remain(){return n(T)},get setting(){return n(se)},get request(){return n(c)},get info(){return n(x)},onSendMessage:me})};O(S,v=>{n(T)!==null&&v(B)})}o(p,h)},ue=(p,h)=>{{var w=V=>{var M=Er(),X=r(M),N=r(X,!0);t(X),t(M),L(C=>s(N,C),[()=>d()("agent.notConnected")]),o(V,M)},E=V=>{var M=Or(),X=r(M),N=r(X,!0);t(X),t(M),L(C=>s(N,C),[()=>d()("agent.notConnected")]),o(V,M)};O(p,V=>{var M;(M=n(H))!=null&&M.display.largeScale?V(w):V(E,!1)},h)}};O(te,p=>{n(x)!==null?p(re):p(ue,!1)})}t(Y),o(a,Y),Ge(),D()}export{Jr as component};
