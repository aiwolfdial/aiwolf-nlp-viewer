import{p as $,_ as z}from"../chunks/B_Zuiqjk.js";import{t as u,a as c,d as ft,b as Et}from"../chunks/D1-2HBWE.js";import{i as nt}from"../chunks/YxGi1cMD.js";import{k as wt,av as Tt,p as st,c as _,r as o,x as S,N as K,a as lt,ai as ct,i as s,s as n,aH as it,$ as At,w as pt,j as J}from"../chunks/CeyBd2Nv.js";import{s as q}from"../chunks/TjTo9LhE.js";import{i as E}from"../chunks/DpkoRr6P.js";import{e as W,i as B}from"../chunks/DRqcREdK.js";import{h as Ut,e as ot}from"../chunks/sQXm3MJV.js";import{I as Ot,c as Z,R as Vt,a as k,t as dt,d as St,S as Rt,e as Dt,T as Ct}from"../chunks/B8prnrLd.js";import{b as Mt}from"../chunks/BYbgclF9.js";/* empty css                */function mt(r){var v,i,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var f=r.length;for(v=0;v<f;v++)r[v]&&(i=mt(r[v]))&&(t&&(t+=" "),t+=i)}else for(i in r)r[i]&&(t&&(t+=" "),t+=i);return t}function zt(){for(var r,v,i=0,t="",f=arguments.length;i<f;i++)(r=arguments[i])&&(v=mt(r))&&(t&&(t+=" "),t+=v);return t}function Pt(r){return typeof r=="object"?zt(r):r??""}function jt(r,v,i){var t=wt(r,v);t&&t.set&&(r[v]=i,Tt(()=>{r[v]=null}))}var Ft=u("<strong> </strong>");function P(r,v){st(v,!1);let i=$(v,"agentIdx",8),t=$(v,"highlight",8,!1);nt();var f=Ft(),g=_(f,!0);o(f),S((l,h)=>{Z(f,Pt(l),"svelte-dj3b7l"),q(g,h)},[()=>t()?"agent"+i().padStart(2,"0"):"",()=>Ot(i())],K),c(r,f),lt()}function Nt(r,v){st(v,!1);let i=$(v,"text",8);function t(l){const h=/Agent\[(\d+)\]/g,L=[];let O=0,T;for(;(T=h.exec(l))!==null;)T.index>O&&L.push({text:l.slice(O,T.index),agentIdx:null,isAgentTag:!1}),L.push({text:T[0],agentIdx:parseInt(T[1]),isAgentTag:!0}),O=h.lastIndex;if(O<l.length){var R=l.slice(O);Object.entries(Vt).forEach(([V,D])=>{R=R.replaceAll(V,D)}),L.push({text:R,agentIdx:null,isAgentTag:!1})}return{parts:L}}nt();var f=ft(),g=ct(f);return W(g,1,()=>t(i()).parts,B,(l,h)=>{var L=ft(),O=ct(L);{var T=V=>{const D=K(()=>{var H;return((H=s(h).agentIdx)==null?void 0:H.toString())??""});P(V,{get agentIdx(){return s(D)},highlight:!0})},R=V=>{var D=Et();S(()=>q(D,s(h).text)),c(V,D)};E(O,V=>{s(h).isAgentTag?V(T):V(R,!1)})}c(l,L)}),c(r,f),jt(v,"formatTalkText",t),lt({formatTalkText:t})}var qt=u("<iconify-icon></iconify-icon>",2),Ht=u("<iconify-icon></iconify-icon>",2),Wt=u("<iconify-icon></iconify-icon>",2),Bt=u("<iconify-icon></iconify-icon>",2),Gt=u("<iconify-icon></iconify-icon>",2),Jt=u("<iconify-icon></iconify-icon>",2),Kt=u("<iconify-icon></iconify-icon>",2),Qt=u("<li><!> </li>"),Xt=u('<div><h3 class="text-lg font-bold my-2">エージェント</h3> <ul></ul></div>'),Yt=u("<li><!> <!></li>"),Zt=u('<div><h3 class="text-lg font-bold my-2">会話</h3> <ul></ul></div>'),$t=u("<li><!> が <!> に投票</li>"),te=u('<div><h3 class="text-lg font-bold my-2">投票</h3> <ul></ul></div>'),ee=u('<div><h3 class="text-lg font-bold my-2">追放</h3> <p><!> を追放</p></div>'),ae=u("<li><!> が <!> に投票</li>"),re=u('<div><h3 class="text-lg font-bold my-2">襲撃投票</h3> <ul></ul></div>'),ie=u("<p><!> を襲撃: <strong> </strong></p>"),oe=u("<p>襲撃対象なし</p>"),ne=u('<div><h3 class="text-lg font-bold my-2">襲撃</h3> <!></div>'),se=u('<div><h3 class="text-lg font-bold my-2">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></div>'),le=u('<div><h3 class="text-lg font-bold my-2">結果</h3> <p><strong> </strong> が勝利</p></div>'),_e=u('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><h2 class="text-xl font-bold pb-2"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="grow overflow-y-auto pr-4"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function ve(r,v){st(v,!1);let i=$(v,"dayIdx",8),t=$(v,"dayStatus",8);nt();var f=_e(),g=_(f),l=_(g),h=_(l),L=n(h);{var O=e=>{var a=qt();k(a,"inline",!0),k(a,"icon","mdi:conversation"),c(e,a)};E(L,e=>{t().talks.length>0&&e(O)})}var T=n(L,2);{var R=e=>{var a=Ht();k(a,"inline",!0),k(a,"icon","mdi:vote"),c(e,a)};E(T,e=>{t().votes.length>0&&e(R)})}var V=n(T,2);{var D=e=>{var a=Wt();k(a,"inline",!0),k(a,"icon","mdi:account-remove"),c(e,a)};E(V,e=>{t().execution&&e(D)})}var H=n(V,2);{var Q=e=>{var a=Bt();k(a,"inline",!0),k(a,"icon","mdi:vote"),c(e,a)};E(H,e=>{t().attackVotes.length>0&&e(Q)})}var X=n(H,2);{var tt=e=>{var a=Gt();k(a,"inline",!0),k(a,"icon","mdi:sword"),c(e,a)};E(X,e=>{t().attack&&e(tt)})}var et=n(X,2);{var _t=e=>{var a=Jt();k(a,"inline",!0),k(a,"icon","mdi:account-eye"),c(e,a)};E(et,e=>{t().divine&&e(_t)})}var I=n(et,2);{var b=e=>{var a=Kt();k(a,"inline",!0),k(a,"icon","mdi:trophy"),c(e,a)};E(I,e=>{t().result&&e(b)})}o(l);var p=n(l,2),A=_(p);{var j=e=>{var a=Xt(),x=n(_(a),2);W(x,5,()=>Object.entries(t().agents),B,(w,m)=>{let d=()=>s(m)[0],y=()=>s(m)[1];var U=Qt(),M=_(U);P(M,{get agentIdx(){return d()}});var vt=n(M);o(U),S(Lt=>{Z(U,`${Lt??""} svelte-1xvg87g`),dt(U,"opacity-25",y().status!=="ALIVE"),q(vt,` ${St[y().role]??"NULL"} -
                ${Rt[y().status]??"NULL"}`)},[()=>"p-2 my-2 border-4 rounded-md agent"+d().padStart(2,"0")],K),c(w,U)}),o(x),o(a),c(e,a)};E(A,e=>{Object.keys(t().agents).length>0&&e(j)})}var F=n(A,2);{var N=e=>{var a=Zt(),x=n(_(a),2);W(x,5,()=>t().talks,B,(w,m)=>{var d=Yt(),y=_(d);P(y,{get agentIdx(){return s(m).agentIdx}});var U=n(y,2);Nt(U,{get text(){return s(m).text}}),o(d),S(M=>{Z(d,`${M??""} svelte-1xvg87g`),dt(d,"opacity-25",s(m).text==="Over")},[()=>"p-2 my-2 border-4 rounded-md agent"+s(m).agentIdx.padStart(2,"0")],K),c(w,d)}),o(x),o(a),c(e,a)};E(F,e=>{t().talks.length>0&&e(N)})}var C=n(F,2);{var G=e=>{var a=te(),x=n(_(a),2);W(x,5,()=>t().votes,B,(w,m)=>{var d=$t(),y=_(d);P(y,{get agentIdx(){return s(m).agentIdx}});var U=n(y,2);P(U,{get agentIdx(){return s(m).targetIdx},highlight:!0}),it(),o(d),S(M=>Z(d,`${M??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+s(m).agentIdx.padStart(2,"0")],K),c(w,d)}),o(x),o(a),c(e,a)};E(C,e=>{t().votes.length>0&&e(G)})}var at=n(C,2);{var Y=e=>{var a=ee(),x=n(_(a),2),w=_(x);P(w,{get agentIdx(){return t().execution.agentIdx},highlight:!0}),it(),o(x),o(a),c(e,a)};E(at,e=>{t().execution&&e(Y)})}var rt=n(at,2);{var ht=e=>{var a=re(),x=n(_(a),2);W(x,5,()=>t().attackVotes,B,(w,m)=>{var d=ae(),y=_(d);P(y,{get agentIdx(){return s(m).agentIdx}});var U=n(y,2);P(U,{get agentIdx(){return s(m).targetIdx},highlight:!0}),it(),o(d),S(M=>Z(d,`${M??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+s(m).agentIdx.padStart(2,"0")],K),c(w,d)}),o(x),o(a),c(e,a)};E(rt,e=>{t().attackVotes.length>0&&e(ht)})}var ut=n(rt,2);{var It=e=>{var a=ne(),x=n(_(a),2);{var w=d=>{var y=ie(),U=_(y);P(U,{get agentIdx(){return t().attack.targetIdx},highlight:!0});var M=n(U,2),vt=_(M,!0);o(M),o(y),S(()=>q(vt,t().attack.isSuccessful?"成功":"失敗")),c(d,y)},m=d=>{var y=oe();c(d,y)};E(x,d=>{t().attack.targetIdx!=="-1"?d(w):d(m,!1)})}o(a),c(e,a)};E(ut,e=>{t().attack&&e(It)})}var gt=n(ut,2);{var bt=e=>{var a=se(),x=n(_(a),2),w=_(x);P(w,{get agentIdx(){return t().divine.agentIdx},highlight:!0});var m=n(w,2);P(m,{get agentIdx(){return t().divine.targetIdx},highlight:!0});var d=n(m,2),y=_(d,!0);o(d),o(x),o(a),S(()=>q(y,Dt[t().divine.result]??"NULL")),c(e,a)};E(gt,e=>{t().divine&&e(bt)})}var yt=n(gt,2);{var kt=e=>{var a=le(),x=n(_(a),2),w=_(x),m=_(w,!0);o(w),it(),o(x),o(a),S(()=>q(m,Ct[t().result.winSide])),c(e,a)};E(yt,e=>{t().result&&e(kt)})}o(p),o(g),o(f),S(()=>q(h,`Day ${i()??""} `)),c(r,f),lt()}function xt(r){const v=r.split(/\r?\n/).filter(t=>t.trim()),i={};return v.forEach(t=>{const[f,g,...l]=t.split(",");i[f]||(i[f]=ce()),de(i[f],g,l)}),i}function ce(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function de(r,v,i){const f={status:([g,l,h,L])=>{r.agents[g]={role:l,status:h,name:L}},talk:([g,l,h,L])=>{r.talks.push({talkIdx:g,turnIdx:l,agentIdx:h,text:L})},vote:([g,l])=>{r.votes.push({agentIdx:g,targetIdx:l})},execute:([g,l])=>{r.execution={agentIdx:g,role:l}},divine:([g,l,h])=>{r.divine={agentIdx:g,targetIdx:l,result:h}},attackVote:([g,l])=>{r.attackVotes.push({agentIdx:g,targetIdx:l})},attack:([g,l])=>{r.attack={targetIdx:g,isSuccessful:l==="true"}},result:([g,l,h])=>{r.result={villagers:g,werewolves:l,winSide:h}}}[v];f&&f(i)}var ue=u("<option> </option>"),ge=u('<div class="w-fit shrink-0 flex gap-0"><button class="btn"> </button> <button class="btn btn-error btn-square" aria-label="Close tab"><iconify-icon></iconify-icon></button></div>',2),fe=u('<div class="w-full shrink-0 overflow-x-auto flex gap-4 m-4"></div> <div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"></div>',1),pe=u('<main class="h-screen flex flex-col"><div class="navbar bg-base-100 flex justify-start"><h1 class="text-3xl font-bold truncate mx-4">aiwolf-nlp-viewer</h1> <select class="select w-full max-w-xs ml-auto"><option>サンプルログを選択</option><!></select> <input class="file-input w-full max-w-xs mx-2" type="file" accept=".log" multiple> <label class="flex items-center cursor-pointer gap-2 mx-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div> <div class="w-full h-full flex flex-col overflow-hidden bg-base-300"><!></div></main>',2);function Ae(r,v){st(v,!1);let i=pt([]),t=pt(0);function f(I){const b=I.target;Array.from(b.files||[]).forEach(A=>{const j=new FileReader;j.onload=F=>{var C;const N=((C=F.target)==null?void 0:C.result)??"";J(i,[...s(i),{name:A.name,data:xt(N)}]),J(t,s(i).length-1)},j.readAsText(A)}),b&&(b.value="")}function g(I){J(i,s(i).filter((b,p)=>p!==I)),s(t)>=s(i).length&&J(t,s(i).length-1)}const l=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>z(()=>import("../chunks/CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>z(()=>import("../chunks/Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>z(()=>import("../chunks/D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>z(()=>import("../chunks/BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>z(()=>import("../chunks/Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>z(()=>import("../chunks/B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>z(()=>import("../chunks/CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>z(()=>import("../chunks/JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>z(()=>import("../chunks/gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>z(()=>import("../chunks/oHz1b7i6.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>z(()=>import("../chunks/K60EV997.js"),[],import.meta.url)})).map(([I,b])=>({name:I.split("/").pop()||"",path:`${Mt}${I.replace("/static","")}`}));async function h(I,b){try{const A=await(await fetch(I)).text();J(i,[...s(i),{name:b,data:xt(A)}]),J(t,s(i).length-1)}catch(p){console.error("Error loading asset log:",p)}}nt();var L=pe();Ut(I=>{At.title="aiwolf-nlp-viewer"});var O=_(L),T=n(_(O),2),R=_(T);R.value=((R.__value="")==null,"");var V=n(R);W(V,1,()=>l,B,(I,b)=>{var p=ue(),A={},j=_(p,!0);o(p),S(()=>{A!==(A=s(b).path)&&(p.value=(p.__value=s(b).path)==null?"":s(b).path),q(j,s(b).name)}),c(I,p)}),o(T);var D=n(T,2),H=n(D,2),Q=_(H);k(Q,"inline",!0),k(Q,"icon","mdi:white-balance-sunny");var X=n(Q,4);k(X,"inline",!0),k(X,"icon","mdi:moon-and-stars"),o(H),o(O);var tt=n(O,2),et=_(tt);{var _t=I=>{var b=fe(),p=ct(b);W(p,5,()=>s(i),B,(j,F,N)=>{var C=ge(),G=_(C),at=_(G,!0);o(G);var Y=n(G,2),rt=_(Y);k(rt,"icon","mdi:close"),o(Y),o(C),S(()=>{dt(G,"btn-active",s(t)===N),q(at,s(F).name)}),ot("click",G,()=>J(t,N)),ot("click",Y,()=>g(N)),c(j,C)}),o(p);var A=n(p,2);W(A,5,()=>Object.entries(s(i)[s(t)].data),B,(j,F)=>{let N=()=>s(F)[0],C=()=>s(F)[1];ve(j,{get dayIdx(){return N()},get dayStatus(){return C()}})}),o(A),c(I,b)};E(et,I=>{s(i).length>0&&I(_t)})}o(tt),o(L),ot("change",T,I=>{const b=I.currentTarget.value;if(b){const p=l.find(A=>A.path===b);p&&h(p.path,p.name),I.currentTarget.value=""}}),ot("change",D,f),c(r,L),lt()}export{Ae as component};
