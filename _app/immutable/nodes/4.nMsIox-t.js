import{t as d,a as v,c as mt,d as Tt}from"../chunks/BmtqTvJI.js";import{p as tt,c as l,r as n,t as R,a as et,f as lt,g as h,aG as ft,s as i,aH as rt,ae as gt,aE as Et,d as Y,$ as Ot}from"../chunks/BIOpa1Bb.js";import{s as K,d as pt}from"../chunks/Cnt0q032.js";import{i as D}from"../chunks/Cjw-WK3l.js";import{e as H,i as B}from"../chunks/DFUuc1kT.js";import{h as At}from"../chunks/DE0Q-wPF.js";import{s as O}from"../chunks/B45DtwWp.js";import{s as _t}from"../chunks/BK_dRbxW.js";import{I as Dt,R as Lt,S as Ct,a as Nt,T as Pt}from"../chunks/Dz1Iufi4.js";/* empty css                */import{s as Z}from"../chunks/C9_fMXGy.js";import{p as J}from"../chunks/B7VD14qR.js";import{_ as P}from"../chunks/C1FmrZbK.js";import{b as Vt}from"../chunks/q9fw7i1K.js";function st(f){const s=f.split(/\r?\n/).filter(t=>t.trim()),p={};return s.forEach(t=>{const[m,o,...c]=t.split(",");p[m]||(p[m]=Rt()),Gt(p[m],o,c)}),p}function Rt(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function Gt(f,s,p){const m={status:([o,c,u,w,b])=>{f.agents[o]={role:c,status:u,originalName:w,gameName:b||Dt(o)}},talk:([o,c,u,w])=>{f.talks.push({talkIdx:o,turnIdx:c,agentIdx:u,text:w})},vote:([o,c])=>{f.votes.push({agentIdx:o,targetIdx:c})},execute:([o,c])=>{f.execution={agentIdx:o,role:c}},divine:([o,c,u])=>{f.divine={agentIdx:o,targetIdx:c,result:u}},attackVote:([o,c])=>{f.attackVotes.push({agentIdx:o,targetIdx:c})},attack:([o,c])=>{f.attack={targetIdx:o,isSuccessful:c==="true"}},result:([o,c,u])=>{f.result={villagers:o,werewolves:c,winSide:u}}}[s];m&&m(p)}function $(f){let s=0;for(let o=0;o<f.length;o++)s=f.charCodeAt(o)+((s<<5)-s);const p=Math.abs(s)%360,t=85+s%10,m=60+s%10;return`hsla(${p}, ${t}%, ${m}%, 0.7)`}var St=d("<strong> </strong>");function j(f,s){tt(s,!0);let p=J(s,"highlight",3,!1),t=J(s,"text",3,""),m=J(s,"key",3,void 0);var o=St(),c=l(o,!0);n(o),R(u=>{Z(o,u),K(c,t())},[()=>p()?`background: linear-gradient(transparent 60%, ${$(m()??t())} 60%)`:""]),v(f,o),et()}function jt(f,s){tt(s,!0);let p=J(s,"text",3,""),t=J(s,"names",19,()=>[]);function m(u){const w=[];let b=0;for(;b<u.length;){let C=!1,A=u.length,N="",g="";for(const r of t()){const x=u.indexOf("@"+r,b);x!==-1&&x<A&&(A=x,N="@"+r,g=r,C=!0);const y=u.indexOf(">>"+r,b);y!==-1&&y<A&&(A=y,N=">>"+r,g=r,C=!0);const E=u.indexOf(r,b);E!==-1&&E<A&&(E===0||u[E-1]!=="@"&&u[E-1]!==">")&&(A=E,N=r,g=r,C=!0)}if(C)A>b&&w.push({text:u.slice(b,A),key:void 0,tag:!1}),w.push({text:N,key:g,tag:!0}),b=A+N.length;else{w.push({text:u.slice(b),key:void 0,tag:!1});break}}return{parts:w}}var o=mt(),c=lt(o);H(c,17,()=>m(p()).parts,B,(u,w)=>{var b=mt(),C=lt(b);{var A=g=>{const r=ft(()=>h(w).text??"");j(g,{get text(){return h(r)},get key(){return h(w).key},highlight:!0})},N=g=>{var r=Tt();R(()=>K(r,h(w).text)),v(g,r)};D(C,g=>{h(w).tag?g(A):g(N,!1)})}v(u,b)}),v(f,o),et()}var Mt=d("<iconify-icon></iconify-icon>",2),Ft=d("<iconify-icon></iconify-icon>",2),Kt=d("<iconify-icon></iconify-icon>",2),qt=d("<iconify-icon></iconify-icon>",2),zt=d("<iconify-icon></iconify-icon>",2),Ht=d("<iconify-icon></iconify-icon>",2),Bt=d("<iconify-icon></iconify-icon>",2),Jt=d("<li><!> </li>"),Qt=d('<div><h3 class="text-lg font-bold my-2">エージェント</h3> <ul></ul></div>'),Ut=d("<li><!> <!></li>"),Wt=d('<div><h3 class="text-lg font-bold my-2">会話</h3> <ul></ul></div>'),Xt=d('<li class="p-2 my-2 border-4 rounded-md"><!> が <!> に投票</li>'),Yt=d('<div><h3 class="text-lg font-bold my-2">投票</h3> <ul></ul></div>'),Zt=d('<div><h3 class="text-lg font-bold my-2">追放</h3> <p><!> を追放</p></div>'),$t=d('<li class="p-2 my-2 border-4 rounded-md"><!> が <!> に投票</li>'),te=d('<div><h3 class="text-lg font-bold my-2">襲撃投票</h3> <ul></ul></div>'),ee=d("<p><!> を襲撃: <strong> </strong></p>"),ae=d("<p>襲撃対象なし</p>"),re=d('<div><h3 class="text-lg font-bold my-2">襲撃</h3> <!></div>'),oe=d('<div><h3 class="text-lg font-bold my-2">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></div>'),ie=d('<div><h3 class="text-lg font-bold my-2">結果</h3> <p><strong> </strong> が勝利</p></div>'),ne=d('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><h2 class="text-xl font-bold pb-2"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="grow overflow-y-auto pr-4"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function se(f,s){tt(s,!0);let p=J(s,"dayIdx",3,""),t=J(s,"dayStatus",19,()=>({}));var m=ne(),o=l(m),c=l(o),u=l(c),w=i(u);{var b=e=>{var a=Mt();O(a,"inline",!0),O(a,"icon","mdi:conversation"),v(e,a)};D(w,e=>{t().talks.length>0&&e(b)})}var C=i(w,2);{var A=e=>{var a=Ft();O(a,"inline",!0),O(a,"icon","mdi:vote"),v(e,a)};D(C,e=>{t().votes.length>0&&e(A)})}var N=i(C,2);{var g=e=>{var a=Kt();O(a,"inline",!0),O(a,"icon","mdi:account-remove"),v(e,a)};D(N,e=>{t().execution&&e(g)})}var r=i(N,2);{var x=e=>{var a=qt();O(a,"inline",!0),O(a,"icon","mdi:vote"),v(e,a)};D(r,e=>{t().attackVotes.length>0&&e(x)})}var y=i(r,2);{var E=e=>{var a=zt();O(a,"inline",!0),O(a,"icon","mdi:sword"),v(e,a)};D(y,e=>{t().attack&&e(E)})}var G=i(y,2);{var q=e=>{var a=Ht();O(a,"inline",!0),O(a,"icon","mdi:account-eye"),v(e,a)};D(G,e=>{t().divine&&e(q)})}var M=i(G,2);{var F=e=>{var a=Bt();O(a,"inline",!0),O(a,"icon","mdi:trophy"),v(e,a)};D(M,e=>{t().result&&e(F)})}n(c);var z=i(c,2),U=l(z);{var ot=e=>{var a=Qt(),k=i(l(a),2);H(k,21,()=>Object.entries(t().agents),B,(L,T)=>{let _=()=>h(T)[1];var I=Jt();let V;var S=l(I);j(S,{get text(){return _().gameName},get key(){return _().gameName}});var W=i(S);n(I),R((X,nt)=>{V=_t(I,1,"p-2 my-2 border-4 rounded-md",null,V,X),Z(I,nt),K(W,` ${Lt[_().role]??""??""} -
                ${Ct[_().status]??""??""}`)},[()=>({"opacity-25":_().status!=="ALIVE"}),()=>`border-color: ${$(_().gameName)}`]),v(L,I)}),n(k),n(a),v(e,a)};D(U,e=>{Object.keys(t().agents).length>0&&e(ot)})}var Q=i(U,2);{var it=e=>{var a=Wt(),k=i(l(a),2);H(k,21,()=>t().talks,B,(L,T)=>{var _=Ut();let I;var V=l(_);j(V,{get text(){return t().agents[h(T).agentIdx].gameName}});var S=i(V,2);const W=ft(()=>Object.values(t().agents).map(X=>X.gameName));jt(S,{get text(){return h(T).text},get names(){return h(W)}}),n(_),R((X,nt)=>{Z(_,X),I=_t(_,1,"p-2 my-2 border-4 rounded-md",null,I,nt)},[()=>`border-color: ${$(t().agents[h(T).agentIdx].gameName)}`,()=>({"opacity-25":h(T).text==="Over"})]),v(L,_)}),n(k),n(a),v(e,a)};D(Q,e=>{t().talks.length>0&&e(it)})}var at=i(Q,2);{var xt=e=>{var a=Yt(),k=i(l(a),2);H(k,21,()=>t().votes,B,(L,T)=>{var _=Xt(),I=l(_);j(I,{get text(){return t().agents[h(T).agentIdx].gameName}});var V=i(I,2);j(V,{get text(){return t().agents[h(T).targetIdx].gameName},highlight:!0}),rt(),n(_),R(S=>Z(_,S),[()=>`border-color: ${$(t().agents[h(T).agentIdx].gameName)}`]),v(L,_)}),n(k),n(a),v(e,a)};D(at,e=>{t().votes.length>0&&e(xt)})}var ct=i(at,2);{var ht=e=>{var a=Zt(),k=i(l(a),2),L=l(k);j(L,{get text(){return t().agents[t().execution.agentIdx].gameName},highlight:!0}),rt(),n(k),n(a),v(e,a)};D(ct,e=>{t().execution&&e(ht)})}var vt=i(ct,2);{var bt=e=>{var a=te(),k=i(l(a),2);H(k,21,()=>t().attackVotes,B,(L,T)=>{var _=$t(),I=l(_);j(I,{get text(){return t().agents[h(T).agentIdx].gameName}});var V=i(I,2);j(V,{get text(){return t().agents[h(T).targetIdx].gameName},highlight:!0}),rt(),n(_),R(S=>Z(_,S),[()=>`border-color: ${$(t().agents[h(T).agentIdx].gameName)}`]),v(L,_)}),n(k),n(a),v(e,a)};D(vt,e=>{t().attackVotes.length>0&&e(bt)})}var ut=i(vt,2);{var yt=e=>{var a=re(),k=i(l(a),2);{var L=_=>{var I=ee(),V=l(I);j(V,{get text(){return t().agents[t().attack.targetIdx].gameName},highlight:!0});var S=i(V,2),W=l(S,!0);n(S),n(I),R(()=>K(W,t().attack.isSuccessful?"成功":"失敗")),v(_,I)},T=_=>{var I=ae();v(_,I)};D(k,_=>{t().attack.targetIdx!=="-1"?_(L):_(T,!1)})}n(a),v(e,a)};D(ut,e=>{t().attack&&e(yt)})}var dt=i(ut,2);{var kt=e=>{var a=oe(),k=i(l(a),2),L=l(k);j(L,{get text(){return t().agents[t().divine.agentIdx].gameName}});var T=i(L,2);j(T,{get text(){return t().agents[t().divine.targetIdx].gameName},highlight:!0});var _=i(T,2),I=l(_,!0);n(_),n(k),n(a),R(()=>K(I,Nt[t().divine.result]??"")),v(e,a)};D(dt,e=>{t().divine&&e(kt)})}var It=i(dt,2);{var wt=e=>{var a=ie(),k=i(l(a),2),L=l(k),T=l(L,!0);n(L),rt(),n(k),n(a),R(()=>K(T,Pt[t().result.winSide])),v(e,a)};D(It,e=>{t().result&&e(wt)})}n(z),n(o),n(m),R(()=>K(u,`Day ${p()??""} `)),v(f,m),et()}var le=d("<option> </option>"),_e=d('<div class="navbar bg-base-100 flex justify-start gap-4 overflow-x-auto"><a class="text-3xl font-bold text-nowrap ml-2" href="./">aiwolf-nlp-viewer</a> <button class="btn ml-auto">クリップボードから貼り付け</button> <select class="select min-w-3xs w-3xs"><option>サンプルログを選択</option><!></select> <input class="file-input min-w-3xs w-3xs" type="file" accept=".log" multiple> <label class="flex items-center cursor-pointer gap-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div>',2);function ce(f,s){tt(s,!0);const p=Object.entries(Object.assign({"/static/assets/1746429865_osawalab_ai168wolf_CamelliaDragons_kanolab_sunamelli.log":()=>P(()=>import("../chunks/N6UTbxh_.js"),[],import.meta.url),"/static/assets/1746438728_CanisLupus_kanolab_sunamelli_osawalab_ai168wolf.log":()=>P(()=>import("../chunks/Cfcm7mZx.js"),[],import.meta.url),"/static/assets/1746440342_GAIT_sunamelli_osawalab_ai168wolf_CamelliaDragons.log":()=>P(()=>import("../chunks/M07UJl7I.js"),[],import.meta.url),"/static/assets/1746440914_CamelliaDragons_kanolab_mille_sunamelli_CanisLupus.log":()=>P(()=>import("../chunks/KphTbOTH.js"),[],import.meta.url),"/static/assets/1746442087_CanisLupus_ai168wolf_kanolab_sunamelli_CamelliaDragons.log":()=>P(()=>import("../chunks/Dgh0ilJz.js"),[],import.meta.url),"/static/assets/1746460655_ai168wolf_GAIT_CamelliaDragons_kanolab_CanisLupus.log":()=>P(()=>import("../chunks/D2i00i0t.js"),[],import.meta.url),"/static/assets/1746461224_mille_kanolab_osawalab_CamelliaDragons_CanisLupus.log":()=>P(()=>import("../chunks/lCbcujLN.js"),[],import.meta.url),"/static/assets/1746470482_osawalab_kanolab_mille_GAIT_CamelliaDragons.log":()=>P(()=>import("../chunks/CjmIgYUX.js"),[],import.meta.url),"/static/assets/1746527448_GPTaku_sunamelli_ai168wolf_osawalab_kanolab.log":()=>P(()=>import("../chunks/BlKm883H.js"),[],import.meta.url),"/static/assets/1746528097_CamelliaDragons_kanolab_GPTaku_osawalab_mille.log":()=>P(()=>import("../chunks/BdZtLsuJ.js"),[],import.meta.url),"/static/assets/1746530082_GPTaku_CanisLupus_ai168wolf_mille_sunamelli.log":()=>P(()=>import("../chunks/BgiUjGpF.js"),[],import.meta.url),"/static/assets/1746638559_CanisLupus_GPTaku_sunamelli_CamelliaDragons_GAIT.log":()=>P(()=>import("../chunks/CJzO-l2B.js"),[],import.meta.url),"/static/assets/1746640559_mille_kanolab_GPTaku_sunamelli_GAIT.log":()=>P(()=>import("../chunks/DezKpScU.js"),[],import.meta.url),"/static/assets/1746673847_ai168wolf_GPTaku_GAIT_osawalab_sunamelli.log":()=>P(()=>import("../chunks/Biivd54e.js"),[],import.meta.url)})).reduce((g,[r,x])=>{const y=r.split("/").pop()||"";return{...g,[y]:`${Vt}${r.replace("/static","")}`}},{});var t=_e(),m=i(l(t),2);m.__click=function(...g){var r;(r=s.loadClipboardLog)==null||r.apply(this,g)};var o=i(m,2);o.__change=g=>{const r=g.currentTarget.value;r&&(s.loadAssetLog(p[r],r),g.currentTarget.value="")};var c=l(o);c.value=c.__value="";var u=i(c);H(u,17,()=>Object.entries(p),B,(g,r)=>{let x=()=>h(r)[0];var y=le(),E={},G=l(y,!0);n(y),R(()=>{E!==(E=x())&&(y.value=(y.__value=x())??""),K(G,x())}),v(g,y)}),n(o);var w=i(o,2);w.__change=function(...g){var r;(r=s.handleFileSelect)==null||r.apply(this,g)};var b=i(w,2),C=l(b);O(C,"inline",!0),O(C,"icon","mdi:white-balance-sunny");var A=i(C,2),N=i(A,2);O(N,"inline",!0),O(N,"icon","mdi:moon-and-stars"),n(b),n(t),v(f,t),et()}pt(["click","change"]);var ve=(f,s,p)=>Y(s,p(),!0),ue=(f,s,p)=>s(p()),de=d('<div class="w-fit shrink-0 flex gap-0"><button> </button> <button class="btn btn-error btn-square" aria-label="Close tab"><iconify-icon></iconify-icon></button></div>',2),me=d('<div class="w-full shrink-0 overflow-x-auto flex gap-4 m-4"></div> <div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"></div>',1),ge=d('<main class="h-screen flex flex-col"><!> <div class="w-full h-full flex flex-col overflow-hidden bg-base-300"><!></div></main>');function Le(f,s){tt(s,!0);let p={records:{},selectedKey:""},t=gt(p.records),m=Et(gt(p.selectedKey));function o(r){const x=r.target;Array.from(x.files||[]).forEach(E=>{const G=new FileReader;G.onload=q=>{var F;const M=((F=q.target)==null?void 0:F.result)??"";t[E.name]=st(M),Y(m,E.name,!0)},G.readAsText(E)}),x&&(x.value="")}function c(){navigator.clipboard.readText().then(r=>{const x="Clipboard"+new Date().toISOString();t[x]=st(r),Y(m,x)}).catch(r=>{console.error("Error reading clipboard:",r)})}function u(r){delete t[r],Y(m,Object.keys(t)[0]||"",!0)}async function w(r,x){try{const E=await(await fetch(r)).text();t[x]=st(E),Y(m,x,!0)}catch(y){console.error("Error loading asset log:",y)}}var b=ge();At(r=>{Ot.title="aiwolf-nlp-viewer"});var C=l(b);ce(C,{loadAssetLog:w,loadClipboardLog:c,handleFileSelect:o});var A=i(C,2),N=l(A);{var g=r=>{var x=me(),y=lt(x);H(y,21,()=>Object.entries(t),B,(G,q)=>{let M=()=>h(q)[0];var F=de(),z=l(F);let U;z.__click=[ve,m,M];var ot=l(z,!0);n(z);var Q=i(z,2);Q.__click=[ue,u,M];var it=l(Q);O(it,"icon","mdi:close"),n(Q),n(F),R(at=>{U=_t(z,1,"btn",null,U,at),K(ot,M())},[()=>({"btn-active":h(m)===M()})]),v(G,F)}),n(y);var E=i(y,2);H(E,21,()=>Object.entries(t[h(m)]),B,(G,q)=>{let M=()=>h(q)[0],F=()=>h(q)[1];se(G,{get dayIdx(){return M()},get dayStatus(){return F()}})}),n(E),v(r,x)};D(N,r=>{Object.keys(t).length>0&&r(g)})}n(A),n(b),v(f,b),et()}pt(["click"]);export{Le as component};
