import{p as tt,_ as C,b as Mt}from"../chunks/preload-helper.ptD0OENq.js";import{a as d,t as p,c as mt,b as Nt}from"../chunks/disclose-version.Mar9Y9vC.js";import{i as nt}from"../chunks/legacy.BhJzg-UU.js";import{h as ut,a9 as wt,aD as Ct,ar as It,ai as yt,aE as Pt,v as zt,j as Ft,R as jt,a7 as Gt,i as Wt,G as ot,K as M,L as lt,J as kt,S as n,an as Z,M as _,O as l,N as o,aF as it,aG as qt,T as F,V as _t}from"../chunks/runtime.DiZzUycx.js";import{s as K,a as Bt,e as B}from"../chunks/render.BhdnCnaV.js";import{i as L}from"../chunks/if.Bqj423Xp.js";import{e as Y,i as H}from"../chunks/each.D52XpMRx.js";import{b as Lt}from"../chunks/paths.BLmf9Hzz.js";function bt(e,a,s,t){var h=e.__attributes??(e.__attributes={});ut&&(h[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||h[a]!==(h[a]=s)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Pt]=s),s==null?e.removeAttribute(a):typeof s!="string"&&At(e).includes(a)?e[a]=s:e.setAttribute(a,s))}function D(e,a,s){var t=zt,h=Ft;It(null),yt(null);try{(ft.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?At(e).includes(a):s&&typeof s=="object")?e[a]=s:bt(e,a,s==null?s:String(s))}finally{It(t),yt(h)}}var ft=new Map;function At(e){var a=ft.get(e.nodeName);if(a)return a;ft.set(e.nodeName,a=[]);for(var s,t=e,h=Element.prototype;h!==t;){s=Ct(t);for(var c in s)s[c].set&&a.push(c);t=wt(t)}return a}function $(e,a){var s=e.__className,t=Kt(a);ut&&e.className===t?e.__className=t:(s!==t||ut&&e.className!==t)&&(a==null?e.removeAttribute("class"):e.className=t,e.__className=t)}function Kt(e){return e??""}function gt(e,a,s){if(s){if(e.classList.contains(a))return;e.classList.add(a)}else{if(!e.classList.contains(a))return;e.classList.remove(a)}}function Tt(e,a,s){var t=Gt(e,a);t&&t.set&&(e[a]=s,jt(()=>{e[a]=null}))}function Et(e){return function(...a){var s=a[0];return s.preventDefault(),e==null?void 0:e.apply(this,a)}}function Yt(e,a){var c;var s=(c=e.$$events)==null?void 0:c[a.type],t=Wt(s)?s.slice():s==null?[]:[s];for(var h of t)h.call(this,a)}const Ht={VILLAGER:"村人",SEER:"占い師",MEDIUM:"霊能者",BODYGUARD:"騎士",WEREWOLF:"人狼",POSSESSED:"狂人"},Jt={ALIVE:"生存",DEAD:"死亡"},Qt={HUMAN:"人間",WEREWOLF:"人狼"},Xt={VILLAGER:"村人陣営",WEREWOLF:"人狼陣営"};var Zt=p("<strong></strong>");function P(e,a){ot(a,!1);let s=tt(a,"agentIdx",8),t=tt(a,"highlight",8,!1);const h=s().padStart(2,"0");nt();var c=Zt();c.textContent=`Agent[${h??""}]`,M(()=>$(c,`${(t()?"agent"+h:"")??""} svelte-2m8qed`)),d(e,c),lt()}function $t(e,a){ot(a,!1);let s=tt(a,"text",8);function t(u){const y=/Agent\[(\d+)\]/g,T=[];let S=0,O;for(;(O=y.exec(u))!==null;)O.index>S&&T.push({text:u.slice(S,O.index),agentId:null,isAgentTag:!1}),T.push({text:O[0],agentId:parseInt(O[1]),isAgentTag:!0}),S=y.lastIndex;return S<u.length&&T.push({text:u.slice(S),agentId:null,isAgentTag:!1}),{parts:T}}nt();var h=mt(),c=kt(h);return Y(c,1,()=>t(s()).parts,H,(u,y)=>{var T=mt(),S=kt(T);{var O=V=>{var N=Z(()=>{var q;return((q=n(y).agentId)==null?void 0:q.toString())??""});P(V,{get agentIdx(){return n(N)},highlight:!0})},W=V=>{var N=Nt();M(()=>K(N,n(y).text)),d(V,N)};L(S,V=>{n(y).isAgentTag?V(O):V(W,!1)})}d(u,T)}),d(e,h),Tt(a,"formatTalkText",t),lt({formatTalkText:t})}var te=p("<iconify-icon></iconify-icon>",2),ee=p("<iconify-icon></iconify-icon>",2),ae=p("<iconify-icon></iconify-icon>",2),se=p("<iconify-icon></iconify-icon>",2),re=p("<iconify-icon></iconify-icon>",2),ie=p("<iconify-icon></iconify-icon>",2),ne=p("<iconify-icon></iconify-icon>",2),oe=p("<li><!> </li>"),le=p('<section class="agent-section"><h3 class="svelte-1cf5h64">エージェント</h3> <ul class="svelte-1cf5h64"></ul></section>'),ce=p("<li><!> <!></li>"),ve=p('<section class="talks-section"><h3 class="svelte-1cf5h64">会話</h3> <ul class="talks svelte-1cf5h64"></ul></section>'),_e=p("<li><!> が <!> に投票</li>"),de=p('<section class="votes-section"><h3 class="svelte-1cf5h64">投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),ue=p('<section class="execution-section"><h3 class="svelte-1cf5h64">追放</h3> <p><!> を追放</p></section>'),fe=p("<li><!> が <!> に投票</li>"),ge=p('<section class="attack-votes-section"><h3 class="svelte-1cf5h64">襲撃投票</h3> <ul class="svelte-1cf5h64"></ul></section>'),pe=p("<p><!> を襲撃: <strong> </strong></p>"),he=p("<p>襲撃対象なし</p>"),xe=p('<section class="attack-section"><h3 class="svelte-1cf5h64">襲撃</h3> <!></section>'),me=p('<section class="divine-section"><h3 class="svelte-1cf5h64">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></section>'),Ie=p('<section class="result-section"><h3 class="svelte-1cf5h64">結果</h3> <p><strong> </strong> が勝利</p></section>'),ye=p('<div class="day-column svelte-1cf5h64"><div class="day-section svelte-1cf5h64"><h2 class="svelte-1cf5h64"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="scrollable-content svelte-1cf5h64"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function ke(e,a){ot(a,!1);let s=tt(a,"dayIdx",8),t=tt(a,"dayStatus",8);const h={};nt();var c=ye(),u=_(c),y=_(u),T=_(y),S=l(T);{var O=r=>{var i=te();D(i,"inline",!0),D(i,"icon","mdi:conversation"),d(r,i)};L(S,r=>{t().talks.length>0&&r(O)})}var W=l(S,2);{var V=r=>{var i=ee();D(i,"inline",!0),D(i,"icon","mdi:vote"),d(r,i)};L(W,r=>{t().votes.length>0&&r(V)})}var N=l(W,2);{var q=r=>{var i=ae();D(i,"inline",!0),D(i,"icon","mdi:account-remove"),d(r,i)};L(N,r=>{t().execution&&r(q)})}var et=l(N,2);{var J=r=>{var i=se();D(i,"inline",!0),D(i,"icon","mdi:vote"),d(r,i)};L(et,r=>{t().attackVotes.length>0&&r(J)})}var X=l(et,2);{var ct=r=>{var i=re();D(i,"inline",!0),D(i,"icon","mdi:sword"),d(r,i)};L(X,r=>{t().attack&&r(ct)})}var at=l(X,2);{var v=r=>{var i=ie();D(i,"inline",!0),D(i,"icon","mdi:account-eye"),d(r,i)};L(at,r=>{t().divine&&r(v)})}var f=l(at,2);{var x=r=>{var i=ne();D(i,"inline",!0),D(i,"icon","mdi:trophy"),d(r,i)};L(f,r=>{t().result&&r(x)})}o(y);var k=l(y,2),R=_(k);{var j=r=>{var i=le(),m=l(_(i),2);Y(m,5,()=>Object.entries(t().agents),H,(E,I)=>{let g=()=>n(I)[0],b=()=>n(I)[1];var A=oe();const z=Z(()=>`${"agent"+g().padStart(2,"0")} svelte-1cf5h64`);var rt=_(A);P(rt,{get agentIdx(){return g()}});var Vt=l(rt);o(A),M(()=>{$(A,n(z)),gt(A,"over",b().status!=="ALIVE"),K(Vt,` ${Ht[b().role]??"NULL"??""} -
                ${Jt[b().status]??"NULL"??""}`)}),d(E,A)}),o(m),o(i),d(r,i)};L(R,r=>{Object.keys(t().agents).length>0&&r(j)})}var w=l(R,2);{var U=r=>{var i=ve(),m=l(_(i),2);Y(m,5,()=>t().talks,H,(E,I)=>{var g=ce();const b=Z(()=>`${"talk agent"+n(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=_(g);P(A,{get agentIdx(){return n(I).agentIdx}});var z=l(A,2);$t(z,{get text(){return n(I).text}}),o(g),M(()=>{$(g,n(b)),gt(g,"over",n(I).text==="Over")}),d(E,g)}),o(m),o(i),d(r,i)};L(w,r=>{t().talks.length>0&&r(U)})}var G=l(w,2);{var Q=r=>{var i=de(),m=l(_(i),2);Y(m,5,()=>t().votes,H,(E,I)=>{var g=_e();const b=Z(()=>`${"agent"+n(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=_(g);P(A,{get agentIdx(){return n(I).agentIdx}});var z=l(A,2);P(z,{get agentIdx(){return n(I).targetIdx},highlight:!0}),it(),o(g),M(()=>$(g,n(b))),d(E,g)}),o(m),o(i),d(r,i)};L(G,r=>{t().votes.length>0&&r(Q)})}var st=l(G,2);{var vt=r=>{var i=ue(),m=l(_(i),2),E=_(m);P(E,{get agentIdx(){return t().execution.agentIdx},highlight:!0}),it(),o(m),o(i),d(r,i)};L(st,r=>{t().execution&&r(vt)})}var pt=l(st,2);{var St=r=>{var i=ge(),m=l(_(i),2);Y(m,5,()=>t().attackVotes,H,(E,I)=>{var g=fe();const b=Z(()=>`${"agent"+n(I).agentIdx.padStart(2,"0")} svelte-1cf5h64`);var A=_(g);P(A,{get agentIdx(){return n(I).agentIdx}});var z=l(A,2);P(z,{get agentIdx(){return n(I).targetIdx},highlight:!0}),it(),o(g),M(()=>$(g,n(b))),d(E,g)}),o(m),o(i),d(r,i)};L(pt,r=>{t().attackVotes.length>0&&r(St)})}var ht=l(pt,2);{var Dt=r=>{var i=xe(),m=l(_(i),2);{var E=g=>{var b=pe(),A=_(b);P(A,{get agentIdx(){return t().attack.targetIdx},highlight:!0});var z=l(A,2),rt=_(z,!0);o(z),o(b),M(()=>K(rt,t().attack.isSuccessful?"成功":"失敗")),d(g,b)},I=g=>{var b=he();d(g,b)};L(m,g=>{t().attack.targetIdx!=="-1"?g(E):g(I,!1)})}o(i),d(r,i)};L(ht,r=>{t().attack&&r(Dt)})}var xt=l(ht,2);{var Ot=r=>{var i=me(),m=l(_(i),2),E=_(m);P(E,{get agentIdx(){return t().divine.agentIdx},highlight:!0});var I=l(E,2);P(I,{get agentIdx(){return t().divine.targetIdx},highlight:!0});var g=l(I,2),b=_(g,!0);o(g),o(m),o(i),M(()=>K(b,Qt[t().divine.result]??"NULL")),d(r,i)};L(xt,r=>{t().divine&&r(Ot)})}var Rt=l(xt,2);{var Ut=r=>{var i=Ie(),m=l(_(i),2),E=_(m),I=_(E,!0);o(E),it(),o(m),o(i),M(()=>K(I,Xt[t().result.winSide])),d(r,i)};L(Rt,r=>{t().result&&r(Ut)})}return o(k),o(u),o(c),M(()=>K(T,`Day ${s()??""} `)),d(e,c),Tt(a,"dayStatuses",h),lt({dayStatuses:h})}function dt(e){const a=e.split(/\r?\n/).filter(t=>t.trim()),s={};return a.forEach(t=>{const[h,c,...u]=t.split(",");s[h]||(s[h]=Le()),Ee(s[h],c,u)}),s}function Le(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function Ee(e,a,s){const h={status:([c,u,y,T])=>{e.agents[c]={role:u,status:y,name:T}},talk:([c,u,y,T])=>{e.talks.push({talkIdx:c,turnIdx:u,agentIdx:y,text:T})},vote:([c,u])=>{e.votes.push({agentIdx:c,targetIdx:u})},execute:([c,u])=>{e.execution={agentIdx:c,role:u}},divine:([c,u,y])=>{e.divine={agentIdx:c,targetIdx:u,result:y}},attackVote:([c,u])=>{e.attackVotes.push({agentIdx:c,targetIdx:u})},attack:([c,u])=>{e.attack={targetIdx:c,isSuccessful:u==="true"}},result:([c,u,y])=>{e.result={villagers:c,werewolves:u,winSide:y}}}[a];h&&h(s)}var be=p('<link rel="stylesheet">'),Ae=p("<option> </option>"),Te=p('<div class="tab-wrapper svelte-1vycxas"><button class="tab-button svelte-1vycxas"> </button> <button class="close-button svelte-1vycxas" aria-label="Close tab">✕</button></div>'),Se=p('<div class="log-container svelte-1vycxas"><div class="tabs-container svelte-1vycxas"><div class="tabs svelte-1vycxas"></div></div> <div class="days-container svelte-1vycxas"></div></div>'),De=p('<main class="svelte-1vycxas"><div class="input-controls svelte-1vycxas"><div class="select-container svelte-1vycxas"><select class="svelte-1vycxas"><option>サンプルログを選択</option><!></select></div> <div tabindex="0" class="file-input-container svelte-1vycxas" role="button"><div class="file-input-label svelte-1vycxas">ファイルを選択もしくはドラッグアンドドロップしてください</div></div> <input id="fileInput" type="file" accept=".log" multiple hidden></div> <style></style> <!></main>');function Pe(e,a){ot(a,!1);let s=_t([]),t=_t(0);function h(v){const f=v.target;Array.from(f.files||[]).forEach(k=>{const R=new FileReader;R.onload=j=>{var U;const w=((U=j.target)==null?void 0:U.result)??"";F(s,[...n(s),{name:k.name,processed:dt(w)}]),F(t,n(s).length-1)},R.readAsText(k)}),f&&(f.value="")}function c(v){var x;Array.from(((x=v.dataTransfer)==null?void 0:x.files)||[]).forEach(k=>{const R=new FileReader;R.onload=j=>{var U;const w=((U=j.target)==null?void 0:U.result)??"";F(s,[...n(s),{name:k.name,processed:dt(w)}]),F(t,n(s).length-1)},R.readAsText(k)})}function u(v){F(s,n(s).filter((f,x)=>x!==v)),n(t)>=n(s).length&&F(t,n(s).length-1)}const y=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>C(()=>import("../chunks/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>C(()=>import("../chunks/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>C(()=>import("../chunks/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>C(()=>import("../chunks/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>C(()=>import("../chunks/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>C(()=>import("../chunks/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>C(()=>import("../chunks/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>C(()=>import("../chunks/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>C(()=>import("../chunks/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>C(()=>import("../chunks/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.oHz1b7i6.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>C(()=>import("../chunks/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.K60EV997.js"),[],import.meta.url)})).map(([v,f])=>({name:v.split("/").pop()||"",path:`${Lt}${v.replace("/static","")}`}));async function T(v,f){try{const k=await(await fetch(v)).text();F(s,[...n(s),{name:f,processed:dt(k)}]),F(t,n(s).length-1)}catch(x){console.error("Error loading asset log:",x)}}let S=_t(null);nt();var O=De();Bt(v=>{var f=be();qt.title="aiwolf-nlp-viewer",bt(f,"href",`${Lt??""}/global.css`),d(v,f)});var W=_(O),V=_(W),N=_(V),q=_(N);q.value=((q.__value="")==null,"");var et=l(q);Y(et,1,()=>y,H,(v,f)=>{var x=Ae(),k={},R=_(x,!0);o(x),M(()=>{k!==(k=n(f).path)&&(x.value=(x.__value=n(f).path)==null?"":n(f).path),K(R,n(f).name)}),d(v,x)}),o(N),o(V);var J=l(V,2),X=l(J,2);Mt(X,v=>F(S,v),()=>n(S)),o(W);var ct=l(W,4);{var at=v=>{var f=Se(),x=_(f),k=_(x);Y(k,5,()=>n(s),H,(j,w,U)=>{var G=Te(),Q=_(G),st=_(Q,!0);o(Q);var vt=l(Q,2);o(G),M(()=>{gt(G,"active",n(t)===U),K(st,n(w).name)}),B("click",Q,()=>F(t,U)),B("click",vt,()=>u(U)),d(j,G)}),o(k),o(x);var R=l(x,2);Y(R,5,()=>Object.entries(n(s)[n(t)].processed),H,(j,w)=>{let U=()=>n(w)[0],G=()=>n(w)[1];ke(j,{get dayIdx(){return U()},get dayStatus(){return G()},get dayStatuses(){return n(s)[n(t)].processed}})}),o(R),o(f),d(v,f)};L(ct,v=>{n(s).length>0&&v(at)})}o(O),B("change",N,v=>{const f=v.currentTarget.value;if(f){const x=y.find(k=>k.path===f);x&&T(x.path,x.name),v.currentTarget.value=""}}),B("dragover",J,Et(function(v){Yt.call(this,a,v)})),B("drop",J,Et(c)),B("click",J,()=>{var v;return(v=n(S))==null?void 0:v.click()}),B("keydown",J,v=>{var f;v.key==="Enter"&&((f=n(S))==null||f.click())}),B("change",X,h),d(e,O),lt()}export{Pe as component};
