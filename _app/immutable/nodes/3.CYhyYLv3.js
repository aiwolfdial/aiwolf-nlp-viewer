import{p as Z,_ as C}from"../chunks/CftfkXwu.js";import{t as v,a as l,d as gt,b as yt}from"../chunks/CTnEh6C5.js";import{p as rt,c as n,r,i as R,a as it,az as vt,g as o,ac as kt,s as i,aH as at,aF as pt,d as G,$ as Lt}from"../chunks/CyVfPAtv.js";import{s as N}from"../chunks/CzD_vbg2.js";import{i as y}from"../chunks/BV-4Ubfb.js";import{e as $,i as B}from"../chunks/BrnlcqSN.js";import{d as Et,h as wt}from"../chunks/CvfwsWwl.js";import{s as I}from"../chunks/z0c0_8Sh.js";import{I as Tt,s as Y,c as At,R as Ut,t as ct,a as Ot,S as Vt,b as St,T as Rt}from"../chunks/DqC9UZRk.js";import{p as Q}from"../chunks/DbTyxg1m.js";import{b as Dt}from"../chunks/DYqkWjrg.js";/* empty css                */var zt=v("<strong> </strong>");function M(b,L){rt(L,!0);let E=Z(L,"agentIdx",3,""),a=Z(L,"highlight",3,!1);var c=zt(),d=n(c,!0);r(c),R((s,u)=>{Y(c,At(s),"svelte-dj3b7l"),N(d,u)},[()=>a()?"agent"+E().padStart(2,"0"):"",()=>Tt(E())]),l(b,c),it()}function Ct(b,L){rt(L,!0);let E=Z(L,"text",3,"");function a(s){const u=/Agent\[(\d+)\]/g,w=[];let V=0,A;for(;(A=u.exec(s))!==null;)A.index>V&&w.push({text:s.slice(V,A.index),agentIdx:null,isAgentTag:!1}),w.push({text:A[0],agentIdx:parseInt(A[1]),isAgentTag:!0}),V=u.lastIndex;if(V<s.length){var S=s.slice(V);Object.entries(Ut).forEach(([T,P])=>{S=S.replaceAll(T,P)}),w.push({text:S,agentIdx:null,isAgentTag:!1})}return{parts:w}}var c=gt(),d=vt(c);$(d,17,()=>a(E()).parts,B,(s,u)=>{var w=gt(),V=vt(w);{var A=T=>{const P=kt(()=>{var q;return((q=o(u).agentIdx)==null?void 0:q.toString())??""});M(T,{get agentIdx(){return o(P)},highlight:!0})},S=T=>{var P=yt();R(()=>N(P,o(u).text)),l(T,P)};y(V,T=>{o(u).isAgentTag?T(A):T(S,!1)})}l(s,w)}),l(b,c),it()}var Mt=v("<iconify-icon></iconify-icon>",2),Pt=v("<iconify-icon></iconify-icon>",2),jt=v("<iconify-icon></iconify-icon>",2),Ft=v("<iconify-icon></iconify-icon>",2),Nt=v("<iconify-icon></iconify-icon>",2),qt=v("<iconify-icon></iconify-icon>",2),Ht=v("<iconify-icon></iconify-icon>",2),Wt=v("<li><!> </li>"),$t=v('<div><h3 class="text-lg font-bold my-2">エージェント</h3> <ul></ul></div>'),Bt=v("<li><!> <!></li>"),Gt=v('<div><h3 class="text-lg font-bold my-2">会話</h3> <ul></ul></div>'),Jt=v("<li><!> が <!> に投票</li>"),Kt=v('<div><h3 class="text-lg font-bold my-2">投票</h3> <ul></ul></div>'),Qt=v('<div><h3 class="text-lg font-bold my-2">追放</h3> <p><!> を追放</p></div>'),Xt=v("<li><!> が <!> に投票</li>"),Yt=v('<div><h3 class="text-lg font-bold my-2">襲撃投票</h3> <ul></ul></div>'),Zt=v("<p><!> を襲撃: <strong> </strong></p>"),te=v("<p>襲撃対象なし</p>"),ee=v('<div><h3 class="text-lg font-bold my-2">襲撃</h3> <!></div>'),ae=v('<div><h3 class="text-lg font-bold my-2">占い</h3> <p><!> が <!> を占い: <strong> </strong></p></div>'),re=v('<div><h3 class="text-lg font-bold my-2">結果</h3> <p><strong> </strong> が勝利</p></div>'),ie=v('<div class="flex-[0_0_400px] rounded-lg bg-base-200"><div class="flex flex-col h-full p-4"><h2 class="text-xl font-bold pb-2"> <!> <!> <!> <!> <!> <!> <!></h2> <div class="grow overflow-y-auto pr-4"><!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function oe(b,L){rt(L,!0);let E=Z(L,"dayIdx",3,""),a=Z(L,"dayStatus",19,()=>({}));var c=ie(),d=n(c),s=n(d),u=n(s),w=i(u);{var V=t=>{var e=Mt();I(e,"inline",!0),I(e,"icon","mdi:conversation"),l(t,e)};y(w,t=>{a().talks.length>0&&t(V)})}var A=i(w,2);{var S=t=>{var e=Pt();I(e,"inline",!0),I(e,"icon","mdi:vote"),l(t,e)};y(A,t=>{a().votes.length>0&&t(S)})}var T=i(A,2);{var P=t=>{var e=jt();I(e,"inline",!0),I(e,"icon","mdi:account-remove"),l(t,e)};y(T,t=>{a().execution&&t(P)})}var q=i(T,2);{var tt=t=>{var e=Ft();I(e,"inline",!0),I(e,"icon","mdi:vote"),l(t,e)};y(q,t=>{a().attackVotes.length>0&&t(tt)})}var J=i(q,2);{var et=t=>{var e=Nt();I(e,"inline",!0),I(e,"icon","mdi:sword"),l(t,e)};y(J,t=>{a().attack&&t(et)})}var X=i(J,2);{var ot=t=>{var e=qt();I(e,"inline",!0),I(e,"icon","mdi:account-eye"),l(t,e)};y(X,t=>{a().divine&&t(ot)})}var nt=i(X,2);{var m=t=>{var e=Ht();I(e,"inline",!0),I(e,"icon","mdi:trophy"),l(t,e)};y(nt,t=>{a().result&&t(m)})}r(s);var x=i(s,2),g=n(x);{var U=t=>{var e=$t(),p=i(n(e),2);$(p,21,()=>Object.entries(a().agents),B,(k,f)=>{let _=()=>o(f)[0],h=()=>o(f)[1];var O=Wt(),z=n(O);M(z,{get agentIdx(){return _()}});var _t=i(z);r(O),R(bt=>{Y(O,`${bt??""} svelte-1xvg87g`),ct(O,"opacity-25",h().status!=="ALIVE"),N(_t,` ${Ot[h().role]??"NULL"} -
                ${Vt[h().status]??"NULL"}`)},[()=>"p-2 my-2 border-4 rounded-md agent"+_().padStart(2,"0")]),l(k,O)}),r(p),r(e),l(t,e)};y(g,t=>{Object.keys(a().agents).length>0&&t(U)})}var D=i(g,2);{var H=t=>{var e=Gt(),p=i(n(e),2);$(p,21,()=>a().talks,B,(k,f)=>{var _=Bt(),h=n(_);M(h,{get agentIdx(){return o(f).agentIdx}});var O=i(h,2);Ct(O,{get text(){return o(f).text}}),r(_),R(z=>{Y(_,`${z??""} svelte-1xvg87g`),ct(_,"opacity-25",o(f).text==="Over")},[()=>"p-2 my-2 border-4 rounded-md agent"+o(f).agentIdx.padStart(2,"0")]),l(k,_)}),r(p),r(e),l(t,e)};y(D,t=>{a().talks.length>0&&t(H)})}var j=i(D,2);{var F=t=>{var e=Kt(),p=i(n(e),2);$(p,21,()=>a().votes,B,(k,f)=>{var _=Jt(),h=n(_);M(h,{get agentIdx(){return o(f).agentIdx}});var O=i(h,2);M(O,{get agentIdx(){return o(f).targetIdx},highlight:!0}),at(),r(_),R(z=>Y(_,`${z??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+o(f).agentIdx.padStart(2,"0")]),l(k,_)}),r(p),r(e),l(t,e)};y(j,t=>{a().votes.length>0&&t(F)})}var W=i(j,2);{var st=t=>{var e=Qt(),p=i(n(e),2),k=n(p);M(k,{get agentIdx(){return a().execution.agentIdx},highlight:!0}),at(),r(p),r(e),l(t,e)};y(W,t=>{a().execution&&t(st)})}var K=i(W,2);{var lt=t=>{var e=Yt(),p=i(n(e),2);$(p,21,()=>a().attackVotes,B,(k,f)=>{var _=Xt(),h=n(_);M(h,{get agentIdx(){return o(f).agentIdx}});var O=i(h,2);M(O,{get agentIdx(){return o(f).targetIdx},highlight:!0}),at(),r(_),R(z=>Y(_,`${z??""} svelte-1xvg87g`),[()=>"p-2 my-2 border-4 rounded-md agent"+o(f).agentIdx.padStart(2,"0")]),l(k,_)}),r(p),r(e),l(t,e)};y(K,t=>{a().attackVotes.length>0&&t(lt)})}var dt=i(K,2);{var xt=t=>{var e=ee(),p=i(n(e),2);{var k=_=>{var h=Zt(),O=n(h);M(O,{get agentIdx(){return a().attack.targetIdx},highlight:!0});var z=i(O,2),_t=n(z,!0);r(z),r(h),R(()=>N(_t,a().attack.isSuccessful?"成功":"失敗")),l(_,h)},f=_=>{var h=te();l(_,h)};y(p,_=>{a().attack.targetIdx!=="-1"?_(k):_(f,!1)})}r(e),l(t,e)};y(dt,t=>{a().attack&&t(xt)})}var ut=i(dt,2);{var mt=t=>{var e=ae(),p=i(n(e),2),k=n(p);M(k,{get agentIdx(){return a().divine.agentIdx},highlight:!0});var f=i(k,2);M(f,{get agentIdx(){return a().divine.targetIdx},highlight:!0});var _=i(f,2),h=n(_,!0);r(_),r(p),r(e),R(()=>N(h,St[a().divine.result]??"NULL")),l(t,e)};y(ut,t=>{a().divine&&t(mt)})}var ht=i(ut,2);{var It=t=>{var e=re(),p=i(n(e),2),k=n(p),f=n(k,!0);r(k),at(),r(p),r(e),R(()=>N(f,Rt[a().result.winSide])),l(t,e)};y(ht,t=>{a().result&&t(It)})}r(x),r(d),r(c),R(()=>N(u,`Day ${E()??""} `)),l(b,c),it()}function ft(b){const L=b.split(/\r?\n/).filter(a=>a.trim()),E={};return L.forEach(a=>{const[c,d,...s]=a.split(",");E[c]||(E[c]=ne()),se(E[c],d,s)}),E}function ne(){return{agents:{},talks:[],votes:[],execution:null,divine:null,attackVotes:[],attack:null,result:null}}function se(b,L,E){const c={status:([d,s,u,w])=>{b.agents[d]={role:s,status:u,name:w}},talk:([d,s,u,w])=>{b.talks.push({talkIdx:d,turnIdx:s,agentIdx:u,text:w})},vote:([d,s])=>{b.votes.push({agentIdx:d,targetIdx:s})},execute:([d,s])=>{b.execution={agentIdx:d,role:s}},divine:([d,s,u])=>{b.divine={agentIdx:d,targetIdx:s,result:u}},attackVote:([d,s])=>{b.attackVotes.push({agentIdx:d,targetIdx:s})},attack:([d,s])=>{b.attack={targetIdx:d,isSuccessful:s==="true"}},result:([d,s,u])=>{b.result={villagers:d,werewolves:s,winSide:u}}}[L];c&&c(E)}var le=v("<option> </option>"),_e=v('<div class="w-fit shrink-0 flex gap-0"><button class="btn"> </button> <button class="btn btn-error btn-square" aria-label="Close tab"><iconify-icon></iconify-icon></button></div>',2),ve=v('<div class="w-full shrink-0 overflow-x-auto flex gap-4 m-4"></div> <div class="overflow-y-hidden flex grow overflox-x-auto gap-4 p-4"></div>',1),ce=v('<main class="h-screen flex flex-col"><div class="navbar bg-base-100 flex justify-start gap-4 overflow-x-auto"><h1 class="text-3xl font-bold text-nowrap ml-2">aiwolf-nlp-viewer</h1> <select class="select min-w-3xs w-3xs ml-auto"><option>サンプルログを選択</option><!></select> <input class="file-input min-w-3xs w-3xs" type="file" accept=".log" multiple> <label class="flex items-center cursor-pointer gap-2"><iconify-icon></iconify-icon> <input type="checkbox" value="dark" class="toggle theme-controller"> <iconify-icon></iconify-icon></label></div> <div class="w-full h-full flex flex-col overflow-hidden bg-base-300"><!></div></main>',2);function Le(b,L){rt(L,!0);let E={logFiles:[],selectedTabIdx:0},a=pt(Q(E.logFiles)),c=pt(Q(E.selectedTabIdx));function d(m){const x=m.target;Array.from(x.files||[]).forEach(U=>{const D=new FileReader;D.onload=H=>{var F;const j=((F=H.target)==null?void 0:F.result)??"";G(a,Q([...o(a),{name:U.name,data:ft(j)}])),G(c,o(a).length-1)},D.readAsText(U)}),x&&(x.value="")}function s(m){G(a,Q(o(a).filter((x,g)=>g!==m))),o(c)>=o(a).length&&G(c,o(a).length-1)}const u=Object.entries(Object.assign({"/static/assets/1734125235_kanolab_Mille_UEC-IL_sUper_IL_satozaki.log":()=>C(()=>import("../chunks/CxPUTjnS.js"),[],import.meta.url),"/static/assets/1734126573_Mille_kanolab_sUper_IL_satozaki_UEC-IL.log":()=>C(()=>import("../chunks/Ch4hCXju.js"),[],import.meta.url),"/static/assets/1734322165_satozaki_Mille_sUper_IL_kanolab_barneko.log":()=>C(()=>import("../chunks/D6Ada88o.js"),[],import.meta.url),"/static/assets/1734322532_barneko_Mille_satozaki_kanolab_sUper_IL.log":()=>C(()=>import("../chunks/BmNzAw4g.js"),[],import.meta.url),"/static/assets/1734328995_CanisLupus_barneko_Mille_satozaki_sUper_IL.log":()=>C(()=>import("../chunks/Dh5zF3NH.js"),[],import.meta.url),"/static/assets/1734329414_Mille_UEC-IL_kanolab_CanisLupus_satozaki.log":()=>C(()=>import("../chunks/B-nbrCmY.js"),[],import.meta.url),"/static/assets/1734329757_UEC-IL_sUper_IL_barneko_CanisLupus_satozaki.log":()=>C(()=>import("../chunks/CZBC5jrw.js"),[],import.meta.url),"/static/assets/1734335625_satozaki_CanisLupus_UEC-IL_sUper_IL_barneko.log":()=>C(()=>import("../chunks/JWZkbpfe.js"),[],import.meta.url),"/static/assets/1734336483_Mille_barneko_sUper_IL_satozaki_UEC-IL.log":()=>C(()=>import("../chunks/gGfePD1C.js"),[],import.meta.url),"/static/assets/1734336998_sUper_IL_satozaki_CanisLupus_kanolab_Mille.log":()=>C(()=>import("../chunks/oHz1b7i6.js"),[],import.meta.url),"/static/assets/1734339025_Mille_kanolab_CanisLupus_sUper_IL_satozaki.log":()=>C(()=>import("../chunks/K60EV997.js"),[],import.meta.url)})).map(([m,x])=>({name:m.split("/").pop()||"",path:`${Dt}${m.replace("/static","")}`}));async function w(m,x){try{const U=await(await fetch(m)).text();G(a,Q([...o(a),{name:x,data:ft(U)}])),G(c,o(a).length-1)}catch(g){console.error("Error loading asset log:",g)}}var V=ce();wt(m=>{Lt.title="aiwolf-nlp-viewer"});var A=n(V),S=i(n(A),2);S.__change=m=>{const x=m.currentTarget.value;if(x){const g=u.find(U=>U.path===x);g&&w(g.path,g.name),m.currentTarget.value=""}};var T=n(S);T.value=((T.__value="")==null,"");var P=i(T);$(P,17,()=>u,B,(m,x)=>{var g=le(),U={},D=n(g,!0);r(g),R(()=>{U!==(U=o(x).path)&&(g.value=(g.__value=o(x).path)==null?"":o(x).path),N(D,o(x).name)}),l(m,g)}),r(S);var q=i(S,2);q.__change=d;var tt=i(q,2),J=n(tt);I(J,"inline",!0),I(J,"icon","mdi:white-balance-sunny");var et=i(J,4);I(et,"inline",!0),I(et,"icon","mdi:moon-and-stars"),r(tt),r(A);var X=i(A,2),ot=n(X);{var nt=m=>{var x=ve(),g=vt(x);$(g,21,()=>o(a),B,(D,H,j)=>{var F=_e(),W=n(F);W.__click=()=>G(c,Q(j));var st=n(W,!0);r(W);var K=i(W,2);K.__click=()=>s(j);var lt=n(K);I(lt,"icon","mdi:close"),r(K),r(F),R(()=>{ct(W,"btn-active",o(c)===j),N(st,o(H).name)}),l(D,F)}),r(g);var U=i(g,2);$(U,21,()=>Object.entries(o(a)[o(c)].data),B,(D,H)=>{let j=()=>o(H)[0],F=()=>o(H)[1];oe(D,{get dayIdx(){return j()},get dayStatus(){return F()}})}),r(U),l(m,x)};y(ot,m=>{o(a).length>0&&m(nt)})}r(X),r(V),l(b,V),it()}Et(["change","click"]);export{Le as component};
