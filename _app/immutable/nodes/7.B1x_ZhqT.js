var ue=Object.defineProperty;var pe=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var d=(e,t,r)=>pe(e,typeof t!="symbol"?t+"":t,r);import"../chunks/Bg9kRutz.js";import{aG as ye,u as me,r as Se,B as we,p as be,l as Ee,h as p,c as h,i as X,a as ve,$ as _e,f}from"../chunks/sDBeb3T2.js";import{l as Ae,d as ge,s as Ke}from"../chunks/CEqd99YM.js";import{i as Pe}from"../chunks/Cs_QwUJL.js";import{t as te,a as Z}from"../chunks/CS_i3HMU.js";import{h as Ce}from"../chunks/CzlQwNva.js";import{s as E,r as Q}from"../chunks/zR9ABBex.js";import{b as He}from"../chunks/DbY9yHFC.js";import{p as Te}from"../chunks/BazZ8WVp.js";/* empty css                */function k(e,t,r=t){var a=ye();Ae(e,"input",s=>{var n=s?e.defaultValue:e.value;if(n=B(e)?M(n):n,r(n),a&&n!==(n=t())){var o=e.selectionStart,i=e.selectionEnd;e.value=n??"",i!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(i,e.value.length))}}),(we&&e.defaultValue!==e.value||me(t)==null&&e.value)&&r(B(e)?M(e.value):e.value),Se(()=>{var s=t();B(e)&&s===M(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function B(e){var t=e.type;return t==="number"||t==="range"}function M(e){return e===""?null:+e}const A=new TextEncoder,D=new TextDecoder;function Re(...e){const t=e.reduce((s,{length:n})=>s+n,0),r=new Uint8Array(t);let a=0;for(const s of e)r.set(s,a),a+=s.length;return r}function We(e){if(Uint8Array.prototype.toBase64)return e.toBase64();const t=32768,r=[];for(let a=0;a<e.length;a+=t)r.push(String.fromCharCode.apply(null,e.subarray(a,a+t)));return btoa(r.join(""))}function xe(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);const t=atob(e),r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}function $e(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof e=="string"?e:D.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=D.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return xe(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function N(e){let t=e;return typeof t=="string"&&(t=A.encode(t)),Uint8Array.prototype.toBase64?t.toBase64({alphabet:"base64url",omitPadding:!0}):We(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class J extends Error{constructor(r,a){var s;super(r,a);d(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(s=Error.captureStackTrace)==null||s.call(Error,this,this.constructor)}}d(J,"code","ERR_JOSE_GENERIC");class b extends J{constructor(){super(...arguments);d(this,"code","ERR_JOSE_NOT_SUPPORTED")}}d(b,"code","ERR_JOSE_NOT_SUPPORTED");class v extends J{constructor(){super(...arguments);d(this,"code","ERR_JWS_INVALID")}}d(v,"code","ERR_JWS_INVALID");class re extends J{constructor(){super(...arguments);d(this,"code","ERR_JWT_INVALID")}}d(re,"code","ERR_JWT_INVALID");function y(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function H(e,t){return e.name===t}function L(e){return parseInt(e.name.slice(4),10)}function De(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Je(e,t){if(!e.usages.includes(t))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)}function Oe(e,t,r){switch(t){case"HS256":case"HS384":case"HS512":{if(!H(e.algorithm,"HMAC"))throw y("HMAC");const a=parseInt(t.slice(2),10);if(L(e.algorithm.hash)!==a)throw y(`SHA-${a}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!H(e.algorithm,"RSASSA-PKCS1-v1_5"))throw y("RSASSA-PKCS1-v1_5");const a=parseInt(t.slice(2),10);if(L(e.algorithm.hash)!==a)throw y(`SHA-${a}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!H(e.algorithm,"RSA-PSS"))throw y("RSA-PSS");const a=parseInt(t.slice(2),10);if(L(e.algorithm.hash)!==a)throw y(`SHA-${a}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!H(e.algorithm,"Ed25519"))throw y("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!H(e.algorithm,"ECDSA"))throw y("ECDSA");const a=De(t);if(e.algorithm.namedCurve!==a)throw y(a,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Je(e,r)}function ae(e,t,...r){var a;if(r=r.filter(Boolean),r.length>2){const s=r.pop();e+=`one of type ${r.join(", ")}, or ${s}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&(a=t.constructor)!=null&&a.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Ie=(e,...t)=>ae("Key must be ",e,...t);function se(e,t,...r){return ae(`Key for the ${e} algorithm must be `,t,...r)}function ne(e){return(e==null?void 0:e[Symbol.toStringTag])==="CryptoKey"}function oe(e){return(e==null?void 0:e[Symbol.toStringTag])==="KeyObject"}const ie=e=>ne(e)||oe(e),Ue=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const a of t){const s=Object.keys(a);if(!r||r.size===0){r=new Set(s);continue}for(const n of s){if(r.has(n))return!1;r.add(n)}}return!0};function Be(e){return typeof e=="object"&&e!==null}const ce=e=>{if(!Be(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Me=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function Ne(e){let t,r;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new b('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new b('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new b('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new b('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const Le=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=Ne(e),a={...e};return delete a.alg,delete a.use,crypto.subtle.importKey("jwk",a,t,e.ext??!e.d,e.key_ops??r)},Ve=(e,t,r,a,s)=>{if(s.crit!==void 0&&(a==null?void 0:a.crit)===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!a||a.crit===void 0)return new Set;if(!Array.isArray(a.crit)||a.crit.length===0||a.crit.some(o=>typeof o!="string"||o.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let n;r!==void 0?n=new Map([...Object.entries(r),...t.entries()]):n=t;for(const o of a.crit){if(!n.has(o))throw new b(`Extension Header Parameter "${o}" is not recognized`);if(s[o]===void 0)throw new e(`Extension Header Parameter "${o}" is missing`);if(n.get(o)&&a[o]===void 0)throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(a.crit)};function Y(e){return ce(e)&&typeof e.kty=="string"}function Ge(e){return e.kty!=="oct"&&typeof e.d=="string"}function Ye(e){return e.kty!=="oct"&&typeof e.d>"u"}function ze(e){return e.kty==="oct"&&typeof e.k=="string"}let g;const ee=async(e,t,r,a=!1)=>{g||(g=new WeakMap);let s=g.get(e);if(s!=null&&s[r])return s[r];const n=await Le({...t,alg:r});return a&&Object.freeze(e),s?s[r]=n:g.set(e,{[r]:n}),n},qe=(e,t)=>{var o;g||(g=new WeakMap);let r=g.get(e);if(r!=null&&r[t])return r[t];const a=e.type==="public",s=!!a;let n;if(e.asymmetricKeyType==="x25519"){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}n=e.toCryptoKey(e.asymmetricKeyType,s,a?[]:["deriveBits"])}if(e.asymmetricKeyType==="ed25519"){if(t!=="EdDSA"&&t!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");n=e.toCryptoKey(e.asymmetricKeyType,s,[a?"verify":"sign"])}if(e.asymmetricKeyType==="rsa"){let i;switch(t){case"RSA-OAEP":i="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":i="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":i="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":i="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:i},s,a?["encrypt"]:["decrypt"]);n=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:i},s,[a?"verify":"sign"])}if(e.asymmetricKeyType==="ec"){const c=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=e.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!c)throw new TypeError("given KeyObject instance cannot be used for this algorithm");t==="ES256"&&c==="P-256"&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:c},s,[a?"verify":"sign"])),t==="ES384"&&c==="P-384"&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:c},s,[a?"verify":"sign"])),t==="ES512"&&c==="P-521"&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:c},s,[a?"verify":"sign"])),t.startsWith("ECDH-ES")&&(n=e.toCryptoKey({name:"ECDH",namedCurve:c},s,a?[]:["deriveBits"]))}if(!n)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return r?r[t]=n:g.set(e,{[t]:n}),n},Fe=async(e,t)=>{if(e instanceof Uint8Array||ne(e))return e;if(oe(e)){if(e.type==="secret")return e.export();if("toCryptoKey"in e&&typeof e.toCryptoKey=="function")try{return qe(e,t)}catch(a){if(a instanceof TypeError)throw a}let r=e.export({format:"jwk"});return ee(e,r,t)}if(Y(e))return e.k?$e(e.k):ee(e,e,t,!0);throw new Error("unreachable")},_=e=>e==null?void 0:e[Symbol.toStringTag],G=(e,t,r)=>{var a,s;if(t.use!==void 0){let n;switch(r){case"sign":case"verify":n="sig";break;case"encrypt":case"decrypt":n="enc";break}if(t.use!==n)throw new TypeError(`Invalid key for this operation, its "use" must be "${n}" when present`)}if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case r==="sign":case e==="dir":case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):!e.includes("GCM")&&e.endsWith("KW")?n="unwrapKey":n=r;break;case r==="encrypt":n="wrapKey";break;case r==="decrypt":n=e.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(n&&((s=(a=t.key_ops)==null?void 0:a.includes)==null?void 0:s.call(a,n))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},je=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(Y(t)){if(ze(t)&&G(e,t,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!ie(t))throw new TypeError(se(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(t.type!=="secret")throw new TypeError(`${_(t)} instances for symmetric algorithms must be of type "secret"`)}},Xe=(e,t,r)=>{if(Y(t))switch(r){case"decrypt":case"sign":if(Ge(t)&&G(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Ye(t)&&G(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!ie(t))throw new TypeError(se(e,t,"CryptoKey","KeyObject","JSON Web Key"));if(t.type==="secret")throw new TypeError(`${_(t)} instances for asymmetric algorithms must not be of type "secret"`);if(t.type==="public")switch(r){case"sign":throw new TypeError(`${_(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${_(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if(t.type==="private")switch(r){case"verify":throw new TypeError(`${_(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${_(t)} instances for asymmetric algorithm encryption must be of type "public"`)}},Ze=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?je(e,t,r):Xe(e,t,r)},Qe=(e,t)=>{const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(e.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new b(`alg ${e} is not supported either by JOSE or your javascript runtime`)}},ke=async(e,t,r)=>{if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Ie(t,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}return Oe(t,e,r),t},S=e=>Math.floor(e.getTime()/1e3),de=60,le=de*60,z=le*24,et=z*7,tt=z*365.25,rt=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,V=e=>{const t=rt.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]),a=t[3].toLowerCase();let s;switch(a){case"sec":case"secs":case"second":case"seconds":case"s":s=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":s=Math.round(r*de);break;case"hour":case"hours":case"hr":case"hrs":case"h":s=Math.round(r*le);break;case"day":case"days":case"d":s=Math.round(r*z);break;case"week":case"weeks":case"w":s=Math.round(r*et);break;default:s=Math.round(r*tt);break}return t[1]==="-"||t[4]==="ago"?-s:s},at=async(e,t,r)=>{const a=await ke(e,t,"sign");Me(e,a);const s=await crypto.subtle.sign(Qe(e,a.algorithm),a,r);return new Uint8Array(s)};class st{constructor(t){d(this,"_payload");d(this,"_protectedHeader");d(this,"_unprotectedHeader");if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new v("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Ue(this._protectedHeader,this._unprotectedHeader))throw new v("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...this._protectedHeader,...this._unprotectedHeader},s=Ve(v,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,a);let n=!0;if(s.has("b64")&&(n=this._protectedHeader.b64,typeof n!="boolean"))throw new v('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=a;if(typeof o!="string"||!o)throw new v('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ze(o,t,"sign");let i=this._payload;n&&(i=A.encode(N(i)));let c;this._protectedHeader?c=A.encode(N(JSON.stringify(this._protectedHeader))):c=A.encode("");const T=Re(c,A.encode("."),i),R=await Fe(t,o),K=await at(o,R,T),u={signature:N(K),payload:""};return n&&(u.payload=D.decode(i)),this._unprotectedHeader&&(u.header=this._unprotectedHeader),this._protectedHeader&&(u.protected=D.decode(c)),u}}class nt{constructor(t){d(this,"_flattened");this._flattened=new st(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const a=await this._flattened.sign(t,r);if(a.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${a.protected}.${a.payload}.${a.signature}`}}function w(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class ot{constructor(t={}){d(this,"_payload");if(!ce(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:w("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:w("setNotBefore",S(t))}:this._payload={...this._payload,nbf:S(new Date)+V(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:w("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:w("setExpirationTime",S(t))}:this._payload={...this._payload,exp:S(new Date)+V(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:S(new Date)}:t instanceof Date?this._payload={...this._payload,iat:w("setIssuedAt",S(t))}:typeof t=="string"?this._payload={...this._payload,iat:w("setIssuedAt",S(new Date)+V(t))}:this._payload={...this._payload,iat:w("setIssuedAt",t)},this}}class it extends ot{constructor(){super(...arguments);d(this,"_protectedHeader")}setProtectedHeader(r){return this._protectedHeader=r,this}async sign(r,a){var n;const s=new nt(A.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)==null?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new re("JWTs MUST NOT use unencoded payload");return s.sign(r,a)}}function ct(e,t){let r=new Uint8Array(32);crypto.getRandomValues(r),t.secret=btoa(String.fromCharCode(...r))}var dt=(e,t)=>navigator.clipboard.writeText(t.token),lt=te('<div class="w-md card bg-base-100 shadow-xl mt-4"><div class="card-body"><pre class="whitespace-pre-wrap break-all"> </pre> <button class="btn">トークンをコピーする</button></div></div>'),ht=te('<main><div class="hero bg-base-200 min-h-screen"><div class="hero-content"><div><div class="w-md card bg-base-100 shadow-xl"><div class="card-body"><h2 class="text-xl font-bold text-center">トークン生成</h2> <p class="text-sm">対戦サーバにおける接続認証を有効にした場合に必要となるトークンを生成します。秘密鍵はブラウザ上で生成され、サーバには一切送信されません。</p> <p class="text-sm">エージェントとして接続する場合は、チーム名を入力してください。</p> <button class="btn mt-2">秘密鍵を生成する</button> <label class="input w-full mt-2 block"><iconify-icon></iconify-icon> <input type="text" class="grow" placeholder="秘密鍵"></label> <select class="select w-full mt-2"><option>エージェント</option><option>リアルタイムログ</option></select> <label class="input w-full mt-2 block"><iconify-icon></iconify-icon> <input type="text" class="grow" placeholder="チーム名"></label></div></div> <!></div></div></div></main>',2);function At(e,t){be(t,!0);let r=Te({secret:"",role:"PLAYER",team:"",token:""});Ee(()=>{a(r.secret,r.role,r.team)});async function a(l,m,P){if(!l||!m){r.token="";return}if(m==="PLAYER"&&!P){r.token="";return}const C=m==="PLAYER"?{role:"PLAYER",team:P}:{role:"RECEIVER"};try{const $=new TextEncoder().encode(l),U=await new it(C).setProtectedHeader({alg:"HS256"}).sign($);r.token=U}catch{r.token="エラーが発生しました"}}var s=ht();Ce(l=>{_e.title="aiwolf-nlp-viewer"});var n=h(s),o=h(n),i=h(o),c=h(i),T=h(c),R=p(h(T),6);R.__click=[ct,r];var K=p(R,2),u=h(K);E(u,"class","h-[1em] opacity-50"),E(u,"inline",!0),E(u,"icon","mdi:key");var q=p(u,2);Q(q),f(K);var W=p(K,2),O=h(W);O.value=(O.__value="PLAYER")==null?"":"PLAYER";var F=p(O);F.value=(F.__value="RECEIVER")==null?"":"RECEIVER",f(W);var j=p(W,2),x=h(j);E(x,"class","h-[1em] opacity-50"),E(x,"inline",!0),E(x,"icon","mdi:form-textbox");var I=p(x,2);Q(I),f(j),f(T),f(c);var he=p(c,2);{var fe=l=>{var m=lt(),P=h(m),C=h(P),$=h(C,!0);f(C);var U=p(C,2);U.__click=[dt,r],f(P),f(m),X(()=>Ke($,r.token)),Z(l,m)};Pe(he,l=>{r.token&&l(fe)})}f(i),f(o),f(n),f(s),X(()=>I.disabled=r.role!=="PLAYER"),k(q,()=>r.secret,l=>r.secret=l),He(W,()=>r.role,l=>r.role=l),k(I,()=>r.team,l=>r.team=l),Z(e,s),ve()}ge(["click"]);export{At as component};
